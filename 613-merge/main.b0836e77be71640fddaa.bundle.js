(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1805:function(module,exports,__webpack_require__){"use strict";__webpack_require__(12),__webpack_require__(72),__webpack_require__(61),__webpack_require__(55),__webpack_require__(63),__webpack_require__(1806),__webpack_require__(1807),__webpack_require__(17),__webpack_require__(62);var _clientApi=__webpack_require__(77),_clientLogger=__webpack_require__(56),_configFilename=__webpack_require__(1808);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_configFilename.args||_configFilename.argTypes)&&_clientLogger.logger.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify({args:_configFilename.args,argTypes:_configFilename.argTypes})),_configFilename.decorators&&_configFilename.decorators.forEach((function(decorator){return(0,_clientApi.addDecorator)(decorator,!1)})),_configFilename.loaders&&_configFilename.loaders.forEach((function(loader){return(0,_clientApi.addLoader)(loader,!1)})),(_configFilename.parameters||_configFilename.globals||_configFilename.globalTypes)&&(0,_clientApi.addParameters)(_objectSpread(_objectSpread({},_configFilename.parameters),{},{globals:_configFilename.globals,globalTypes:_configFilename.globalTypes}),!1),_configFilename.argTypesEnhancers&&_configFilename.argTypesEnhancers.forEach((function(enhancer){return(0,_clientApi.addArgTypesEnhancer)(enhancer)}))},1808:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"parameters",(function(){return parameters}));__webpack_require__(1809);var parameters={actions:{argTypesRegex:"^on[A-Z].*"}}},1811:function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(326).configure)([__webpack_require__(1812),__webpack_require__(1905),__webpack_require__(1906)],module,!1)}).call(this,__webpack_require__(76)(module))},1812:function(module,exports,__webpack_require__){var map={"./cognite.stories.mdx":740};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1812},1821:function(module,exports){},1822:function(module,exports){},1823:function(module,exports){},1824:function(module,exports){},1825:function(module,exports){},1905:function(module,exports,__webpack_require__){var map={"./cognite.stories.mdx":740};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1905},1906:function(module,exports,__webpack_require__){var map={"./cognite.stories.tsx":84,"./index.stories.tsx":1907};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=1906},1907:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(26),__webpack_require__(767),__webpack_require__(30),__webpack_require__(10);var _babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(65),_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_4___default=__webpack_require__.n(_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_4__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(8),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(6),_storybook_react__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(326),react__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_8___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_8__),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(68),styled_components__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(46),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(118),_src__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(44);function _templateObject(){var data=_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_4___default()(["\n  height: 800px;\n  width: 100%;\n  position: relative;\n  display: block;\n  overflow: hidden;\n"]);return _templateObject=function _templateObject(){return data},data}var defaultAnnotations=[{id:"a",comment:"Hello World",mark:{type:"RECT",width:161,height:165,x:.1,y:.1}},{id:"b",comment:"Hello World",mark:{type:"RECT",width:161,height:165,x:0,y:0}},{id:"test",comment:"percentages",mark:{type:"RECT",width:.2,height:.2,x:.5,y:.5}},{id:"test2",comment:"percentages 2 ",mark:{type:"RECT",width:.5,height:.1,x:.9,y:.9}},{id:"test2--a",comment:"percentages 2 ",mark:{type:"RECT",width:.5,height:.1,x:.25,y:.75}},{id:"test2--b",comment:"percentages 2 ",mark:{type:"RECT",width:.5,height:.1,x:.75,y:.25}}];Object(_storybook_react__WEBPACK_IMPORTED_MODULE_7__.storiesOf)("Default Viewer",module).addParameters({storySource:{source:'import { storiesOf } from "@storybook/react";\nimport React, { useEffect, useState } from "react";\nimport { action } from "@storybook/addon-actions";\nimport styled from "styled-components";\nimport { number } from "@storybook/addon-knobs";\nimport { ReactPictureAnnotation } from "../src";\nimport { IAnnotation } from "../src/Annotation";\nimport { IShapeData } from "../src/Shape";\n\nconst defaultAnnotations = [\n  {\n    id: "a",\n    comment: "Hello World",\n    mark: {\n      type: "RECT",\n      width: 161,\n      height: 165,\n      x: 0.1,\n      y: 0.1,\n    },\n  },\n  {\n    id: "b",\n    comment: "Hello World",\n    mark: {\n      type: "RECT",\n      width: 161,\n      height: 165,\n      x: 0,\n      y: 0,\n    },\n  },\n  {\n    id: "test",\n    comment: "percentages",\n    mark: {\n      type: "RECT",\n      width: 0.2,\n      height: 0.2,\n      x: 0.5,\n      y: 0.5,\n    },\n  },\n  {\n    id: "test2",\n    comment: "percentages 2 ",\n    mark: {\n      type: "RECT",\n      width: 0.5,\n      height: 0.1,\n      x: 0.9,\n      y: 0.9,\n    },\n  },\n\n  {\n    id: "test2--a",\n    comment: "percentages 2 ",\n    mark: {\n      type: "RECT",\n      width: 0.5,\n      height: 0.1,\n      x: 0.25,\n      y: 0.75,\n    },\n  },\n  {\n    id: "test2--b",\n    comment: "percentages 2 ",\n    mark: {\n      type: "RECT",\n      width: 0.5,\n      height: 0.1,\n      x: 0.75,\n      y: 0.25,\n    },\n  },\n];\n\nstoriesOf("Default Viewer", module)\n  .add("No Edit", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(defaultAnnotations);\n\n    const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedIds={selectedIds}\n          onSelect={(e) => {\n            setSelectedIds(e);\n            action("onSelect")(e);\n          }}\n          image="https://unsplash.it/1200/600"\n          mouseWheelScaleModifier={number(\n            "Mouse Wheel zoom scale modifier",\n            0.001,\n            {\n              range: true,\n              min: 0.00001,\n              max: 0.01,\n              step: 0.00001,\n            }\n          )}\n        />\n      </Wrapper>\n    );\n  })\n  .add("Force mouse up", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n    const containerRef = React.createRef<ReactPictureAnnotation>();\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(defaultAnnotations);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          ref={containerRef}\n          renderItemPreview={() => <div />}\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          onSelect={(e) => {\n            containerRef.current?.forceMouseUp();\n            action("onSelect")(e);\n          }}\n          image="https://unsplash.it/1200/600"\n        />\n      </Wrapper>\n    );\n  })\n  .add("PDF", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(defaultAnnotations);\n\n    const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n    const [page, setPage] = useState<number>(1);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n    const [total, setTotal] = useState<number>(1);\n    const annotationRef = React.createRef<ReactPictureAnnotation>();\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          ref={annotationRef}\n          hoverable={true}\n          page={page}\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedIds={selectedIds}\n          onSelect={(e) => {\n            setSelectedIds(e);\n            action("onSelect")(e);\n          }}\n          onPDFLoaded={({ pages }) => {\n            setTotal(pages);\n          }}\n          pdf="https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf"\n        />\n        <div\n          style={{\n            position: "absolute",\n            bottom: 12,\n            left: "50%",\n            right: "50%",\n          }}\n        >\n          <button onClick={() => setPage(page - 1)} disabled={page === 1}>\n            Prev\n          </button>\n          <button onClick={() => setPage(page + 1)} disabled={page === total}>\n            Next\n          </button>\n        </div>\n      </Wrapper>\n    );\n  })\n  .add("Hoverable", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >([\n      {\n        id: "a",\n        comment: "Hello World",\n        mark: {\n          type: "RECT",\n          width: 161,\n          height: 165,\n          x: 229,\n          y: 92,\n        },\n      },\n    ]);\n\n    const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n    return (\n      <ReactPictureAnnotation\n        width={size.width}\n        height={size.height}\n        annotationData={annotationData}\n        onChange={(data) => setAnnotationData(data)}\n        selectedIds={selectedIds}\n        onSelect={(e) => {\n          setSelectedIds(e);\n          action("onSelect")(e);\n        }}\n        hoverable={true}\n        image="https://unsplash.it/1200/600"\n      />\n    );\n  })\n  .add("Refresh", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [image, setImage] = useState("https://picsum.photos/id/1/200/300");\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >([\n      {\n        id: "a",\n        comment: "Hello World",\n        mark: {\n          type: "RECT",\n          width: 161,\n          height: 165,\n          x: 229,\n          y: 92,\n        },\n      },\n    ]);\n\n    const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n    return (\n      <Wrapper>\n        <button\n          onClick={() =>\n            setImage(\n              `https://picsum.photos/id/${Math.round(\n                Math.random() * 1000\n              )}/200/300`\n            )\n          }\n        >\n          Change Image\n        </button>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedIds={selectedIds}\n          onSelect={(e) => {\n            setSelectedIds(e);\n            action("onSelect")(e);\n          }}\n          hoverable={true}\n          image={image}\n        />\n      </Wrapper>\n    );\n  })\n  .add("Editable", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(defaultAnnotations);\n\n    const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    return (\n      <ReactPictureAnnotation\n        width={size.width}\n        height={size.height}\n        annotationData={annotationData}\n        onChange={(data) => setAnnotationData(data)}\n        selectedIds={selectedIds}\n        onSelect={(e) => {\n          setSelectedIds(e);\n          action("onSelect")(e);\n        }}\n        editable={true}\n        image="https://unsplash.it/1200/600"\n      />\n    );\n  })\n  .add("Creatable", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(defaultAnnotations);\n\n    const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    return (\n      <ReactPictureAnnotation\n        width={size.width}\n        height={size.height}\n        annotationData={annotationData}\n        onChange={(data) => setAnnotationData(data)}\n        selectedIds={selectedIds}\n        onSelect={(e) => {\n          setSelectedIds(e);\n          action("onSelect")(e);\n        }}\n        creatable={true}\n        editable={false}\n        image="https://unsplash.it/1200/600"\n      />\n    );\n  })\n  .add("Custom Render", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(\n      defaultAnnotations.map((el) => ({\n        ...el,\n        mark: {\n          ...el.mark,\n          draw: (canvas, x, y, width, height) => {\n            canvas.beginPath();\n            canvas.fillStyle = "green";\n            canvas.arc(\n              x + width / 2,\n              y + height / 2,\n              Math.min(height, width) / 2,\n              0,\n              2 * Math.PI\n            );\n            canvas.stroke();\n            canvas.fill();\n          },\n        },\n      }))\n    );\n\n    const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    return (\n      <ReactPictureAnnotation\n        width={size.width}\n        height={size.height}\n        annotationData={annotationData}\n        onChange={(data) => setAnnotationData(data)}\n        selectedIds={selectedIds}\n        onSelect={(e) => {\n          setSelectedIds(e);\n          action("onSelect")(e);\n        }}\n        image="https://unsplash.it/1200/600"\n      />\n    );\n  })\n  .add("No Labels", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >([\n      {\n        id: "a",\n        comment: "HA HA HA",\n        mark: {\n          type: "RECT",\n          width: 161,\n          height: 165,\n          x: 229,\n          y: 92,\n        },\n      },\n    ]);\n\n    const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedIds={selectedIds}\n          onSelect={(e) => {\n            setSelectedIds(e);\n            action("onSelect")(e);\n          }}\n          drawLabel={false}\n          image="https://unsplash.it/1200/600"\n        />\n      </Wrapper>\n    );\n  })\n  .add("Colors", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n    const annotations = [\n      {\n        id: "a",\n        comment: "HA HA HA",\n        mark: {\n          type: "RECT",\n          width: 161,\n          height: 165,\n          x: 229,\n          y: 92,\n          strokeColor: "red",\n          backgroundColor: "rgba(255,0,0,0.2)",\n        },\n      },\n      {\n        id: "b",\n        comment: "HA HA HA 2",\n        mark: {\n          type: "RECT",\n          width: 116,\n          height: 116,\n          x: 429,\n          y: 192,\n          strokeColor: "green",\n          backgroundColor: "rgba(0,255,0,0.2)",\n        },\n      },\n    ];\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(annotations);\n\n    const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    const changeColor = () => {\n      annotations[0].mark.strokeColor = "blue";\n      setAnnotationData(annotations);\n    };\n\n    return (\n      <Wrapper>\n        <button onClick={changeColor}>Change Color</button>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedIds={selectedIds}\n          onSelect={(e) => {\n            setSelectedIds(e);\n            action("onSelect")(e);\n          }}\n          image="https://unsplash.it/1200/600"\n        />\n      </Wrapper>\n    );\n  })\n  .add("Custom Render using scale", () => {\n    const AnnotationComponent = () => {\n      const [size, setSize] = useState({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n\n      const [annotationData, setAnnotationData] = useState<\n        IAnnotation<IShapeData>[]\n      >(\n        defaultAnnotations.map((el) => ({\n          ...el,\n          mark: {\n            ...el.mark,\n            draw: (canvas, x, y, _, _2, scale) => {\n              const fontSize = 16 * (scale || 0);\n              canvas.font = `${fontSize}px verdana`;\n\n              canvas.fillStyle = "black";\n              canvas.fillText("Scaled text", x, y);\n            },\n          },\n        }))\n      );\n\n      const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n\n      const onResize = () => {\n        setSize({\n          width: window.innerWidth - 16,\n          height: window.innerHeight - 16,\n        });\n      };\n\n      useEffect(() => {\n        window.addEventListener("resize", onResize);\n        return () => {\n          window.removeEventListener("resize", onResize);\n        };\n      }, []);\n\n      return (\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedIds={selectedIds}\n          onSelect={(e) => {\n            setSelectedIds(e);\n            action("onSelect")(e);\n          }}\n          image="https://unsplash.it/1200/600"\n        />\n      );\n    };\n\n    return <AnnotationComponent />;\n  })\n  .add("Buttons", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >([\n      {\n        id: "a",\n        comment: "HA HA HA",\n        mark: {\n          type: "RECT",\n          width: 161,\n          height: 165,\n          x: 229,\n          y: 92,\n        },\n      },\n      {\n        id: "b",\n        comment: "HA HA HA 2",\n        mark: {\n          type: "RECT",\n          width: 116,\n          height: 116,\n          x: 429,\n          y: 192,\n        },\n      },\n    ]);\n\n    const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    const annotationRef = React.createRef<ReactPictureAnnotation>();\n\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => {\n            setAnnotationData(data);\n            action("onChange")(data);\n          }}\n          selectedIds={selectedIds}\n          onSelect={(e) => {\n            setSelectedIds(e);\n            action("onSelect")(e);\n          }}\n          image="https://unsplash.it/1200/600"\n          ref={annotationRef}\n        />\n        <div style={{ position: "absolute", zIndex: 1000 }}>\n          <button\n            onClick={() => {\n              if (annotationRef.current) {\n                annotationRef.current.zoomIn();\n              }\n            }}\n          >\n            Zoom In\n          </button>\n          <button\n            onClick={() => {\n              if (annotationRef.current) {\n                annotationRef.current.zoomOut();\n              }\n            }}\n          >\n            Zoom Out\n          </button>\n          <button\n            onClick={() => {\n              if (annotationRef.current) {\n                annotationRef.current.reset();\n              }\n            }}\n          >\n            Reset\n          </button>\n        </div>\n      </Wrapper>\n    );\n  })\n  .add("Extract From Canvas", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >([defaultAnnotations[0]]);\n\n    const [src, setSrc] = useState<string | undefined>(undefined);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    const annotationRef = React.createRef<ReactPictureAnnotation>();\n\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          creatable={true}\n          onSelect={(e) => {\n            action("onSelect")(e);\n          }}\n          image="https://unsplash.it/1200/600"\n          ref={annotationRef}\n        />\n        <div style={{ position: "absolute", zIndex: 1000 }}>\n          <button\n            onClick={() => {\n              if (annotationRef.current) {\n                const { x, y, width, height } = annotationData[\n                  annotationData.length - 1\n                ].mark;\n                setSrc(\n                  annotationRef.current.extractFromCanvas(x, y, width, height)\n                );\n              }\n            }}\n          >\n            Get Image\n          </button>\n          <img src={src} style={{ width: 100, height: "auto" }} />\n        </div>\n      </Wrapper>\n    );\n  })\n  .add("Download", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(\n      defaultAnnotations\n        .map(\n          (el, i) =>\n            ({\n              ...el,\n              mark: {\n                ...el.mark,\n                draw: (ctx, x, y, _, _2, scale) => {\n                  const fontsize = scale * 28;\n                  const fontface = "verdana";\n                  const text = `Hello! - ${i}`;\n\n                  ctx.font = fontsize + "px " + fontface;\n                  const textWidth = ctx.measureText(text).width + 8;\n\n                  ctx.textAlign = "left";\n                  ctx.textBaseline = "top";\n                  ctx.fillStyle = "red";\n                  ctx.fillRect(x, y, textWidth, fontsize + 4);\n                  ctx.fillStyle = "white";\n                  ctx.fillText(text, x + 4, y + 2);\n                },\n              },\n            } as IAnnotation<IShapeData>)\n        )\n        .concat([\n          {\n            id: "additional",\n            comment: "Hello World2",\n            mark: {\n              type: "RECT",\n              width: 0.2,\n              height: 0.3,\n              x: 0.1,\n              y: 0.25,\n            },\n          } as IAnnotation<IShapeData>,\n        ])\n    );\n\n    const [selectedIds, setSelectedIds] = useState<string[]>([]);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    const annotationRef = React.createRef<ReactPictureAnnotation>();\n\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedIds={selectedIds}\n          onSelect={(e) => {\n            setSelectedIds(e);\n            action("onSelect")(e);\n          }}\n          pdf="https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf"\n          ref={annotationRef}\n        />\n        <div style={{ position: "absolute", zIndex: 1000 }}>\n          <button\n            onClick={() => {\n              if (annotationRef.current) {\n                annotationRef.current.downloadFile("sample.pdf");\n              }\n            }}\n          >\n            Download\n          </button>\n        </div>\n      </Wrapper>\n    );\n  })\n  .add("PDF in Base64", () => {\n    const pdfBase64String =\n      "JVBERi0xLjcKCjEgMCBvYmogICUgZW50cnkgcG9pbnQKPDwKICAvVHlwZSAvQ2F0YWxvZwog" +\n      "IC9QYWdlcyAyIDAgUgo+PgplbmRvYmoKCjIgMCBvYmoKPDwKICAvVHlwZSAvUGFnZXMKICAv" +\n      "TWVkaWFCb3ggWyAwIDAgMjAwIDIwMCBdCiAgL0NvdW50IDEKICAvS2lkcyBbIDMgMCBSIF0K" +\n      "Pj4KZW5kb2JqCgozIDAgb2JqCjw8CiAgL1R5cGUgL1BhZ2UKICAvUGFyZW50IDIgMCBSCiAg" +\n      "L1Jlc291cmNlcyA8PAogICAgL0ZvbnQgPDwKICAgICAgL0YxIDQgMCBSIAogICAgPj4KICA+" +\n      "PgogIC9Db250ZW50cyA1IDAgUgo+PgplbmRvYmoKCjQgMCBvYmoKPDwKICAvVHlwZSAvRm9u" +\n      "dAogIC9TdWJ0eXBlIC9UeXBlMQogIC9CYXNlRm9udCAvVGltZXMtUm9tYW4KPj4KZW5kb2Jq" +\n      "Cgo1IDAgb2JqICAlIHBhZ2UgY29udGVudAo8PAogIC9MZW5ndGggNDQKPj4Kc3RyZWFtCkJU" +\n      "CjcwIDUwIFRECi9GMSAxMiBUZgooSGVsbG8sIHdvcmxkISkgVGoKRVQKZW5kc3RyZWFtCmVu" +\n      "ZG9iagoKeHJlZgowIDYKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDEwIDAwMDAwIG4g" +\n      "CjAwMDAwMDAwNzkgMDAwMDAgbiAKMDAwMDAwMDE3MyAwMDAwMCBuIAowMDAwMDAwMzAxIDAw" +\n      "MDAwIG4gCjAwMDAwMDAzODAgMDAwMDAgbiAKdHJhaWxlcgo8PAogIC9TaXplIDYKICAvUm9v" +\n      "dCAxIDAgUgo+PgpzdGFydHhyZWYKNDkyCiUlRU9G";\n\n    const customAnnotations = [\n      {\n        id: "a",\n        comment: "HA HA HA",\n        mark: {\n          type: "RECT",\n          width: 161,\n          height: 165,\n          x: 229,\n          y: 92,\n          strokeColor: "red",\n          backgroundColor: "rgba(255,0,0,0.2)",\n        },\n      },\n      {\n        id: "b",\n        comment: "HA HA HA 2",\n        mark: {\n          type: "RECT",\n          width: 116,\n          height: 116,\n          x: 429,\n          y: 192,\n          strokeColor: "green",\n          backgroundColor: "rgba(0,255,0,0.2)",\n        },\n      },\n    ];\n\n    const [pdf, setPdf] = useState<string>();\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >();\n\n    const [selectedIds, setSelectedIds] = useState<string[]>(["a"]);\n    const annotationRef = React.createRef<ReactPictureAnnotation>();\n\n    const fromUrl = () => {\n      setAnnotationData(defaultAnnotations);\n      setPdf(\n        "https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf"\n      );\n    };\n\n    const fromBase64 = () => {\n      setAnnotationData(customAnnotations);\n      setPdf(`data:application/pdf;base64,${pdfBase64String}`);\n    };\n    return (\n      <Wrapper>\n        <button onClick={fromUrl}>Pdf from URL</button>\n        <button onClick={fromBase64}>Pdf from base64</button>\n        <ReactPictureAnnotation\n          ref={annotationRef}\n          hoverable={false}\n          page={1}\n          width={800}\n          height={600}\n          image={undefined}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedIds={selectedIds}\n          onSelect={(e) => {\n            setSelectedIds(e);\n            action("onSelect")(e);\n          }}\n          pdf={pdf}\n        />\n        <div\n          style={{\n            position: "absolute",\n            bottom: 12,\n            left: "50%",\n            right: "50%",\n          }}\n        />\n      </Wrapper>\n    );\n  });\n\nconst Wrapper = styled.div`\n  height: 800px;\n  width: 100%;\n  position: relative;\n  display: block;\n  overflow: hidden;\n`;\n',locationsMap:{"pdf-in-base64":{startLoc:{col:7,line:959},endLoc:{col:3,line:1054},startBody:{col:24,line:959},endBody:{col:3,line:1054}},download:{startLoc:{col:7,line:863},endLoc:{col:3,line:958},startBody:{col:19,line:863},endBody:{col:3,line:958}},"extract-from-canvas":{startLoc:{col:7,line:801},endLoc:{col:3,line:862},startBody:{col:30,line:801},endBody:{col:3,line:862}},buttons:{startLoc:{col:7,line:700},endLoc:{col:3,line:800},startBody:{col:18,line:700},endBody:{col:3,line:800}},"custom-render-using-scale":{startLoc:{col:7,line:641},endLoc:{col:3,line:699},startBody:{col:36,line:641},endBody:{col:3,line:699}},colors:{startLoc:{col:7,line:564},endLoc:{col:3,line:640},startBody:{col:17,line:564},endBody:{col:3,line:640}},"no-labels":{startLoc:{col:7,line:508},endLoc:{col:3,line:563},startBody:{col:20,line:508},endBody:{col:3,line:563}},"custom-render":{startLoc:{col:7,line:447},endLoc:{col:3,line:507},startBody:{col:24,line:447},endBody:{col:3,line:507}},creatable:{startLoc:{col:7,line:404},endLoc:{col:3,line:446},startBody:{col:20,line:404},endBody:{col:3,line:446}},editable:{startLoc:{col:7,line:362},endLoc:{col:3,line:403},startBody:{col:19,line:362},endBody:{col:3,line:403}},refresh:{startLoc:{col:7,line:294},endLoc:{col:3,line:361},startBody:{col:18,line:294},endBody:{col:3,line:361}},hoverable:{startLoc:{col:7,line:241},endLoc:{col:3,line:293},startBody:{col:20,line:241},endBody:{col:3,line:293}},pdf:{startLoc:{col:7,line:175},endLoc:{col:3,line:240},startBody:{col:14,line:175},endBody:{col:3,line:240}},"force-mouse-up":{startLoc:{col:7,line:133},endLoc:{col:3,line:174},startBody:{col:25,line:133},endBody:{col:3,line:174}},"no-edit":{startLoc:{col:7,line:81},endLoc:{col:3,line:132},startBody:{col:18,line:81},endBody:{col:3,line:132}}}}}).add("No Edit",(function(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState,2),size=_useState2[0],setSize=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(defaultAnnotations),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState3,2),annotationData=_useState4[0],setAnnotationData=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState5,2),selectedIds=_useState6[0],setSelectedIds=_useState6[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(Wrapper,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600",mouseWheelScaleModifier:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_11__.number)("Mouse Wheel zoom scale modifier",.001,{range:!0,min:1e-5,max:.01,step:1e-5})})})})).add("Force mouse up",(function(){var _useState7=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState8=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState7,2),size=_useState8[0],setSize=_useState8[1],containerRef=react__WEBPACK_IMPORTED_MODULE_8___default.a.createRef(),_useState9=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(defaultAnnotations),_useState10=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState9,2),annotationData=_useState10[0],setAnnotationData=_useState10[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(Wrapper,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{ref:containerRef,renderItemPreview:function renderItemPreview(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{})},width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},onSelect:function onSelect(e){var _containerRef$current;null===(_containerRef$current=containerRef.current)||void 0===_containerRef$current||_containerRef$current.forceMouseUp(),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600"})})})).add("PDF",(function(){var _useState11=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState12=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState11,2),size=_useState12[0],setSize=_useState12[1],_useState13=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(defaultAnnotations),_useState14=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState13,2),annotationData=_useState14[0],setAnnotationData=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState16=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState15,2),selectedIds=_useState16[0],setSelectedIds=_useState16[1],_useState17=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(1),_useState18=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState17,2),page=_useState18[0],setPage=_useState18[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]);var _useState19=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(1),_useState20=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState19,2),total=_useState20[0],setTotal=_useState20[1],annotationRef=react__WEBPACK_IMPORTED_MODULE_8___default.a.createRef();return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(Wrapper,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{ref:annotationRef,hoverable:!0,page:page,width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},onPDFLoaded:function onPDFLoaded(_ref){var pages=_ref.pages;setTotal(pages)},pdf:"https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{style:{position:"absolute",bottom:12,left:"50%",right:"50%"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{onClick:function onClick(){return setPage(page-1)},disabled:1===page,children:"Prev"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{onClick:function onClick(){return setPage(page+1)},disabled:page===total,children:"Next"})]})]})})).add("Hoverable",(function(){var _useState21=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState22=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState21,2),size=_useState22[0],setSize=_useState22[1],_useState23=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)([{id:"a",comment:"Hello World",mark:{type:"RECT",width:161,height:165,x:229,y:92}}]),_useState24=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState23,2),annotationData=_useState24[0],setAnnotationData=_useState24[1],_useState25=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState26=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState25,2),selectedIds=_useState26[0],setSelectedIds=_useState26[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},hoverable:!0,image:"https://unsplash.it/1200/600"})})).add("Refresh",(function(){var _useState27=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState28=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState27,2),size=_useState28[0],setSize=_useState28[1],_useState29=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)("https://picsum.photos/id/1/200/300"),_useState30=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState29,2),image=_useState30[0],setImage=_useState30[1],_useState31=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)([{id:"a",comment:"Hello World",mark:{type:"RECT",width:161,height:165,x:229,y:92}}]),_useState32=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState31,2),annotationData=_useState32[0],setAnnotationData=_useState32[1],_useState33=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState34=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState33,2),selectedIds=_useState34[0],setSelectedIds=_useState34[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(Wrapper,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{onClick:function onClick(){return setImage("https://picsum.photos/id/".concat(Math.round(1e3*Math.random()),"/200/300"))},children:"Change Image"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},hoverable:!0,image:image})]})})).add("Editable",(function(){var _useState35=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState36=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState35,2),size=_useState36[0],setSize=_useState36[1],_useState37=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(defaultAnnotations),_useState38=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState37,2),annotationData=_useState38[0],setAnnotationData=_useState38[1],_useState39=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState40=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState39,2),selectedIds=_useState40[0],setSelectedIds=_useState40[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},editable:!0,image:"https://unsplash.it/1200/600"})})).add("Creatable",(function(){var _useState41=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState42=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState41,2),size=_useState42[0],setSize=_useState42[1],_useState43=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(defaultAnnotations),_useState44=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState43,2),annotationData=_useState44[0],setAnnotationData=_useState44[1],_useState45=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState46=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState45,2),selectedIds=_useState46[0],setSelectedIds=_useState46[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},creatable:!0,editable:!1,image:"https://unsplash.it/1200/600"})})).add("Custom Render",(function(){var _useState47=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState48=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState47,2),size=_useState48[0],setSize=_useState48[1],_useState49=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(defaultAnnotations.map((function(el){return Object.assign({},el,{mark:Object.assign({},el.mark,{draw:function draw(canvas,x,y,width,height){canvas.beginPath(),canvas.fillStyle="green",canvas.arc(x+width/2,y+height/2,Math.min(height,width)/2,0,2*Math.PI),canvas.stroke(),canvas.fill()}})})}))),_useState50=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState49,2),annotationData=_useState50[0],setAnnotationData=_useState50[1],_useState51=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState52=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState51,2),selectedIds=_useState52[0],setSelectedIds=_useState52[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600"})})).add("No Labels",(function(){var _useState53=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState54=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState53,2),size=_useState54[0],setSize=_useState54[1],_useState55=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)([{id:"a",comment:"HA HA HA",mark:{type:"RECT",width:161,height:165,x:229,y:92}}]),_useState56=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState55,2),annotationData=_useState56[0],setAnnotationData=_useState56[1],_useState57=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState58=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState57,2),selectedIds=_useState58[0],setSelectedIds=_useState58[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(Wrapper,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},drawLabel:!1,image:"https://unsplash.it/1200/600"})})})).add("Colors",(function(){var _useState59=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState60=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState59,2),size=_useState60[0],setSize=_useState60[1],annotations=[{id:"a",comment:"HA HA HA",mark:{type:"RECT",width:161,height:165,x:229,y:92,strokeColor:"red",backgroundColor:"rgba(255,0,0,0.2)"}},{id:"b",comment:"HA HA HA 2",mark:{type:"RECT",width:116,height:116,x:429,y:192,strokeColor:"green",backgroundColor:"rgba(0,255,0,0.2)"}}],_useState61=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(annotations),_useState62=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState61,2),annotationData=_useState62[0],setAnnotationData=_useState62[1],_useState63=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState64=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState63,2),selectedIds=_useState64[0],setSelectedIds=_useState64[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(Wrapper,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{onClick:function changeColor(){annotations[0].mark.strokeColor="blue",setAnnotationData(annotations)},children:"Change Color"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600"})]})})).add("Custom Render using scale",(function(){var AnnotationComponent=function AnnotationComponent(){var _useState65=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState66=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState65,2),size=_useState66[0],setSize=_useState66[1],_useState67=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(defaultAnnotations.map((function(el){return Object.assign({},el,{mark:Object.assign({},el.mark,{draw:function draw(canvas,x,y,_,_2,scale){var fontSize=16*(scale||0);canvas.font="".concat(fontSize,"px verdana"),canvas.fillStyle="black",canvas.fillText("Scaled text",x,y)}})})}))),_useState68=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState67,2),annotationData=_useState68[0],setAnnotationData=_useState68[1],_useState69=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState70=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState69,2),selectedIds=_useState70[0],setSelectedIds=_useState70[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600"})};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(AnnotationComponent,{})})).add("Buttons",(function(){var _useState71=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState72=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState71,2),size=_useState72[0],setSize=_useState72[1],_useState73=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)([{id:"a",comment:"HA HA HA",mark:{type:"RECT",width:161,height:165,x:229,y:92}},{id:"b",comment:"HA HA HA 2",mark:{type:"RECT",width:116,height:116,x:429,y:192}}]),_useState74=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState73,2),annotationData=_useState74[0],setAnnotationData=_useState74[1],_useState75=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState76=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState75,2),selectedIds=_useState76[0],setSelectedIds=_useState76[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]);var annotationRef=react__WEBPACK_IMPORTED_MODULE_8___default.a.createRef();return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(Wrapper,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){setAnnotationData(data),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onChange")(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600",ref:annotationRef}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{style:{position:"absolute",zIndex:1e3},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{onClick:function onClick(){annotationRef.current&&annotationRef.current.zoomIn()},children:"Zoom In"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{onClick:function onClick(){annotationRef.current&&annotationRef.current.zoomOut()},children:"Zoom Out"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{onClick:function onClick(){annotationRef.current&&annotationRef.current.reset()},children:"Reset"})]})]})})).add("Extract From Canvas",(function(){var _useState77=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState78=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState77,2),size=_useState78[0],setSize=_useState78[1],_useState79=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)([defaultAnnotations[0]]),_useState80=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState79,2),annotationData=_useState80[0],setAnnotationData=_useState80[1],_useState81=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(void 0),_useState82=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState81,2),src=_useState82[0],setSrc=_useState82[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]);var annotationRef=react__WEBPACK_IMPORTED_MODULE_8___default.a.createRef();return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(Wrapper,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},creatable:!0,onSelect:function onSelect(e){Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600",ref:annotationRef}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)("div",{style:{position:"absolute",zIndex:1e3},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{onClick:function onClick(){if(annotationRef.current){var _annotationData$mark=annotationData[annotationData.length-1].mark,x=_annotationData$mark.x,y=_annotationData$mark.y,width=_annotationData$mark.width,height=_annotationData$mark.height;setSrc(annotationRef.current.extractFromCanvas(x,y,width,height))}},children:"Get Image"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("img",{src:src,style:{width:100,height:"auto"}})]})]})})).add("Download",(function(){var _useState83=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),_useState84=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState83,2),size=_useState84[0],setSize=_useState84[1],_useState85=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(defaultAnnotations.map((function(el,i){return Object.assign({},el,{mark:Object.assign({},el.mark,{draw:function draw(ctx,x,y,_,_2,scale){var fontsize=28*scale,text="Hello! - ".concat(i);ctx.font=fontsize+"px verdana";var textWidth=ctx.measureText(text).width+8;ctx.textAlign="left",ctx.textBaseline="top",ctx.fillStyle="red",ctx.fillRect(x,y,textWidth,fontsize+4),ctx.fillStyle="white",ctx.fillText(text,x+4,y+2)}})})})).concat([{id:"additional",comment:"Hello World2",mark:{type:"RECT",width:.2,height:.3,x:.1,y:.25}}])),_useState86=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState85,2),annotationData=_useState86[0],setAnnotationData=_useState86[1],_useState87=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)([]),_useState88=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState87,2),selectedIds=_useState88[0],setSelectedIds=_useState88[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};Object(react__WEBPACK_IMPORTED_MODULE_8__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]);var annotationRef=react__WEBPACK_IMPORTED_MODULE_8___default.a.createRef();return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(Wrapper,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},pdf:"https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf",ref:annotationRef}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{style:{position:"absolute",zIndex:1e3},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{onClick:function onClick(){annotationRef.current&&annotationRef.current.downloadFile("sample.pdf")},children:"Download"})})]})})).add("PDF in Base64",(function(){var customAnnotations=[{id:"a",comment:"HA HA HA",mark:{type:"RECT",width:161,height:165,x:229,y:92,strokeColor:"red",backgroundColor:"rgba(255,0,0,0.2)"}},{id:"b",comment:"HA HA HA 2",mark:{type:"RECT",width:116,height:116,x:429,y:192,strokeColor:"green",backgroundColor:"rgba(0,255,0,0.2)"}}],_useState89=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(),_useState90=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState89,2),pdf=_useState90[0],setPdf=_useState90[1],_useState91=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(),_useState92=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState91,2),annotationData=_useState92[0],setAnnotationData=_useState92[1],_useState93=Object(react__WEBPACK_IMPORTED_MODULE_8__.useState)(["a"]),_useState94=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_5___default()(_useState93,2),selectedIds=_useState94[0],setSelectedIds=_useState94[1],annotationRef=react__WEBPACK_IMPORTED_MODULE_8___default.a.createRef();return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsxs)(Wrapper,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{onClick:function fromUrl(){setAnnotationData(defaultAnnotations),setPdf("https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf")},children:"Pdf from URL"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("button",{onClick:function fromBase64(){setAnnotationData(customAnnotations),setPdf("data:application/pdf;base64,".concat("JVBERi0xLjcKCjEgMCBvYmogICUgZW50cnkgcG9pbnQKPDwKICAvVHlwZSAvQ2F0YWxvZwogIC9QYWdlcyAyIDAgUgo+PgplbmRvYmoKCjIgMCBvYmoKPDwKICAvVHlwZSAvUGFnZXMKICAvTWVkaWFCb3ggWyAwIDAgMjAwIDIwMCBdCiAgL0NvdW50IDEKICAvS2lkcyBbIDMgMCBSIF0KPj4KZW5kb2JqCgozIDAgb2JqCjw8CiAgL1R5cGUgL1BhZ2UKICAvUGFyZW50IDIgMCBSCiAgL1Jlc291cmNlcyA8PAogICAgL0ZvbnQgPDwKICAgICAgL0YxIDQgMCBSIAogICAgPj4KICA+PgogIC9Db250ZW50cyA1IDAgUgo+PgplbmRvYmoKCjQgMCBvYmoKPDwKICAvVHlwZSAvRm9udAogIC9TdWJ0eXBlIC9UeXBlMQogIC9CYXNlRm9udCAvVGltZXMtUm9tYW4KPj4KZW5kb2JqCgo1IDAgb2JqICAlIHBhZ2UgY29udGVudAo8PAogIC9MZW5ndGggNDQKPj4Kc3RyZWFtCkJUCjcwIDUwIFRECi9GMSAxMiBUZgooSGVsbG8sIHdvcmxkISkgVGoKRVQKZW5kc3RyZWFtCmVuZG9iagoKeHJlZgowIDYKMDAwMDAwMDAwMCA2NTUzNSBmIAowMDAwMDAwMDEwIDAwMDAwIG4gCjAwMDAwMDAwNzkgMDAwMDAgbiAKMDAwMDAwMDE3MyAwMDAwMCBuIAowMDAwMDAwMzAxIDAwMDAwIG4gCjAwMDAwMDAzODAgMDAwMDAgbiAKdHJhaWxlcgo8PAogIC9TaXplIDYKICAvUm9vdCAxIDAgUgo+PgpzdGFydHhyZWYKNDkyCiUlRU9G"))},children:"Pdf from base64"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)(_src__WEBPACK_IMPORTED_MODULE_12__.ReactPictureAnnotation,{ref:annotationRef,hoverable:!1,page:1,width:800,height:600,image:void 0,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedIds:selectedIds,onSelect:function onSelect(e){setSelectedIds(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_9__.action)("onSelect")(e)},pdf:pdf}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_6__.jsx)("div",{style:{position:"absolute",bottom:12,left:"50%",right:"50%"}})]})}));var Wrapper=styled_components__WEBPACK_IMPORTED_MODULE_10__.a.div(_templateObject())}.call(this,__webpack_require__(298)(module))},196:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RectShape}));__webpack_require__(26);var _babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(94),_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1__),shapeStyle_padding=5,shapeStyle_fontSize=12,shapeStyle_fontColor="#212529",shapeStyle_fontBackground="#f8f9fa",shapeStyle_fontFamily="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', Helvetica, Arial, sans-serif",shapeStyle_shapeBackground="hsla(210, 16%, 93%, 0.2)",shapeStyle_shapeStrokeStyle="ff0000",shapeStyle_shapeShadowStyle="hsla(210, 9%, 31%, 0.35)",RectShape=function RectShape(_data,onChange,getImageSize){var _this=this;_babel_runtime_helpers_classCallCheck__WEBPACK_IMPORTED_MODULE_1___default()(this,RectShape),this.annotationData=void 0,this.onChangeCallBack=void 0,this.getImageSize=void 0,this.dragStartOffset=void 0,this.onDragStart=function(positionX,positionY){var _this$annotationData$=_this.annotationData.mark,x=_this$annotationData$.x,y=_this$annotationData$.y,width=_this$annotationData$.width,height=_this$annotationData$.height;if(width<1&&height<1){var imageSize=_this.getImageSize();_this.dragStartOffset={offsetX:positionX/imageSize.width-x,offsetY:positionY/imageSize.height-y}}else _this.dragStartOffset={offsetX:positionX-x,offsetY:positionY-y}},this.onDrag=function(positionX,positionY){if(_this.dragStartOffset){var _this$annotationData$2=_this.annotationData.mark,_width=_this$annotationData$2.width,_height=_this$annotationData$2.height;if(_width<1&&_height<1){var imageSize=_this.getImageSize();_this.annotationData.mark.x=positionX/imageSize.width-_this.dragStartOffset.offsetX,_this.annotationData.mark.y=positionY/imageSize.height-_this.dragStartOffset.offsetY}else _this.annotationData.mark.x=positionX-_this.dragStartOffset.offsetX,_this.annotationData.mark.y=positionY-_this.dragStartOffset.offsetY;_this.onChangeCallBack()}},this.checkBoundary=function(positionX,positionY,calculateTruePosition){var padding=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,_calculateTruePositio=calculateTruePosition(_this.annotationData.mark),x=_calculateTruePositio.x,y=_calculateTruePositio.y,width=_calculateTruePositio.width,height=_calculateTruePositio.height;return(positionX>x-padding&&positionX<x+width+padding||positionX<x+padding&&positionX>x+width-padding)&&(positionY>y-padding&&positionY<y+height+padding||positionY<y+padding&&positionY>y+height-padding)},this.paint=function(canvas2D,calculateTruePosition,selected,drawLabel,scale,isDownload){var mark=_this.annotationData.mark,_calculateTruePositio2=calculateTruePosition(mark),x=_calculateTruePositio2.x,y=_calculateTruePositio2.y,width=_calculateTruePositio2.width,height=_calculateTruePositio2.height;canvas2D.save();var shouldDraw=!0;if(_this.annotationData.mark.draw&&(shouldDraw=_this.annotationData.mark.draw(canvas2D,x,y,width,height,scale,isDownload)||!1),shouldDraw){if(canvas2D.shadowBlur=10,canvas2D.shadowColor=mark.shadowColor||shapeStyle_shapeShadowStyle,canvas2D.strokeStyle=mark.strokeColor||shapeStyle_shapeStrokeStyle,canvas2D.lineWidth=mark.strokeWidth||4,mark.backgroundColor&&(canvas2D.fillStyle=mark.backgroundColor,canvas2D.fillRect(mark.highlight?x-canvas2D.lineWidth/2-5:x-canvas2D.lineWidth/2,mark.highlight?y-canvas2D.lineWidth/2-5:y-canvas2D.lineWidth/2,mark.highlight?width+canvas2D.lineWidth+10:width+canvas2D.lineWidth,mark.highlight?height+canvas2D.lineWidth+10:height+canvas2D.lineWidth)),0!==mark.strokeWidth&&canvas2D.strokeRect(mark.highlight?x-canvas2D.lineWidth/2-5:x-canvas2D.lineWidth/2,mark.highlight?y-canvas2D.lineWidth/2-5:y-canvas2D.lineWidth/2,mark.highlight?width+canvas2D.lineWidth+10:width+canvas2D.lineWidth,mark.highlight?height+canvas2D.lineWidth+10:height+canvas2D.lineWidth),selected)canvas2D.fillStyle=mark.backgroundColor||shapeStyle_shapeBackground,canvas2D.fillRect(mark.highlight?x-canvas2D.lineWidth/2-5:x-canvas2D.lineWidth/2,mark.highlight?y-canvas2D.lineWidth/2-5:y-canvas2D.lineWidth/2,mark.highlight?width+canvas2D.lineWidth+10:width+canvas2D.lineWidth,mark.highlight?height+canvas2D.lineWidth+10:height+canvas2D.lineWidth);else{var _comment=_this.annotationData.comment;if(_comment&&drawLabel){canvas2D.font="".concat(shapeStyle_fontSize,"px ").concat(shapeStyle_fontFamily);var metrics=canvas2D.measureText(_comment);canvas2D.fillStyle=shapeStyle_fontBackground,canvas2D.fillRect(x,y,metrics.width+2*shapeStyle_padding,shapeStyle_fontSize+2*shapeStyle_padding),canvas2D.textBaseline="top",canvas2D.fillStyle=shapeStyle_fontColor,canvas2D.fillText(_comment,x+shapeStyle_padding,y+shapeStyle_padding)}}}return canvas2D.restore(),{x:x,y:y,width:width,height:height}},this.adjustMark=function(_ref){var _ref$x=_ref.x,x=void 0===_ref$x?_this.annotationData.mark.x:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?_this.annotationData.mark.y:_ref$y,_ref$width=_ref.width,width=void 0===_ref$width?_this.annotationData.mark.width:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?_this.annotationData.mark.height:_ref$height;width>0&&height>0&&(_this.annotationData.mark.x=x,_this.annotationData.mark.y=y,_this.annotationData.mark.width=width,_this.annotationData.mark.height=height,_this.onChangeCallBack())},this.getAnnotationData=function(){return _this.annotationData},this.setComment=function(comment){_this.annotationData.comment=comment},this.equal=function(data){return data.id===_this.annotationData.id&&data.comment===_this.annotationData.comment&&data.mark.x===_this.annotationData.mark.x&&data.mark.y===_this.annotationData.mark.y&&data.mark.width===_this.annotationData.mark.width&&data.mark.height===_this.annotationData.mark.height},this.annotationData=_data,this.onChangeCallBack=onChange,this.getImageSize=getImageSize}},200:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(27),__webpack_require__(22),__webpack_require__(36);__webpack_exports__.a=function(){return Math.random().toString(36).substr(2,9)}},325:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ReactPictureAnnotation_ReactPictureAnnotation}));__webpack_require__(26),__webpack_require__(72),__webpack_require__(91),__webpack_require__(478),__webpack_require__(61),__webpack_require__(78),__webpack_require__(28),__webpack_require__(30),__webpack_require__(234),__webpack_require__(442),__webpack_require__(10),__webpack_require__(22),__webpack_require__(160),__webpack_require__(40),__webpack_require__(85),__webpack_require__(29),__webpack_require__(75),__webpack_require__(220),__webpack_require__(62),__webpack_require__(34),__webpack_require__(185),__webpack_require__(269);var taggedTemplateLiteral=__webpack_require__(65),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),defineProperty=__webpack_require__(148),defineProperty_default=__webpack_require__.n(defineProperty),regenerator=__webpack_require__(11),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(104),__webpack_require__(32)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),classCallCheck=__webpack_require__(94),classCallCheck_default=__webpack_require__.n(classCallCheck),createClass=__webpack_require__(777),createClass_default=__webpack_require__.n(createClass),assertThisInitialized=__webpack_require__(337),assertThisInitialized_default=__webpack_require__.n(assertThisInitialized),inherits=__webpack_require__(778),inherits_default=__webpack_require__.n(inherits),possibleConstructorReturn=__webpack_require__(779),possibleConstructorReturn_default=__webpack_require__.n(possibleConstructorReturn),getPrototypeOf=__webpack_require__(501),getPrototypeOf_default=__webpack_require__.n(getPrototypeOf),jsx_runtime=__webpack_require__(6),react=__webpack_require__(0),react_default=__webpack_require__.n(react),build_pdf=__webpack_require__(343),es=__webpack_require__(344),parse_color=__webpack_require__(795),parse_color_default=__webpack_require__.n(parse_color),lodash=__webpack_require__(796),Shape=__webpack_require__(196);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Transformer_Transformer=function Transformer(_shape,editable,getImageSize,_calculateTruePosition){var _this=this;classCallCheck_default()(this,Transformer),this.id=void 0,this.shape=void 0,this.editable=void 0,this.currentNodeCenterIndex=void 0,this.calculateTruePosition=void 0,this.getImageSize=void 0,this.checkBoundary=function(positionX,positionY){return _this.getCenterIndexByCursor(positionX,positionY)>=0},this.startTransformation=function(positionX,positionY){var currentCenterIndex=_this.getCenterIndexByCursor(positionX,positionY);_this.currentNodeCenterIndex=currentCenterIndex},this.onTransformation=function(positionX,positionY){_this.getAllCentersTable()[_this.currentNodeCenterIndex].adjust(positionX,positionY)},this.paint=function(canvas2D,calculateTruePosition){var allCentersTable=_this.getAllCentersTable();if(canvas2D.save(),canvas2D.fillStyle="#5c7cfa",_this.editable){var _step,_iterator=_createForOfIteratorHelper(allCentersTable);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value,_calculateTruePositio=calculateTruePosition({x:item.x-5,y:item.y-5,width:10,height:10}),x=_calculateTruePositio.x,y=_calculateTruePositio.y,width=_calculateTruePositio.width,height=_calculateTruePositio.height;canvas2D.fillRect(x,y,width,height)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}canvas2D.restore()},this.getCenterIndexByCursor=function(positionX,positionY){return _this.getAllCentersTable().findIndex((function(item){return _this.checkEachRectBoundary(item.x,item.y,positionX,positionY)}))},this.checkEachRectBoundary=function(rectCenterX,rectCenterY,positionX,positionY){return Math.abs(positionX-rectCenterX)<=5&&Math.abs(positionY-rectCenterY)<=5},this.getAllCentersTable=function(){var shape=_this.shape,isPercentage=shape.getAnnotationData().mark.width<1&&shape.getAnnotationData().mark.height<1,_this$calculateTruePo=_this.calculateTruePosition(shape.getAnnotationData().mark),scaledX=_this$calculateTruePo.x,scaledY=_this$calculateTruePo.y,scaledWidth=_this$calculateTruePo.width,scaledHeight=_this$calculateTruePo.height,_shape$getAnnotationD=shape.getAnnotationData().mark,x=_shape$getAnnotationD.x,y=_shape$getAnnotationD.y,width=_shape$getAnnotationD.width,height=_shape$getAnnotationD.height,_this$getImageSize=_this.getImageSize(),imageWidth=_this$getImageSize.width,imageHeight=_this$getImageSize.height;return[{x:scaledX,y:scaledY,adjust:function adjust(positionX,positionY){isPercentage&&(positionX/=imageWidth,positionY/=imageHeight),shape.adjustMark({x:positionX,y:positionY,width:width+x-positionX,height:height+y-positionY})}},{x:scaledX+scaledWidth/2,y:scaledY,adjust:function adjust(_,positionY){isPercentage&&(positionY/=imageHeight),shape.adjustMark({y:positionY,height:height+y-positionY})}},{x:scaledX+scaledWidth,y:scaledY,adjust:function adjust(positionX,positionY){isPercentage&&(positionX/=imageWidth,positionY/=imageHeight),shape.adjustMark({x:x,y:positionY,width:positionX-x,height:y+height-positionY})}},{x:scaledX,y:scaledY+scaledHeight/2,adjust:function adjust(positionX){isPercentage&&(positionX/=imageWidth),shape.adjustMark({x:positionX,width:width+x-positionX})}},{x:scaledX+scaledWidth,y:scaledY+scaledHeight/2,adjust:function adjust(positionX){isPercentage&&(positionX/=imageWidth),shape.adjustMark({width:positionX-x})}},{x:scaledX,y:scaledY+scaledHeight,adjust:function adjust(positionX,positionY){isPercentage&&(positionX/=imageWidth,positionY/=imageHeight),shape.adjustMark({x:positionX,width:width+x-positionX,height:positionY-y})}},{x:scaledX+scaledWidth/2,y:scaledY+scaledHeight,adjust:function adjust(_,positionY){isPercentage&&(positionY/=imageHeight),shape.adjustMark({height:positionY-y})}},{x:scaledX+scaledWidth,y:scaledY+scaledHeight,adjust:function adjust(positionX,positionY){isPercentage&&(positionX/=imageWidth,positionY/=imageHeight),shape.adjustMark({width:positionX-x,height:positionY-y})}}]},this.shape=_shape,this.editable=editable,this.id=_shape.getAnnotationData().id,this.getImageSize=getImageSize,this.calculateTruePosition=_calculateTruePosition},randomId=__webpack_require__(200),CreatingAnnotationState_CreatingAnnotationState=function CreatingAnnotationState(context){var _this=this;classCallCheck_default()(this,CreatingAnnotationState),this.context=void 0,this.onMouseDown=function(){},this.onMouseMove=function(positionX,positionY){var _this$context=_this.context,shapes=_this$context.shapes,onShapeChange=_this$context.onShapeChange;if(shapes.length>0){var currentShape=shapes.find((function(el){return el.getAnnotationData().id===_this.context.pendingShapeId}));if(currentShape){var _currentShape$getAnno2=currentShape.getAnnotationData().mark,x=_currentShape$getAnno2.x,y=_currentShape$getAnno2.y;currentShape.adjustMark({width:positionX-x,height:positionY-y})}}onShapeChange()},this.onMouseUp=function(){var _this$context2=_this.context,shapes=_this$context2.shapes,onShapeChange=_this$context2.onShapeChange,setAnnotationState=_this$context2.setAnnotationState,onDelete=_this$context2.onDelete,getOriginalImageSize=_this$context2.getOriginalImageSize,_this$context2$props=_this$context2.props,onAnnotationCreate=_this$context2$props.onAnnotationCreate,usePercentage=_this$context2$props.usePercentage,data=shapes.find((function(el){return el.getAnnotationData().id===_this.context.pendingShapeId}));if(data)if(data&&0!==data.getAnnotationData().mark.width&&0!==data.getAnnotationData().mark.height){var _data$getAnnotationDa=data.getAnnotationData().mark,x=_data$getAnnotationDa.x,y=_data$getAnnotationDa.y,width=_data$getAnnotationDa.width,height=_data$getAnnotationDa.height;if(usePercentage){var origSize=getOriginalImageSize();x/=origSize.width,y/=origSize.height,width/=origSize.width,height/=origSize.height}data.getAnnotationData().mark.x=x+Math.min(0,width),data.getAnnotationData().mark.y=y+Math.min(0,height),data.getAnnotationData().mark.width=Math.abs(width),data.getAnnotationData().mark.height=Math.abs(height),_this.context.selectedIds=[data.getAnnotationData().id],onAnnotationCreate&&onAnnotationCreate(data.getAnnotationData())}else _this.context.pendingShapeId&&onDelete(_this.context.pendingShapeId),_this.context.selectedIds=[];else _this.context.pendingShapeId=null,_this.context.selectedIds=[];setAnnotationState(new DefaultAnnotationState_DefaultAnnotationState(_this.context)),onShapeChange()},this.onMouseLeave=function(){return _this.onMouseUp()},this.context=context},DraggingAnnotationState_DraggingAnnotationState=function DraggingAnnotationState(context){var _this=this;classCallCheck_default()(this,DraggingAnnotationState),this.hasMoved=void 0,this.context=void 0,this.onMouseDown=function(){},this.onMouseMove=function(positionX,positionY){var _this$context=_this.context,shapes=_this$context.shapes,selectedIds=_this$context.selectedIds,currentShape=shapes.find((function(el){return el.getAnnotationData().id===selectedIds[0]}));_this.hasMoved=!0,currentShape.onDrag(positionX,positionY)},this.onMouseUp=function(){var _this$context2=_this.context,shapes=_this$context2.shapes,setAnnotationState=_this$context2.setAnnotationState,selectedIds=_this$context2.selectedIds,onAnnotationUpdate=_this$context2.props.onAnnotationUpdate;(setAnnotationState(new DefaultAnnotationState_DefaultAnnotationState(_this.context)),onAnnotationUpdate&&_this.hasMoved)&&onAnnotationUpdate(shapes.find((function(el){return el.getAnnotationData().id===selectedIds[0]})).getAnnotationData())},this.onMouseLeave=function(){return _this.onMouseUp()},this.context=context,this.hasMoved=!1},TransfromationState_TransformationState=function TransformationState(context){var _this=this;classCallCheck_default()(this,TransformationState),this.context=void 0,this.onMouseDown=function(){},this.onMouseMove=function(positionX,positionY){var currentTransformer=_this.context.currentTransformer;currentTransformer&&currentTransformer.onTransformation(positionX,positionY)},this.onMouseUp=function(){var _this$context=_this.context,shapes=_this$context.shapes,setAnnotationState=_this$context.setAnnotationState,selectedIds=_this$context.selectedIds,onAnnotationUpdate=_this$context.props.onAnnotationUpdate;if(setAnnotationState(new DefaultAnnotationState_DefaultAnnotationState(_this.context)),onAnnotationUpdate){var currentShape=shapes.find((function(el){return el.getAnnotationData().id===selectedIds[0]}));currentShape&&onAnnotationUpdate(currentShape.getAnnotationData())}},this.onMouseLeave=function(){return _this.onMouseUp()},this.context=context},DefaultAnnotationState_DefaultAnnotationState=function DefaultAnnotationState(context){var _this=this;classCallCheck_default()(this,DefaultAnnotationState),this.context=void 0,this.hasMoved=!1,this.hasClicked=!1,this.hasSelected=!1,this.onMouseMove=function(positionX,positionY){_this.hasClicked&&(_this.hasMoved=!0),_this.context.props.hoverable&&_this.checkSelectedId(positionX,positionY),_this.checkCursor(positionX,positionY)},this.onMouseUp=function(){_this.hasMoved||_this.hasSelected||!_this.hasClicked||(_this.context.selectedIds=[]),_this.context.onShapeChange(),_this.hasMoved=!1,_this.hasClicked=!1,_this.hasSelected=!1},this.onMouseLeave=function(){_this.hasClicked=!1,_this.hasMoved=!1,_this.hasSelected=!1},this.onMouseDown=function(event,positionX,positionY){_this.hasClicked=!0;var _this$context=_this.context,shapes=_this$context.shapes,currentTransformer=_this$context.currentTransformer,onShapeChange=_this$context.onShapeChange,setState=_this$context.setAnnotationState,_this$context$props=_this$context.props,editable=_this$context$props.editable,creatable=_this$context$props.creatable;if(currentTransformer&&currentTransformer.checkBoundary(positionX,positionY))return currentTransformer.startTransformation(positionX,positionY),void setState(new TransfromationState_TransformationState(_this.context));for(var ids=[],i=shapes.length-1;i>=0;i--)shapes[i].checkBoundary(positionX,positionY,_this.context.calculateShapePositionNoOffset)&&!shapes[i].getAnnotationData().disableClick&&(_this.context.selectedIds.includes(shapes[i].getAnnotationData().id)||(_this.hasSelected=!0),ids.push(shapes[i].getAnnotationData().id),editable&&(_this.context.currentTransformer=new Transformer_Transformer(shapes[i],editable,_this.context.getOriginalImageSize,_this.context.calculateShapePositionNoOffset),shapes[i].onDragStart(positionX,positionY),setState(new DraggingAnnotationState_DraggingAnnotationState(_this.context))));if(ids.length>0)return _this.context.selectedIds=ids,void onShapeChange();if(!event.shiftKey&&!_this.context.state.isSpacePressed&&(editable||creatable)){var newShapeId=Object(randomId.a)();_this.context.shapes.push(new Shape.a({id:newShapeId,mark:{x:positionX,y:positionY,width:0,height:0,type:"RECT"},page:_this.context.props.page||1},onShapeChange,_this.context.getOriginalImageSize)),_this.context.pendingShapeId=newShapeId,setState(new CreatingAnnotationState_CreatingAnnotationState(_this.context))}},this.checkSelectedId=function(positionX,positionY){for(var _this$context2=_this.context,shapes=_this$context2.shapes,onShapeChange=_this$context2.onShapeChange,ids=[],i=shapes.length-1;i>=0;i--)if(shapes[i].checkBoundary(positionX,positionY,_this.context.calculateShapePositionNoOffset,(shapes[i].getAnnotationData().mark.strokeWidth||4)+10)){var _shapes$i$getAnnotati=shapes[i].getAnnotationData(),id=_shapes$i$getAnnotati.id;_shapes$i$getAnnotati.disableClick||(ids.push(id),onShapeChange())}ids.length>0?_this.context.selectedIds=ids:_this.context.selectedIds&&(_this.context.selectedIds=[],onShapeChange())},this.checkCursor=function(positionX,positionY){for(var _this$context3=_this.context,shapes=_this$context3.shapes,_this$context3$props=_this$context3.props,creatable=_this$context3$props.creatable,editable=_this$context3$props.editable,i=shapes.length-1;i>=0;i--){if(shapes[i].checkBoundary(positionX,positionY,_this.context.calculateShapePositionNoOffset,(shapes[i].getAnnotationData().mark.strokeWidth||4)+10))return void(shapes[i].getAnnotationData().disableClick||_this.context.canvasRef.current&&(_this.context.canvasRef.current.style.cursor="pointer"))}creatable||editable?_this.context.canvasRef.current&&(_this.context.canvasRef.current.style.cursor="crosshair"):_this.context.canvasRef.current&&(_this.context.canvasRef.current.style.cursor="move")},this.context=context,this.hasMoved=!1,this.hasSelected=!1,this.hasClicked=!1},DefaultInputSection=__webpack_require__(329),styled_components_browser_esm=__webpack_require__(46),slicedToArray=__webpack_require__(8),slicedToArray_default=__webpack_require__.n(slicedToArray),react_archer=__webpack_require__(345);function _templateObject4(){var data=taggedTemplateLiteral_default()(["\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n  position: absolute !important;\n"]);return _templateObject4=function _templateObject4(){return data},data}function _templateObject3(){var data=taggedTemplateLiteral_default()(["\n  width: 1px;\n  height: 1px;\n"]);return _templateObject3=function _templateObject3(){return data},data}function _templateObject2(){var data=taggedTemplateLiteral_default()(["\n  position: absolute;\n"]);return _templateObject2=function _templateObject2(){return data},data}function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  position: absolute;\n  pointer-events: auto;\n  cursor: grab;\n"]);return _templateObject=function _templateObject(){return data},data}var SourcePoint=styled_components_browser_esm.a.div.attrs((function(props){return{style:{left:"".concat(props.position.x,"px"),top:"".concat(props.position.y,"px"),transform:"translate(".concat(props.position.offsetX,"px, ").concat(props.position.offsetY,"px)")}}}))(_templateObject()),TargetPoint=styled_components_browser_esm.a.div.attrs((function(props){return{style:{left:"".concat(props.position.x,"px"),top:"".concat(props.position.y,"px")}}}))(_templateObject2()),Dummy=styled_components_browser_esm.a.div(_templateObject3()),StyledArcherContainer=Object(styled_components_browser_esm.a)(react_archer.ArcherContainer)(_templateObject4());function ArrowBox(props){var _position$x,_position$y,annotation=props.annotation,position=props.position,renderedArrowWithBox=props.renderedArrowWithBox,updateBoxPosition=props.updateBoxPosition,arrowPreviewOptions=props.arrowPreviewOptions,onArrowBoxMove=props.onArrowBoxMove,archerContainerRef=react_default.a.createRef(),x=null!==(_position$x=null==position?void 0:position.x)&&void 0!==_position$x?_position$x:0,y=null!==(_position$y=null==position?void 0:position.y)&&void 0!==_position$y?_position$y:0,defaultBaseOffset_x=-40,defaultBaseOffset_y=-40,_useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),dragged=_useState2[0],setDragged=_useState2[1],_useState3=Object(react.useState)(0),_useState4=slicedToArray_default()(_useState3,2),baseOffsetX=_useState4[0],setBaseOffsetX=_useState4[1],_useState5=Object(react.useState)(0),_useState6=slicedToArray_default()(_useState5,2),baseOffsetY=_useState6[0],setBaseOffsetY=_useState6[1],_useState7=Object(react.useState)(0),_useState8=slicedToArray_default()(_useState7,2),offsetX=_useState8[0],setOffsetX=_useState8[1],_useState9=Object(react.useState)(0),_useState10=slicedToArray_default()(_useState9,2),offsetY=_useState10[0],setOffsetY=_useState10[1],_useState11=Object(react.useState)({x:0,y:0}),_useState12=slicedToArray_default()(_useState11,2),dragStartPoint=_useState12[0],setDragStartPoint=_useState12[1];Object(react.useEffect)((function(){!function init(){var _arrowPreviewOptions$,_arrowPreviewOptions$2,_arrowPreviewOptions$3,_arrowPreviewOptions$4,_arrowPreviewOptions$5,_arrowPreviewOptions$6,_ref,_ref2,_position$offsetX,_position$offsetY,baseX=null==arrowPreviewOptions||null===(_arrowPreviewOptions$=arrowPreviewOptions.baseOffset)||void 0===_arrowPreviewOptions$?void 0:_arrowPreviewOptions$.x,baseY=null==arrowPreviewOptions||null===(_arrowPreviewOptions$2=arrowPreviewOptions.baseOffset)||void 0===_arrowPreviewOptions$2?void 0:_arrowPreviewOptions$2.y,customX=null==arrowPreviewOptions||null===(_arrowPreviewOptions$3=arrowPreviewOptions.customOffset)||void 0===_arrowPreviewOptions$3||null===(_arrowPreviewOptions$4=_arrowPreviewOptions$3[annotation.id])||void 0===_arrowPreviewOptions$4?void 0:_arrowPreviewOptions$4.x,customY=null==arrowPreviewOptions||null===(_arrowPreviewOptions$5=arrowPreviewOptions.customOffset)||void 0===_arrowPreviewOptions$5||null===(_arrowPreviewOptions$6=_arrowPreviewOptions$5[annotation.id])||void 0===_arrowPreviewOptions$6?void 0:_arrowPreviewOptions$6.y,finalBaseOffsetX=null!==(_ref=null!=customX?customX:baseX)&&void 0!==_ref?_ref:defaultBaseOffset_x,finalBaseOffsetY=null!==(_ref2=null!=customY?customY:baseY)&&void 0!==_ref2?_ref2:defaultBaseOffset_y;setBaseOffsetX(finalBaseOffsetX),setBaseOffsetY(finalBaseOffsetY),setOffsetX(null!==(_position$offsetX=null==position?void 0:position.offsetX)&&void 0!==_position$offsetX?_position$offsetX:0),setOffsetY(null!==(_position$offsetY=null==position?void 0:position.offsetY)&&void 0!==_position$offsetY?_position$offsetY:0)}()}),[]);return Object(jsx_runtime.jsxs)(StyledArcherContainer,{strokeColor:"black",strokeWidth:1,ref:archerContainerRef,children:[Object(jsx_runtime.jsx)(react_archer.ArcherElement,{id:"".concat(annotation.id,"-source"),relations:[{targetId:"".concat(annotation.id,"-target"),targetAnchor:"top",sourceAnchor:"bottom",style:{endShape:{circle:{radius:1,fillColor:"black",strokeColor:"black",strokeWidth:0}}}}],children:Object(jsx_runtime.jsx)(SourcePoint,{draggable:!0,position:{x:x,y:y,offsetX:offsetX+baseOffsetX,offsetY:offsetY+baseOffsetY},onDragStart:function onDragStart(event){var img=new Image;event.dataTransfer.setDragImage(img,0,0),setDragged(!0),setDragStartPoint({x:event.nativeEvent.offsetX,y:event.nativeEvent.offsetY})},onDrag:function onDrag(event){if(dragged){var dragCurrentPoint={x:event.nativeEvent.offsetX,y:event.nativeEvent.offsetY},newOffsetX=offsetX+(dragCurrentPoint.x-dragStartPoint.x),newOffsetY=offsetY+(dragCurrentPoint.y-dragStartPoint.y);setOffsetX(newOffsetX),setOffsetY(newOffsetY)}},onDragEnd:function onDragEnd(event){var _archerContainerRef$c;if(null==archerContainerRef||null===(_archerContainerRef$c=archerContainerRef.current)||void 0===_archerContainerRef$c||_archerContainerRef$c.refreshScreen(),dragged){var dragEndPoint={x:event.nativeEvent.offsetX,y:event.nativeEvent.offsetY},newOffsetX=offsetX+(dragEndPoint.x-dragStartPoint.x),newOffsetY=offsetY+(dragEndPoint.y-dragStartPoint.y);setDragged(!1),setOffsetX(newOffsetX),setOffsetY(newOffsetY),updateBoxPosition(annotation.id,newOffsetX,newOffsetY),onArrowBoxMove&&onArrowBoxMove(annotation.id,newOffsetX+baseOffsetX,newOffsetY+baseOffsetY)}},children:renderedArrowWithBox})}),Object(jsx_runtime.jsx)(react_archer.ArcherElement,{id:"".concat(annotation.id,"-target"),children:Object(jsx_runtime.jsx)(TargetPoint,{position:position,children:Object(jsx_runtime.jsx)(Dummy,{})})})]})}ArrowBox.displayName="ArrowBox";try{ArrowBox.displayName="ArrowBox",ArrowBox.__docgenInfo={description:"",displayName:"ArrowBox",props:{annotation:{defaultValue:null,description:"",name:"annotation",required:!0,type:{name:"any"}},renderedArrowWithBox:{defaultValue:null,description:"",name:"renderedArrowWithBox",required:!0,type:{name:"any"}},updateBoxPosition:{defaultValue:null,description:"",name:"updateBoxPosition",required:!0,type:{name:"any"}},arrowPreviewOptions:{defaultValue:null,description:"",name:"arrowPreviewOptions",required:!1,type:{name:"ArrowPreviewOptions | undefined"}},onArrowBoxMove:{defaultValue:null,description:"",name:"onArrowBoxMove",required:!1,type:{name:"((annotationId: any, offsetX?: number | undefined, offsetY?: number | undefined) => void) | undefined"}},position:{defaultValue:null,description:"",name:"position",required:!0,type:{name:"any"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ArrowBox.tsx#ArrowBox"]={docgenInfo:ArrowBox.__docgenInfo,name:"ArrowBox",path:"src/ArrowBox.tsx#ArrowBox"})}catch(__react_docgen_typescript_loader_error){}function ReactPictureAnnotation_templateObject2(){var data=taggedTemplateLiteral_default()(["\n  position: relative;\n  width: 100%;\n  height: 100%;\n\n  .rp-image {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n    overflow: hidden;\n  }\n\n  .rp-shapes {\n    position: absolute;\n    top: 0;\n    right: 0;\n    bottom: 0;\n    left: 0;\n  }\n\n  .rp-selected-input {\n    position: absolute;\n  }\n\n  .rp-delete {\n    width: 20px;\n    height: 20px;\n    fill: white;\n  }\n\n  .rp-delete-section {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n  .rp-default-input-section {\n    display: flex;\n    align-items: stretch;\n    background-color: #3384ff;\n    border: none;\n    border-radius: 5px;\n  }\n\n  .rp-default-input-section input {\n    padding: 10px;\n    color: white;\n    background: transparent;\n    border: 0;\n    outline: none;\n  }\n\n  .rp-default-input-section input::placeholder {\n    color: #94bfff;\n  }\n\n  .rp-default-input-section a {\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 35px;\n    color: white;\n    font-size: 12px;\n    background-color: #3b5bdb;\n    border-radius: 0 5px 5px 0;\n    cursor: pointer;\n    transition: background-color 0.5s, color 0.5s;\n  }\n\n  .rp-default-input-section a:hover,\n  .rp-default-input-section a:active {\n    color: #3384ff;\n    background-color: #5c7cfa;\n  }\n"]);return ReactPictureAnnotation_templateObject2=function _templateObject2(){return data},data}function ReactPictureAnnotation_templateObject(){var data=taggedTemplateLiteral_default()(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  pointer-events: none;\n"]);return ReactPictureAnnotation_templateObject=function _templateObject(){return data},data}function ReactPictureAnnotation_createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function ReactPictureAnnotation_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ReactPictureAnnotation_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ReactPictureAnnotation_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function ReactPictureAnnotation_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=getPrototypeOf_default()(Derived);if(hasNativeReflectConstruct){var NewTarget=getPrototypeOf_default()(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return possibleConstructorReturn_default()(this,result)}}build_pdf.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/2.6.347/pdf.worker.min.js";var defaultState={scale:1,originX:0,originY:0},ReactPictureAnnotation_ReactPictureAnnotation=function(_React$Component){inherits_default()(ReactPictureAnnotation,_React$Component);var _super=_createSuper(ReactPictureAnnotation);function ReactPictureAnnotation(){var _this;classCallCheck_default()(this,ReactPictureAnnotation);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).shapes=[],_this.currentTransformer=void 0,_this.pendingShapeId=null,_this.state={inputPosition:{left:0,right:0,maxHeight:0},arrowPreviewPositions:{},annotationsLoaded:!1,showInput:!1,hideArrowPreview:!0,isSpacePressed:!1},_this.currentAnnotationData=[],_this.selectedIdTrueValues=[],_this.canvasRef=react_default.a.createRef(),_this.canvas2D=void 0,_this.imageCanvasRef=react_default.a.createRef(),_this.imageCanvas2D=void 0,_this.currentImageElement=void 0,_this.currentAnnotationState=new DefaultAnnotationState_DefaultAnnotationState(assertThisInitialized_default()(_this)),_this.scaleState=defaultState,_this.startDrag=void 0,_this.lastPinchLength=void 0,_this._PDF_DOC=void 0,_this.pdfBase64Prefix="data:application/pdf;base64,",_this.componentDidMount=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){var currentCanvas,currentImageCanvas,getDocParams;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(currentCanvas=_this.canvasRef.current,currentImageCanvas=_this.imageCanvasRef.current,!_this.props.pdf){_context.next=14;break}return _context.prev=3,getDocParams=_this.props.pdf.startsWith(_this.pdfBase64Prefix)?{data:atob(_this.props.pdf.replace(_this.pdfBase64Prefix,""))}:{url:_this.props.pdf},_context.next=7,build_pdf.getDocument(getDocParams).promise;case 7:_this._PDF_DOC=_context.sent,_this.props.onPDFLoaded&&_this.props.onPDFLoaded({pages:_this._PDF_DOC.numPages}),_context.next=14;break;case 11:_context.prev=11,_context.t0=_context.catch(3),_this.props.onPDFFailure&&_this.props.onPDFFailure({url:_this.props.pdf,error:_context.t0});case 14:currentCanvas&&currentImageCanvas&&(_this.setCanvasDPI(),_this.canvas2D=currentCanvas.getContext("2d"),_this.imageCanvas2D=currentImageCanvas.getContext("2d"),_this.onImageChange(),currentCanvas.addEventListener("wheel",_this.onWheel,{passive:!1})),_this.syncAnnotationData(),_this.syncSelectedId(),document.addEventListener("keyup",_this.keyListener),document.addEventListener("keydown",_this.keyListener);case 19:case"end":return _context.stop()}}),_callee,null,[[3,11]])}))),_this.componentDidUpdate=function(){var _ref2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(prevProps){var _this$props,width,height,image,pdf,page,renderArrowPreview,annotationData,zoomOnAnnotation,getDocParams;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_this$props=_this.props,width=_this$props.width,height=_this$props.height,image=_this$props.image,pdf=_this$props.pdf,page=_this$props.page,renderArrowPreview=_this$props.renderArrowPreview,annotationData=_this$props.annotationData,zoomOnAnnotation=_this$props.zoomOnAnnotation,prevProps.width===width&&prevProps.height===height||(_this.setCanvasDPI(),_this.onShapeChange(),_this.onImageChange()),Object(lodash.isEqual)(prevProps.renderArrowPreview,renderArrowPreview)||_this.loadArrowPreviews(),prevProps.pdf===pdf){_context2.next=19;break}if(!pdf){_context2.next=18;break}return _context2.prev=5,getDocParams=pdf.startsWith(_this.pdfBase64Prefix)?{data:atob(pdf.replace(_this.pdfBase64Prefix,""))}:{url:pdf},_context2.next=9,build_pdf.getDocument(getDocParams).promise;case 9:_this._PDF_DOC=_context2.sent,_this.props.onPDFLoaded&&_this.props.onPDFLoaded({pages:_this._PDF_DOC.numPages}),_context2.next=16;break;case 13:_context2.prev=13,_context2.t0=_context2.catch(5),_this.props.onPDFFailure&&_this.props.onPDFFailure({url:"",error:_context2.t0});case 16:_context2.next=19;break;case 18:_this._PDF_DOC=void 0;case 19:if(image&&prevProps.image!==image&&(_this.cleanImage(),_this.currentImageElement||_this.reset(),_this.currentImageElement&&image&&(_this.currentImageElement.src=image)),!pdf||prevProps.pdf===pdf&&prevProps.page===page){_context2.next=26;break}if(_this.currentImageElement||_this.reset(),!_this.currentImageElement||!_this._PDF_DOC){_context2.next=26;break}return _context2.next=25,_this.loadPDFPage();case 25:_this.currentImageElement.src=_context2.sent;case 26:zoomOnAnnotation&&prevProps.zoomOnAnnotation!==zoomOnAnnotation&&_this.onZoomOnAnnotation(zoomOnAnnotation.annotation,zoomOnAnnotation.scale),_this.syncAnnotationData(),_this.syncSelectedId(),annotationData&&annotationData.length>0&&!_this.state.annotationsLoaded&&_this.loadArrowPreviews();case 30:case"end":return _context2.stop()}}),_callee2,null,[[5,13]])})));return function(_x){return _ref2.apply(this,arguments)}}(),_this.componentWillUnmount=function(){document.removeEventListener("keyup",_this.keyListener),document.removeEventListener("keydown",_this.keyListener),_this.canvasRef.current&&_this.canvasRef.current.removeEventListener("wheel",_this.onWheel)},_this.calculateMousePosition=function(positionX,positionY){var _this$scaleState=_this.scaleState,originX=_this$scaleState.originX,originY=_this$scaleState.originY,scale=_this$scaleState.scale;return{positionX:(positionX-originX)/scale,positionY:(positionY-originY)/scale}},_this.getOriginalImageSize=function(){return _this.currentImageElement?{width:_this.currentImageElement.width,height:_this.currentImageElement.height}:{width:1,height:1}},_this.calculateShapePositionNoOffset=function(shapeData){var x=shapeData.x,y=shapeData.y,width=shapeData.width,height=shapeData.height,scaledX=x,scaledWidth=width,scaledY=y,scaledHeight=height;return _this.currentImageElement&&width<1&&height<1&&width>0&&height>0&&(scaledX=x*_this.currentImageElement.width,scaledWidth=width*_this.currentImageElement.width,scaledY=y*_this.currentImageElement.height,scaledHeight=height*_this.currentImageElement.height),{x:scaledX,y:scaledY,width:scaledWidth,height:scaledHeight}},_this.calculateShapePosition=function(shapeData){var _this$scaleState2=_this.scaleState,originX=_this$scaleState2.originX,originY=_this$scaleState2.originY,scale=_this$scaleState2.scale,_this$calculateShapeP=_this.calculateShapePositionNoOffset(shapeData);return{x:_this$calculateShapeP.x*scale+originX,y:_this$calculateShapeP.y*scale+originY,width:_this$calculateShapeP.width*scale,height:_this$calculateShapeP.height*scale}},_this.loadArrowPreviews=function(){var newArrowPreviewPositions={},annotations=_this.props.annotationData;for(var _annotation in annotations){var _annotations$_annotat,_oldAnnotationPositio,_oldAnnotationPositio2,oldAnnotationPosition=_this.state.arrowPreviewPositions[null===(_annotations$_annotat=annotations[_annotation])||void 0===_annotations$_annotat?void 0:_annotations$_annotat.id];newArrowPreviewPositions[annotations[_annotation].id]={x:null!==(_oldAnnotationPositio=null==oldAnnotationPosition?void 0:oldAnnotationPosition.x)&&void 0!==_oldAnnotationPositio?_oldAnnotationPositio:0,y:null!==(_oldAnnotationPositio2=null==oldAnnotationPosition?void 0:oldAnnotationPosition.y)&&void 0!==_oldAnnotationPositio2?_oldAnnotationPositio2:0}}_this.setState({annotationsLoaded:!0,arrowPreviewPositions:newArrowPreviewPositions},_this.onShapeChange)},_this.updateBoxPosition=function(id,offsetX,offsetY){_this.props.renderArrowPreview&&_this.setState({arrowPreviewPositions:Object.assign({},_this.state.arrowPreviewPositions,defineProperty_default()({},id,Object.assign({},_this.state.arrowPreviewPositions[id],{offsetX:offsetX,offsetY:offsetY})))},(function(){return _this.onShapeChange()}))},_this.onZoomOnAnnotation=function(annotation){var scale=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,_annotation$box=annotation.box,xMin=_annotation$box.xMin,xMax=_annotation$box.xMax,yMin=_annotation$box.yMin,yMax=_annotation$box.yMax,_this$props2=_this.props,canvasWidth=_this$props2.width,canvasHeight=_this$props2.height,_ref3=_this.currentImageElement||document.createElement("img"),imageWidth=_ref3.width,imageHeight=_ref3.height,xCenter=(xMin+xMax)/2,yCenter=(yMin+yMax)/2,x=scale*imageWidth*xCenter*-1+canvasWidth/2,y=scale*imageHeight*yCenter*-1+canvasHeight/2;_this.scaleState.originX=x,_this.scaleState.originY=y,_this.scaleState.scale=scale,_this.setState({imageScale:_this.scaleState,hideArrowPreview:!0}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange(),_this.setState({hideArrowPreview:!1})}))},_this.setAnnotationState=function(annotationState){_this.currentAnnotationState=annotationState},_this.onShapeChange=function(){if(_this.canvas2D&&_this.canvasRef.current){_this.canvas2D.clearRect(0,0,_this.canvasRef.current.width,_this.canvasRef.current.height);var hasSelectedItem=!1,xMin=-1,yMin=-1,xMax=-1,yMax=-1,strokeWidth=-1;if(1===_this.getOriginalImageSize().width)return;var _step,updatedArrowPreviewPositions=_this.state.arrowPreviewPositions,_iterator=ReactPictureAnnotation_createForOfIteratorHelper(_this.shapes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value,_annotation2=item.getAnnotationData(),itemId=_annotation2.id,isSelected=!!_this.selectedIds&&_this.selectedIds.includes(itemId),_scale=_this.scaleState.scale,_item$paint=item.paint(_this.canvas2D,_this.calculateShapePosition,isSelected,_this.props.drawLabel,_scale,!1),_x2=_item$paint.x,_y=_item$paint.y,_height=_item$paint.height,_width=_item$paint.width;if(_this.props.renderArrowPreview&&_this.props.renderArrowPreview(_annotation2)&&(updatedArrowPreviewPositions=Object.assign({},updatedArrowPreviewPositions,defineProperty_default()({},itemId,Object.assign({},updatedArrowPreviewPositions[itemId],{x:_x2,y:_y})))),isSelected){xMin=-1===xMin||xMin>_x2?_x2:xMin,yMin=-1===yMin||yMin>_y?_y:yMin,xMax=-1===xMax||xMax<_x2+_width?_x2+_width:xMax,yMax=-1===yMax||yMax<_y+_height?_y+_height:yMax;var _item$getAnnotationDa=item.getAnnotationData().mark.strokeWidth;strokeWidth=void 0===_item$getAnnotationDa?4:_item$getAnnotationDa,_this.currentTransformer&&_this.currentTransformer.id===itemId||(_this.currentTransformer=new Transformer_Transformer(item,_this.props.editable,_this.getOriginalImageSize,_this.calculateShapePositionNoOffset)),hasSelectedItem=!0,_this.currentTransformer.paint(_this.canvas2D,_this.calculateShapePosition)}}}catch(err){_iterator.e(err)}finally{_iterator.f()}if(hasSelectedItem){var _this$props3=_this.props,containerWidth=_this$props3.width,containerHeight=_this$props3.height,leftOfMiddle=xMin<containerWidth/2,topOfMiddle=yMin<containerHeight/2,margin=strokeWidth+10,inputPosition=Object.assign({},leftOfMiddle?{left:xMin}:{right:containerWidth-xMax},topOfMiddle?{top:yMax+strokeWidth}:{bottom:-yMin+containerHeight+strokeWidth},topOfMiddle?{paddingTop:margin}:{paddingBottom:margin},topOfMiddle&&{maxHeight:"calc(".concat(_this.props.height,"px - ").concat(yMax+2*margin,"px)")},!topOfMiddle&&{maxHeight:"calc(".concat(yMin-2*margin,"px)")},{overflow:"visible",zIndex:1e3});_this.setState({showInput:!0,inputPosition:inputPosition})}else _this.setState({showInput:!1,inputComment:""});_this.setState({arrowPreviewPositions:updatedArrowPreviewPositions})}_this.currentAnnotationData=_this.shapes.map((function(item){return item.getAnnotationData()}));var onChange=_this.props.onChange;onChange&&onChange(_this.currentAnnotationData)},_this.zoomIn=function(){_this.scaleState.scale>10?_this.scaleState.scale=10:_this.scaleState.scale<.1?_this.scaleState.scale=.1:(_this.scaleState.scale+=.2*_this.scaleState.scale,_this.scaleState.scale=Math.max(Math.min(_this.scaleState.scale,10),.1)),_this.setState({imageScale:_this.scaleState,hideArrowPreview:!0}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange(),_this.setState({hideArrowPreview:!1})}))},_this.zoomOut=function(){_this.scaleState.scale>10?_this.scaleState.scale=10:_this.scaleState.scale<.1?_this.scaleState.scale=.1:(_this.scaleState.scale-=.2*_this.scaleState.scale,_this.scaleState.scale=Math.max(Math.min(_this.scaleState.scale,10),.1)),_this.setState({imageScale:_this.scaleState,hideArrowPreview:!0}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange(),_this.setState({hideArrowPreview:!1})}))},_this.reset=asyncToGenerator_default()(regenerator_default.a.mark((function _callee3(){var nextImageNode,loadProperDimentions;return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_this.props.onLoading(!0),(nextImageNode=_this.currentImageElement||document.createElement("img")).crossOrigin="anonymous",loadProperDimentions=function loadProperDimentions(){_this.setState({hideArrowPreview:!0});var width=nextImageNode.width,height=nextImageNode.height,imageNodeRatio=height/width,_this$props4=_this.props,canvasWidth=_this$props4.width,canvasHeight=_this$props4.height,canvasNodeRatio=canvasHeight/canvasWidth;if(!isNaN(imageNodeRatio)&&!isNaN(canvasNodeRatio))if(imageNodeRatio<canvasNodeRatio){var _scale2=canvasWidth/width;_this.scaleState={originX:(canvasWidth-_scale2*width)/2,originY:(canvasHeight-_scale2*height)/2,scale:_scale2}}else{var _scale3=canvasHeight/height;_this.scaleState={originX:(canvasWidth-_scale3*width)/2,originY:(canvasHeight-_scale3*height)/2,scale:_scale3}}requestAnimationFrame((function(){_this.onImageChange(),_this.onShapeChange(),_this.setState({hideArrowPreview:!1})}))},!_this.currentImageElement){_context3.next=8;break}loadProperDimentions(),_context3.next=18;break;case 8:if(nextImageNode.addEventListener("load",(function(){_this.currentImageElement=nextImageNode,_this.props.onReady&&_this.props.onReady(assertThisInitialized_default()(_this)),loadProperDimentions()})),nextImageNode.alt="",!_this.props.image){_context3.next=14;break}nextImageNode.src=_this.props.image,_context3.next=18;break;case 14:if(!_this._PDF_DOC){_context3.next=18;break}return _context3.next=17,_this.loadPDFPage();case 17:nextImageNode.src=_context3.sent;case 18:_this.props.onLoading(!1);case 19:case"end":return _context3.stop()}}),_callee3)}))),_this.onDelete=function(id){var deleteTarget=_this.shapes.findIndex((function(shape){return shape.getAnnotationData().id===id}));deleteTarget>=0&&(_this.shapes.splice(deleteTarget,1),_this.onShapeChange()),_this.selectedIds=_this.selectedIds.filter((function(el){return el!==id})),_this.onShapeChange()},_this.downloadFile=function(){var _ref5=asyncToGenerator_default()(regenerator_default.a.mark((function _callee5(fileName){var drawText,drawBox,drawCustom,immediateDownload,downloadScale,annotationData,pdfDoc,pages,pageNum,currentPage,fontSize,pageRotation,_currentPage$getSize,pageWidth,pageHeight,bCanvas,bCtx,bData,bImage,pdfBytes,blob,url,a,_args5=arguments;return regenerator_default.a.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(drawText=!(_args5.length>1&&void 0!==_args5[1])||_args5[1],drawBox=!(_args5.length>2&&void 0!==_args5[2])||_args5[2],drawCustom=!(_args5.length>3&&void 0!==_args5[3])||_args5[3],immediateDownload=!(_args5.length>4&&void 0!==_args5[4])||_args5[4],downloadScale=_args5.length>5&&void 0!==_args5[5]?_args5[5]:4,_this._PDF_DOC&&_this.currentImageElement){_context5.next=7;break}return _context5.abrupt("return");case 7:return annotationData=_this.props.annotationData,_context5.t0=es.PDFDocument,_context5.next=11,_this._PDF_DOC.getData();case 11:return _context5.t1=_context5.sent,_context5.next=14,_context5.t0.load.call(_context5.t0,_context5.t1);case 14:if(pdfDoc=_context5.sent,pages=pdfDoc.getPages(),pageNum=_this.props.page?_this.props.page-1:0,currentPage=pages[pageNum],fontSize=12,pageRotation=_this.getPageRotation(currentPage)%360,_currentPage$getSize=currentPage.getSize(),pageWidth=_currentPage$getSize.width,pageHeight=_currentPage$getSize.height,bCanvas=document.createElement("canvas"),bCtx=bCanvas.getContext("2d"),bCanvas.width=pageWidth*downloadScale,bCanvas.height=pageHeight*downloadScale,!annotationData){_context5.next=28;break}return _context5.next=28,Promise.all(annotationData.map(function(){var _ref6=asyncToGenerator_default()(regenerator_default.a.mark((function _callee4(el){var _this$currentImageEle,_this$currentImageEle2,color,_this$calculateShapeP2,x,y,width,height,coordsFromBottomLeft,drawX,drawY,tmpWidth,_tmpWidth,noXYRotate,newX,newY;return regenerator_default.a.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(color=parse_color_default()(el.mark.strokeColor||"blue").rgb,_this$calculateShapeP2=_this.calculateShapePositionNoOffset(el.mark),x=_this$calculateShapeP2.x,y=_this$calculateShapeP2.y,width=_this$calculateShapeP2.width,height=_this$calculateShapeP2.height,x/=(null===(_this$currentImageEle=_this.currentImageElement)||void 0===_this$currentImageEle?void 0:_this$currentImageEle.width)||1,width/=_this.currentImageElement.width,y/=(null===(_this$currentImageEle2=_this.currentImageElement)||void 0===_this$currentImageEle2?void 0:_this$currentImageEle2.height)||1,height/=_this.currentImageElement.height,coordsFromBottomLeft={x:x,y:1-y},drawX=null,drawY=null,90===pageRotation?(drawX=1-coordsFromBottomLeft.y,drawY=coordsFromBottomLeft.x,tmpWidth=width,width=height,height=-tmpWidth):180===pageRotation?(drawX=1-coordsFromBottomLeft.x,drawY=1-coordsFromBottomLeft.y,height=-height,width=-width):270===pageRotation?(drawX=coordsFromBottomLeft.y,drawY=1-coordsFromBottomLeft.x,_tmpWidth=width,width=-height,height=_tmpWidth):(drawX=coordsFromBottomLeft.x,drawY=coordsFromBottomLeft.y),noXYRotate=!(90===pageRotation||270===pageRotation),!el.mark.draw){_context4.next=21;break}return newX=drawX*pageWidth*downloadScale,newY=(1-drawY)*pageHeight*downloadScale,bCtx.translate(0,0),bCtx.save(),bCtx.translate(newX,newY),bCtx.rotate(-pageRotation*Math.PI/180),el.mark.draw(bCtx,0,0,width*pageWidth*downloadScale,height*pageHeight*downloadScale,1,!0),bCtx.restore(),_context4.abrupt("return");case 21:el.comment&&drawText&&currentPage.drawText(el.comment,{x:(drawX+(noXYRotate?0:width))*pageWidth+(noXYRotate?2:-fontSize),y:(drawY+(noXYRotate?-height:0))*pageHeight+(noXYRotate?-fontSize:-2),size:fontSize,rotate:Object(es.degrees)(pageRotation)}),drawBox&&currentPage.drawRectangle({x:drawX*pageWidth,y:drawY*pageHeight,width:width*pageWidth,height:-height*pageHeight,borderWidth:el.mark.strokeWidth||2,borderColor:Object(es.rgb)(color[0]/255,color[1]/255,color[2]/255)});case 23:case"end":return _context4.stop()}}),_callee4)})));return function(_x4){return _ref6.apply(this,arguments)}}()));case 28:if(!drawCustom){_context5.next=36;break}return _context5.next=31,new Promise((function(resolve){bCanvas.toBlob((function(blb){null==blb||blb.arrayBuffer().then(resolve)}))}));case 31:return bData=_context5.sent,_context5.next=34,pdfDoc.embedPng(bData);case 34:bImage=_context5.sent,currentPage.drawImage(bImage,{x:0,y:0,width:pageWidth,height:pageHeight});case 36:if(!immediateDownload){_context5.next=50;break}return _context5.next=39,pdfDoc.save();case 39:pdfBytes=_context5.sent,blob=new Blob([pdfBytes],{type:"application/pdf"}),url=window.URL.createObjectURL(blob),(a=document.createElement("a")).href=url,a.download=fileName,document.body.appendChild(a),a.style.display="none",a.click(),a.remove(),setTimeout((function(){return window.URL.revokeObjectURL(url)}),1e3);case 50:return _context5.abrupt("return",pdfDoc);case 51:case"end":return _context5.stop()}}),_callee5)})));return function(_x3){return _ref5.apply(this,arguments)}}(),_this.extractFromCanvas=function(x,y,width,height){if(_this.currentImageElement){var resultSize=_this.calculateShapePositionNoOffset({x:x,y:y,width:width,height:height}),bCanvas=document.createElement("canvas");return bCanvas.height=resultSize.height,bCanvas.width=resultSize.width,bCanvas.getContext("2d").drawImage(_this.currentImageElement,resultSize.x,resultSize.y,resultSize.width,resultSize.height,0,0,resultSize.width,resultSize.height),bCanvas.toDataURL("image/png")}},_this.syncAnnotationData=function(){var annotationData=_this.props.annotationData;if(annotationData){var refreshShapesWithAnnotationData=function refreshShapesWithAnnotationData(){var nextShapes=annotationData.map((function(eachAnnotationData){return new Shape.a(eachAnnotationData,_this.onShapeChange,_this.getOriginalImageSize)}));_this.shapes=nextShapes;var ids=nextShapes.map((function(item){return item.getAnnotationData().id})),availableSelectedIds=_this.selectedIds.filter((function(el){return ids.includes(el)}));availableSelectedIds.length!==_this.selectedIds.length&&(_this.selectedIds=availableSelectedIds),_this.onShapeChange()};if(annotationData.length!==_this.shapes.length)refreshShapesWithAnnotationData();else{var _step2,_loop=function _loop(annotationDataItem){var targetShape=_this.shapes.find((function(item){return item.getAnnotationData().id===annotationDataItem.id}));return targetShape&&targetShape.equal(annotationDataItem)&&JSON.stringify(targetShape.getAnnotationData().mark)===JSON.stringify(annotationDataItem.mark)?"continue":(refreshShapesWithAnnotationData(),"break")},_iterator2=ReactPictureAnnotation_createForOfIteratorHelper(annotationData);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _ret=_loop(_step2.value);if("continue"!==_ret&&"break"===_ret)break}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}},_this.syncSelectedId=function(){var selectedIds=_this.props.selectedIds;selectedIds&&selectedIds!==_this.selectedIds&&(_this.selectedIds=selectedIds,_this.onShapeChange())},_this.setCanvasDPI=function(){var currentCanvas=_this.canvasRef.current,currentImageCanvas=_this.imageCanvasRef.current;if(currentCanvas&&currentImageCanvas){var currentCanvas2D=currentCanvas.getContext("2d"),currentImageCanvas2D=currentImageCanvas.getContext("2d");currentCanvas2D&&currentImageCanvas2D&&(currentCanvas2D.resetTransform(),currentImageCanvas2D.resetTransform(),currentCanvas2D.scale(2,2),currentImageCanvas2D.scale(2,2))}},_this.onInputCommentChange=function(id,comment){var selectedShapeIndex=_this.shapes.findIndex((function(item){return item.getAnnotationData().id===id}));_this.shapes[selectedShapeIndex].getAnnotationData().comment=comment,_this.onShapeChange()},_this.cleanImage=function(){_this.imageCanvas2D&&_this.imageCanvasRef.current&&_this.imageCanvas2D.clearRect(0,0,_this.imageCanvasRef.current.width,_this.imageCanvasRef.current.height)},_this.onImageChange=asyncToGenerator_default()(regenerator_default.a.mark((function _callee6(){var _this$scaleState3,originX,originY,_scale4;return regenerator_default.a.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:_this.cleanImage(),_this.imageCanvas2D&&_this.imageCanvasRef.current&&(_this$scaleState3=_this.scaleState,originX=_this$scaleState3.originX,originY=_this$scaleState3.originY,_scale4=_this$scaleState3.scale,_this.currentImageElement?_this.imageCanvas2D.drawImage(_this.currentImageElement,originX,originY,_this.currentImageElement.width*_scale4,_this.currentImageElement.height*_scale4):_this.reset());case 2:case"end":return _context6.stop()}}),_callee6)}))),_this.createContext=function(page){var viewport=page.getViewport({scale:Math.min(Math.max(_this.props.width/(page.view[2]/4),_this.props.height/(page.view[3]/4),1),8)}),canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");return canvas.height=viewport.height,canvas.width=viewport.width,{canvas:canvas,ctx:ctx,viewport:viewport}},_this.loadPDFPage=function(){var _ref8=asyncToGenerator_default()(regenerator_default.a.mark((function _callee7(){var pageNum,page,_this$createContext,canvas,ctx,viewport,data,_args7=arguments;return regenerator_default.a.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(pageNum=_args7.length>0&&void 0!==_args7[0]?_args7[0]:_this.props.page||1,!_this._PDF_DOC){_context7.next=10;break}return _context7.next=4,_this._PDF_DOC.getPage(pageNum);case 4:return page=_context7.sent,_this$createContext=_this.createContext(page),canvas=_this$createContext.canvas,ctx=_this$createContext.ctx,viewport=_this$createContext.viewport,_context7.next=8,page.render({canvasContext:ctx,viewport:viewport}).promise;case 8:return data=canvas.toDataURL("image/png",1),_context7.abrupt("return",data);case 10:return _context7.abrupt("return","");case 11:case"end":return _context7.stop()}}),_callee7)})));return function(){return _ref8.apply(this,arguments)}}(),_this.onMouseDown=function(event){var _this$props5=_this.props,editable=_this$props5.editable,creatable=_this$props5.creatable,_event$nativeEvent=event.nativeEvent,offsetX=_event$nativeEvent.offsetX,offsetY=_event$nativeEvent.offsetY,_this$calculateMouseP=_this.calculateMousePosition(offsetX,offsetY),positionX=_this$calculateMouseP.positionX,positionY=_this$calculateMouseP.positionY;if(!creatable&&!editable||event.shiftKey||_this.state.isSpacePressed){var _this$scaleState4=_this.scaleState,originX=_this$scaleState4.originX,originY=_this$scaleState4.originY;_this.startDrag={x:offsetX,y:offsetY,originX:originX,originY:originY}}_this.currentAnnotationState.onMouseDown(event,positionX,positionY)},_this.onMouseMove=function(event){var _event$nativeEvent2=event.nativeEvent,offsetX=_event$nativeEvent2.offsetX,offsetY=_event$nativeEvent2.offsetY,_this$calculateMouseP2=_this.calculateMousePosition(offsetX,offsetY),positionX=_this$calculateMouseP2.positionX,positionY=_this$calculateMouseP2.positionY;_this.currentAnnotationState.onMouseMove(positionX,positionY),_this.startDrag&&(_this.scaleState.originX=_this.startDrag.originX+(offsetX-_this.startDrag.x),_this.scaleState.originY=_this.startDrag.originY+(offsetY-_this.startDrag.y),_this.setState({imageScale:_this.scaleState,hideArrowPreview:!0}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange()})))},_this.onMouseUp=function(){_this.currentAnnotationState.onMouseUp(),_this.startDrag=void 0,_this.setState({hideArrowPreview:!1})},_this.forceMouseUp=function(){_this.currentAnnotationState.onMouseLeave(),_this.startDrag=void 0,_this.setState({hideArrowPreview:!1})},_this.onTouchStart=function(event){var editable=_this.props.editable,_event$touches$=event.touches[0],clientX=_event$touches$.clientX,clientY=_event$touches$.clientY,_this$calculateMouseP3=_this.calculateMousePosition(clientX,clientY),positionX=_this$calculateMouseP3.positionX,positionY=_this$calculateMouseP3.positionY;if(_this.currentAnnotationState.onMouseDown(event,positionX,positionY),!editable){var touches=event.touches;if(2===touches.length)_this.lastPinchLength=getPinchLength(touches);else if(1===touches.length){_this.lastPinchLength=void 0;var _this$scaleState5=_this.scaleState,originX=_this$scaleState5.originX,originY=_this$scaleState5.originY;_this.startDrag={x:clientX,y:clientY,originX:originX,originY:originY}}}tryCancelEvent(event)},_this.onTouchMove=function(event){var editable=_this.props.editable,_event$touches$2=event.touches[0],clientX=_event$touches$2.clientX,clientY=_event$touches$2.clientY,_this$calculateMouseP4=_this.calculateMousePosition(clientX,clientY),positionX=_this$calculateMouseP4.positionX,positionY=_this$calculateMouseP4.positionY;if(_this.setState({hideArrowPreview:!0}),editable)_this.currentAnnotationState.onMouseMove(positionX,positionY);else{var touches=event.touches;2===touches.length?_this.handlePinchChange(touches):1===touches.length&&_this.startDrag&&(_this.scaleState.originX=_this.startDrag.originX+(clientX-_this.startDrag.x),_this.scaleState.originY=_this.startDrag.originY+(clientY-_this.startDrag.y),_this.setState({imageScale:_this.scaleState}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange()})))}tryCancelEvent(event)},_this.onTouchEnd=function(){_this.currentAnnotationState.onMouseUp(),_this.startDrag=void 0,_this.setState({hideArrowPreview:!1})},_this.handlePinchChange=function(touches){var length=getPinchLength(touches),midpoint=getPinchMidpoint(touches),scale=_this.lastPinchLength?_this.scaleState.scale*length/_this.lastPinchLength:_this.scaleState.scale;scale>10&&(scale=10),scale<.1&&(scale=.1);var _this$scaleState6=_this.scaleState,originX=_this$scaleState6.originX,originY=_this$scaleState6.originY;_this.scaleState.originX=midpoint.x-(midpoint.x-originX)/_this.scaleState.scale*scale,_this.scaleState.originY=midpoint.y-(midpoint.y-originY)/_this.scaleState.scale*scale,_this.scaleState.scale=scale,_this.setState({imageScale:_this.scaleState}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange()}))},_this.onMouseLeave=function(){_this.currentAnnotationState.onMouseLeave()},_this.onWheel=function(event){event.preventDefault(),event.stopPropagation(),_this.setState({hideArrowPreview:!0});var preScale=_this.scaleState.scale,_this$props$mouseWhee=_this.props.mouseWheelScaleModifier,mouseWheelScaleModifier=void 0===_this$props$mouseWhee?.01:_this$props$mouseWhee,offsetX=event.offsetX,offsetY=event.offsetY,ctrlKey=event.ctrlKey,deltaY=event.deltaY,deltaX=event.deltaX;if(ctrlKey){_this.scaleState.scale>10?_this.scaleState.scale=10:_this.scaleState.scale<.1?_this.scaleState.scale=.1:(_this.scaleState.scale-=deltaY*mouseWheelScaleModifier,_this.scaleState.scale=Math.max(Math.min(_this.scaleState.scale,10),.1));var _this$scaleState7=_this.scaleState,originX=_this$scaleState7.originX,originY=_this$scaleState7.originY,_scale5=_this$scaleState7.scale;_this.scaleState.originX=offsetX-(offsetX-originX)/preScale*_scale5,_this.scaleState.originY=offsetY-(offsetY-originY)/preScale*_scale5}else _this.scaleState.originX-=2*deltaX,_this.scaleState.originY-=2*deltaY;_this.setState({imageScale:_this.scaleState}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange(),_this.setState({hideArrowPreview:!1})}))},_this.getPageRotation=function(page){var rotation=0;return!!page.getRotation()&&(rotation=page.getRotation().angle),void 0===rotation&&(rotation=0),rotation},_this.keyListener=function(e){" "!==e.key&&32!==e.keyCode||_this.setState({isSpacePressed:"keydown"===e.type})},_this}return createClass_default()(ReactPictureAnnotation,[{key:"render",value:function render(){var _this2=this,_this$props6=this.props,width=_this$props6.width,height=_this$props6.height,annotationData=_this$props6.annotationData,_this$props6$renderIt=_this$props6.renderItemPreview,renderItemPreview=void 0===_this$props6$renderIt?function(annotations){return Object(jsx_runtime.jsx)(DefaultInputSection.a,{annotation:annotations[0],onChange:function onChange(comment){return _this2.onInputCommentChange(annotations[0].id,comment)},onDelete:function onDelete(){return _this2.onDelete(annotations[0].id)}})}:_this$props6$renderIt,renderArrowPreview=_this$props6.renderArrowPreview,onArrowBoxMove=_this$props6.onArrowBoxMove,arrowPreviewOptions=_this$props6.arrowPreviewOptions,_this$state=this.state,showInput=_this$state.showInput,inputPosition=_this$state.inputPosition,arrowPreviewPositions=_this$state.arrowPreviewPositions,hideArrowPreview=_this$state.hideArrowPreview;return Object(jsx_runtime.jsxs)(Wrapper,{children:[Object(jsx_runtime.jsx)("canvas",{style:{width:width,height:height},className:"rp-image",ref:this.imageCanvasRef,width:2*width,height:2*height}),Object(jsx_runtime.jsx)("canvas",{className:"rp-shapes",style:{width:width,height:height},ref:this.canvasRef,width:2*width,height:2*height,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove}),0!==this.selectedItems.length&&showInput&&function showPreview(){return Object(jsx_runtime.jsx)("div",{className:"rp-selected-input",style:inputPosition,onMouseEnter:function onMouseEnter(){_this2.selectedIds=(_this2.selectedItems||[]).map((function(el){return el.id})),_this2.props.hoverable||_this2.currentAnnotationState.onMouseUp()},children:renderItemPreview(_this2.selectedItems,inputPosition.maxHeight)})}(),renderArrowPreview&&annotationData&&!hideArrowPreview&&function showArrowPreview(){var arrowBoxes=[];return null==annotationData||annotationData.forEach((function(annotation){var position=arrowPreviewPositions[annotation.id],arrowBox=renderArrowPreview(annotation);position&&0!==position.x&&0!==position.y&&arrowBox&&arrowBoxes.push(Object(jsx_runtime.jsx)(StyledArrowBox,{annotation:annotation,position:position,arrowPreviewOptions:arrowPreviewOptions,renderedArrowWithBox:arrowBox,onArrowBoxMove:onArrowBoxMove,updateBoxPosition:_this2.updateBoxPosition},"arrow-box-".concat(annotation.id)))})),arrowBoxes}()]})}},{key:"selectedIds",set:function set(value){var onSelect=this.props.onSelect;this.selectedIdTrueValues!==value&&onSelect(value),this.selectedIdTrueValues=value},get:function get(){return this.selectedIdTrueValues}},{key:"selectedItems",get:function get(){var _this3=this;return this.props.annotationData?null===this.selectedIdTrueValues||0===this.selectedIdTrueValues.length?[]:this.props.annotationData.filter((function(el){return _this3.selectedIdTrueValues.some((function(it){return it===el.id}))})):[]}}]),ReactPictureAnnotation}(react_default.a.Component);ReactPictureAnnotation_ReactPictureAnnotation.defaultProps={editable:!1,creatable:!1,drawLabel:!0,usePercentage:!0,onLoading:function onLoading(){return!0},mouseWheelScaleModifier:.01};var getPinchMidpoint=function getPinchMidpoint(touches){var touch1=touches[0],touch2=touches[1];return{x:(touch1.clientX+touch2.clientX)/2,y:(touch1.clientY+touch2.clientY)/2}},getPinchLength=function getPinchLength(touches){var touch1=touches[0],touch2=touches[1];return Math.sqrt(Math.pow(touch1.clientY-touch2.clientY,2)+Math.pow(touch1.clientX-touch2.clientX,2))},tryCancelEvent=function tryCancelEvent(event){return!1!==event.cancelable&&(event.preventDefault(),!0)},StyledArrowBox=Object(styled_components_browser_esm.a)(ArrowBox)(ReactPictureAnnotation_templateObject()),Wrapper=styled_components_browser_esm.a.div(ReactPictureAnnotation_templateObject2());try{ReactPictureAnnotation_ReactPictureAnnotation.displayName="ReactPictureAnnotation",ReactPictureAnnotation_ReactPictureAnnotation.__docgenInfo={description:"",displayName:"ReactPictureAnnotation",props:{annotationData:{defaultValue:null,description:"",name:"annotationData",required:!1,type:{name:"IAnnotation<IShapeData>[] | undefined"}},selectedIds:{defaultValue:null,description:"",name:"selectedIds",required:!1,type:{name:"string[] | undefined"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((annotationData: IAnnotation<IShapeData>[]) => void) | undefined"}},onSelect:{defaultValue:null,description:"",name:"onSelect",required:!0,type:{name:"(ids: string[]) => void"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}},usePercentage:{defaultValue:{value:!0},description:"",name:"usePercentage",required:!1,type:{name:"boolean | undefined"}},page:{defaultValue:null,description:"",name:"page",required:!1,type:{name:"number | undefined"}},image:{defaultValue:null,description:"",name:"image",required:!1,type:{name:"string | undefined"}},pdf:{defaultValue:null,description:"",name:"pdf",required:!1,type:{name:"string | undefined"}},editable:{defaultValue:{value:!1},description:"",name:"editable",required:!1,type:{name:"boolean"}},creatable:{defaultValue:{value:!1},description:"",name:"creatable",required:!1,type:{name:"boolean | undefined"}},hoverable:{defaultValue:null,description:"",name:"hoverable",required:!1,type:{name:"boolean | undefined"}},drawLabel:{defaultValue:{value:!0},description:"",name:"drawLabel",required:!1,type:{name:"boolean"}},arrowPreviewOptions:{defaultValue:null,description:"",name:"arrowPreviewOptions",required:!1,type:{name:"ArrowPreviewOptions | undefined"}},renderArrowPreview:{defaultValue:null,description:"",name:"renderArrowPreview",required:!1,type:{name:"any"}},renderItemPreview:{defaultValue:null,description:"",name:"renderItemPreview",required:!1,type:{name:"RenderItemPreviewFunction | undefined"}},onAnnotationUpdate:{defaultValue:null,description:"",name:"onAnnotationUpdate",required:!1,type:{name:"((annotation: IAnnotation<IShapeData>) => void) | undefined"}},onAnnotationCreate:{defaultValue:null,description:"",name:"onAnnotationCreate",required:!1,type:{name:"((annotation: IAnnotation<IShapeData>) => void) | undefined"}},onArrowBoxMove:{defaultValue:null,description:"",name:"onArrowBoxMove",required:!1,type:{name:"((annotationId: ReactText, offsetX?: number | undefined, offsetY?: number | undefined) => void) | undefined"}},onPDFLoaded:{defaultValue:null,description:"",name:"onPDFLoaded",required:!1,type:{name:"((props: { pages: number; }) => void) | undefined"}},onPDFFailure:{defaultValue:null,description:"",name:"onPDFFailure",required:!1,type:{name:"((props: { url: string; error: Error; }) => void) | undefined"}},onLoading:{defaultValue:{value:"() => true"},description:"",name:"onLoading",required:!1,type:{name:"(loading: boolean) => void"}},onReady:{defaultValue:null,description:"",name:"onReady",required:!1,type:{name:"((element: ReactPictureAnnotation) => void) | undefined"}},mouseWheelScaleModifier:{defaultValue:{value:.01},description:"",name:"mouseWheelScaleModifier",required:!1,type:{name:"number | undefined"}},zoomOnAnnotation:{defaultValue:null,description:"",name:"zoomOnAnnotation",required:!1,type:{name:"{ annotation: any; scale?: number | undefined; } | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/ReactPictureAnnotation.tsx#ReactPictureAnnotation"]={docgenInfo:ReactPictureAnnotation_ReactPictureAnnotation.__docgenInfo,name:"ReactPictureAnnotation",path:"src/ReactPictureAnnotation.tsx#ReactPictureAnnotation"})}catch(__react_docgen_typescript_loader_error){}},329:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return DefaultInputSection_DefaultInputSection}));var jsx_runtime=__webpack_require__(6),DeleteButton=(__webpack_require__(0),function(){return Object(jsx_runtime.jsx)("svg",{className:"rp-delete",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",children:Object(jsx_runtime.jsx)("g",{"data-name":"Layer 2",children:Object(jsx_runtime.jsxs)("g",{"data-name":"trash-2",children:[Object(jsx_runtime.jsx)("rect",{width:"24",height:"24",opacity:"0"}),Object(jsx_runtime.jsx)("path",{d:"M21 6h-5V4.33A2.42 2.42 0 0 0 13.5 2h-3A2.42 2.42 0 0 0 8 4.33V6H3a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2zM10 16a1 1 0 0 1-2 0v-4a1 1 0 0 1 2 0zm0-11.67c0-.16.21-.33.5-.33h3c.29 0 .5.17.5.33V6h-4zM16 16a1 1 0 0 1-2 0v-4a1 1 0 0 1 2 0z"})]})})})}),DefaultInputSection_DefaultInputSection=function DefaultInputSection(_ref){var annotation=_ref.annotation,_onChange=_ref.onChange,onDelete=_ref.onDelete;return Object(jsx_runtime.jsxs)("div",{className:"rp-default-input-section",children:[Object(jsx_runtime.jsx)("input",{className:"rp-default-input-section_input",placeholder:"INPUT TAG HERE",value:annotation.comment,onChange:function onChange(e){return _onChange(e.target.value)}}),Object(jsx_runtime.jsx)("a",{className:"rp-default-input-section_delete",onClick:function onClick(){return onDelete()},children:Object(jsx_runtime.jsx)(DeleteButton,{})})]})};DefaultInputSection_DefaultInputSection.displayName="DefaultInputSection";try{DefaultInputSection_DefaultInputSection.displayName="DefaultInputSection",DefaultInputSection_DefaultInputSection.__docgenInfo={description:"",displayName:"DefaultInputSection",props:{annotation:{defaultValue:null,description:"",name:"annotation",required:!0,type:{name:"IAnnotation<IShapeData>"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(value: string) => void"}},onDelete:{defaultValue:null,description:"",name:"onDelete",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/DefaultInputSection.tsx#DefaultInputSection"]={docgenInfo:DefaultInputSection_DefaultInputSection.__docgenInfo,name:"DefaultInputSection",path:"src/DefaultInputSection.tsx#DefaultInputSection"})}catch(__react_docgen_typescript_loader_error){}},43:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"e",(function(){return pdfFile})),__webpack_require__.d(__webpack_exports__,"b",(function(){return imgFile})),__webpack_require__.d(__webpack_exports__,"d",(function(){return imgSdkThreeAnnotations})),__webpack_require__.d(__webpack_exports__,"c",(function(){return imgSdk})),__webpack_require__.d(__webpack_exports__,"f",(function(){return pdfSdk})),__webpack_require__.d(__webpack_exports__,"a",(function(){return Container})),__webpack_require__.d(__webpack_exports__,"g",(function(){return stubObserverObj}));__webpack_require__(30),__webpack_require__(27),__webpack_require__(10);var taggedTemplateLiteral=__webpack_require__(65),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),regenerator=__webpack_require__(11),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(104),__webpack_require__(32)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),styled_components_browser_esm=__webpack_require__(46),threeAnnotationsResponse=[{type:"cognite_annotation",subtype:"pnid_annotation",description:"This is a customizable annotation!",metadata:{CDF_ANNOTATION_box:'{"xMin":0.28109384469584436,"yMin":0.15310077519379847,"xMax":0.5489239209872729,"yMax":0.32868217054263568}',CDF_ANNOTATION_file_external_id:"dummy.pdf",CDF_ANNOTATION_resource_external_id:"dummyfile",CDF_ANNOTATION_resource_id:"1233",CDF_ANNOTATION_resource_type:"timeSeries",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"1"},source:"email:anna.gadacz@cognite.com",id:1111,lastUpdatedTime:1598534901556,createdTime:1598534901556},{type:"cognite_annotation",subtype:"pnid_annotation",description:"This is another customizable annotation!",metadata:{CDF_ANNOTATION_box:'{"xMin":0.6129383340287385,"yMin":0.7275193798449612,"xMax":0.6608961302530543,"yMax":0.79728682170542634}',CDF_ANNOTATION_file_external_id:"dummy.pdf",CDF_ANNOTATION_resource_external_id:"dummyfile",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:anna.gadacz@cognite.com",id:2222,lastUpdatedTime:1598263653461,createdTime:1598263653461},{type:"cognite_annotation",subtype:"pnid_annotation",description:"Thing thing",metadata:{CDF_ANNOTATION_box:'{"xMin":0.2129383340287385,"yMin":0.3275193798449612,"xMax":0.2608961302530543,"yMax":0.39728682170542634}',CDF_ANNOTATION_file_external_id:"dummy.pdf",CDF_ANNOTATION_resource_external_id:"dummyFile",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:anna.gadacz@cognite.com",id:3333,lastUpdatedTime:1598263653461,createdTime:1598263653461}],response=[{type:"cognite_annotation",subtype:'"COUNTING OF ""AIR COMPRESSORS"" SPARE PARTS"',metadata:{CDF_ANNOTATION_box:'{"xMin":0.1643835616438356,"yMin":0.21782432299052995,"xMax":0.24566210045662096,"yMax":0.2643155100492985}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"8037268543438081",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"deleted",CDF_ANNOTATION_version:"5"},source:"email:david.liu@cognite.com",id:319968411007907,lastUpdatedTime:1594385231239,createdTime:1594385226659},{type:"cognite_annotation",subtype:"pnid_annotation",description:'"COUNTING OF ""BALLAST/BILGE SYSTEMS"" SPARE PARTS',metadata:{CDF_ANNOTATION_box:'{"xMin":0.26743582306018865,"yMin":0.30558375634517765,"xMax":0.29399407783417947,"yMax":0.36751269035532996}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"3851005878284980",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:arne.kvadsheim@cognite.com",id:352749521886257,lastUpdatedTime:1598359289577,createdTime:1598359289577},{type:"cognite_annotation",subtype:"pnid_annotation",description:"Processed-PnID.png",metadata:{CDF_ANNOTATION_box:'{"xMin":0.6479739313649885,"yMin":0.28594249201277955,"xMax":0.689768095185634,"yMax":0.36741214057507987}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_type:"file",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:arne.kvadsheim@cognite.com",id:406167784064508,lastUpdatedTime:1598350017924,createdTime:1598350017924},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-XX-9106",metadata:{CDF_ANNOTATION_box:'{"xMax":0.37633541624672445,"xMin":0.3257407780689377,"yMax":0.049315849486887116,"yMin":0.03933865450399088}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"4856008121737468",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:0x3a5b0939137cd,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-KA-9101",metadata:{CDF_ANNOTATION_box:'{"xMax":0.11852449103003426,"xMin":0.06551098568836929,"yMax":0.6778791334093502,"yMin":0.6733181299885975}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"3047932288982463",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:0x651d046e2e91e,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:"CCLP",metadata:{CDF_ANNOTATION_box:'{"xMin":0.5226363443503919,"yMin":0.10168721498546478,"xMax":0.5498284259880304,"yMax":0.13533544767330755}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_status:"deleted",CDF_ANNOTATION_version:"5"},source:"email:david.liu@cognite.com",id:0x762ded70c7eff,lastUpdatedTime:1593776434475,createdTime:1593776405037},{type:"cognite_annotation",subtype:"pnid_annotation",description:"hellow",metadata:{CDF_ANNOTATION_box:'{"xMin":0.28109384469584436,"yMin":0.15310077519379847,"xMax":0.3489239209872729,"yMax":0.22868217054263568}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"00ADD0001/B1/1mMid",CDF_ANNOTATION_resource_id:"7882260137862254",CDF_ANNOTATION_resource_type:"timeSeries",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:david.liu@cognite.com",id:0x7f05da0244ffc,lastUpdatedTime:1598534901556,createdTime:1598534901556},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-PT-92540",metadata:{CDF_ANNOTATION_box:'{"xMax":0.07518645434388228,"xMin":0.05220721628703891,"yMax":0.7594070695553023,"yMin":0.7548460661345496}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"8531327771472325",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:0x9143c13d0f44c,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:"pnid_annotation",description:"David",metadata:{CDF_ANNOTATION_box:'{"xMin":0.6602020593193312,"yMin":0.4382978723404255,"xMax":0.7293973149877747,"yMax":0.5382978723404255}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:david.liu@cognite.com",id:0x9be98d340d5fd,lastUpdatedTime:1598885044085,createdTime:1598885044085},{type:"cognite_annotation",subtype:"pnid_annotation",description:'"COUNTING OF ""AIR CONDITION/REFRIG.SYSTEM"" SPARE',metadata:{CDF_ANNOTATION_box:'{"xMin":0.047450606254721375,"yMin":0.21547699274784402,"xMax":0.10618786402504735,"yMax":0.2479283470773386}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"5832795727304606",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:edel.andersen@cognite.com",id:0xac1af775fc4ba,lastUpdatedTime:1597742316578,createdTime:1597742316578},{type:"cognite_annotation",subtype:"pnid_annotation",description:"70 GAS 5722 SERIES GROUP",metadata:{CDF_ANNOTATION_box:'{"xMin":0.2129383340287385,"yMin":0.3275193798449612,"xMax":0.2608961302530543,"yMax":0.39728682170542634}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"ALV_70 GAS 5722 SERIES GROUP",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:edel.andersen@cognite.com",id:0xad0461fa41de0,lastUpdatedTime:1598263653461,createdTime:1598263653461},{type:"cognite_annotation",subtype:'"COUNTING OF ""AIR COMPRESSORS"" SPARE PARTS"',metadata:{CDF_ANNOTATION_box:'{"xMin":0.19701986754966885,"yMin":0.2775926026323252,"xMax":0.42549668874172186,"yMax":0.4016725190585017}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"8037268543438081",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"deleted",CDF_ANNOTATION_version:"5"},source:"email:david.liu@cognite.com",id:0xb290888ee305c,lastUpdatedTime:1594659539401,createdTime:1594659534171},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-PT-96150-01",metadata:{CDF_ANNOTATION_box:'{"xMax":0.23523483168715986,"xMin":0.2009675468655513,"yMax":0.7730900798175598,"yMin":0.7682440136830103}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"4050790831683279",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:0xc62c9298950ed,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:"pnid_annotation",description:"anything new",metadata:{CDF_ANNOTATION_box:'{"xMin":0.48999309868875085,"yMin":0.41412676770955814,"xMax":0.5376121463077984,"yMax":0.4902416781488134}',CDF_ANNOTATION_description:"asdf",CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:david.liu@cognite.com",id:0xd91e8d176afa1,lastUpdatedTime:1598452419691,createdTime:1598452419691},{type:"cognite_annotation",subtype:"pnid_annotation",description:"whoot",metadata:{CDF_ANNOTATION_box:'{"xMin":0.42378241619228335,"yMin":0.24105032505362073,"xMax":0.4509803921568627,"yMax":0.2741457930087711}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"ALV_11691023",CDF_ANNOTATION_resource_id:"5950976544660549",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:david.liu@cognite.com",id:0xf6bbbaf0ae62f,lastUpdatedTime:1598027018229,createdTime:1598027018229},{type:"cognite_annotation",subtype:"pnid_annotation",description:'"COUNTING OF ""BOW THRUSTER UNIT"" SPARE PARTS"',metadata:{CDF_ANNOTATION_box:'{"xMin":0.21567877952727085,"yMin":0.48837209302325585,"xMax":0.2841899169905791,"yMax":0.5155038759689923}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"121277937177483",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:edel.andersen@cognite.com",id:4532665115120792,lastUpdatedTime:1598257244235,createdTime:1598257244235},{type:"cognite_annotation",subtype:"23-PT-92539",metadata:{CDF_ANNOTATION_box:'{"xMax":0.6099576698246322,"xMin":0.5934287442047974,"yMax":0.6100342075256556,"yMin":0.5935005701254276}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"3147733389929639",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"deleted",CDF_ANNOTATION_version:"5"},source:"job:8624150428511301",id:4620121021621140,lastUpdatedTime:1594174366120,createdTime:1593788143307},{type:"cognite_annotation",subtype:"pnid_annotation",description:'"COUNTING OF ""AIR COMPRESSORS"" SPARE PARTS"',metadata:{CDF_ANNOTATION_box:'{"xMin":0.18689691032251188,"yMin":0.22352492862155865,"xMax":0.22544323573428832,"yMax":0.25545706128178136}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"8037268543438081",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:edel.andersen@cognite.com",id:4684462763263038,lastUpdatedTime:1597913010903,createdTime:1597913010903},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-KA-9101-M01",metadata:{CDF_ANNOTATION_box:'{"xMax":0.49828663575891957,"xMin":0.42572062084257206,"yMax":0.8469213226909921,"yMin":0.8358038768529077}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"6191827428964450",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:5284005858465797,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:'"COUNTING OF ""AIR COMPRESSORS"" SPARE PARTS"',metadata:{CDF_ANNOTATION_box:'{"xMin":0.41826484018264837,"yMin":0.23848707279442705,"xMax":0.45388127853881277,"yMax":0.27593830681399056}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_status:"deleted",CDF_ANNOTATION_version:"5"},source:"email:david.liu@cognite.com",id:5368397546996716,lastUpdatedTime:1594385044497,createdTime:1594384881933},{type:"cognite_annotation",subtype:"23-HV-92540-03",metadata:{CDF_ANNOTATION_box:'{"xMax":0.681112678895384,"xMin":0.6609554525297319,"yMax":0.16733181299885974,"yMin":0.15108323831242873}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"8880835337562442",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"deleted",CDF_ANNOTATION_version:"5"},source:"job:8624150428511301",id:5457097755247349,lastUpdatedTime:1594174347577,createdTime:1593788143307},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-PT-96149-02",metadata:{CDF_ANNOTATION_box:'{"xMax":0.18967950010078613,"xMin":0.15521064301552107,"yMax":0.7730900798175598,"yMin":0.7682440136830103}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"6223287279641772",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:6285456885371154,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-XX-9106",metadata:{CDF_ANNOTATION_box:'{"xMax":0.6730497883491232,"xMin":0.6186252771618626,"yMax":0.7924743443557583,"yMin":0.7813568985176739}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"4856008121737468",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:6720718229405733,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-PT-92512",metadata:{CDF_ANNOTATION_box:'{"xMax":0.0888933682725257,"xMin":0.06067325136061278,"yMax":0.6185860889395667,"yMin":0.6137400228050172}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"2814662602621825",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:7508866173707239,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:"23-HV-92541-05",metadata:{CDF_ANNOTATION_box:'{"xMax":0.734126184237049,"xMin":0.7153799637169925,"yMax":0.3218358038768529,"yMin":0.30530216647662495}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"1351180831192986",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"deleted",CDF_ANNOTATION_version:"5"},source:"job:8624150428511301",id:7639416011454431,lastUpdatedTime:1594139107925,createdTime:1593788143307},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-KA-9101",metadata:{CDF_ANNOTATION_box:'{"xMax":0.17274742995363837,"xMin":0.1324329772223342,"yMax":0.7927594070695553,"yMin":0.7879133409350058}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"3047932288982463",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:7701769820871487,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:"pnid_annotation",description:'"COUNTING OF ""BOILER"" SPARE PARTS"',metadata:{CDF_ANNOTATION_box:'{"xMin":0.31813890878043405,"yMin":0.3498402555910543,"xMax":0.3497669246447064,"yMax":0.402555910543131}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"7405826029540927",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5"},source:"email:arne.kvadsheim@cognite.com",id:7845953982940547,lastUpdatedTime:1598351231073,createdTime:1598351231073},{type:"cognite_annotation",subtype:"PH-S-1305",metadata:{CDF_ANNOTATION_box:'{"xMax":0.4663865566253662,"xMin":0.4478991627693176,"yMax":0.3876337707042694,"yMin":0.3781212866306305}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"5326102006389244",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"deleted",CDF_ANNOTATION_version:"5"},source:"job:862631401852743",id:7878358707446333,lastUpdatedTime:1593419148471,createdTime:1593002142525},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-KA-9101",metadata:{CDF_ANNOTATION_box:'{"xMax":0.1535980649062689,"xMin":0.10098770409191696,"yMax":0.6847206385404789,"yMin":0.6798745724059293}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"3047932288982463",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:7900432774432440,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:"PH-S-1305",metadata:{CDF_ANNOTATION_box:'{"xMax":0.4663865566253662,"xMin":0.4478991627693176,"yMax":0.3876337707042694,"yMin":0.3781212866306305}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"5326102006389244",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"deleted",CDF_ANNOTATION_version:"5"},source:"job:6277962336874576",id:8186274386717231,lastUpdatedTime:1593419134842,createdTime:1592999397092},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-KA-9101",metadata:{CDF_ANNOTATION_box:'{"xMax":0.5371900826446281,"xMin":0.4878048780487805,"yMax":0.049885974914481185,"yMin":0.03990877993158496}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"3047932288982463",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:8308402605709573,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:"pnid_annotation",description:"23-KA-9101",metadata:{CDF_ANNOTATION_box:'{"xMax":0.556137875428341,"xMin":0.5055432372505543,"yMax":0.8469213226909921,"yMin":0.8358038768529077}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"3047932288982463",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"unhandled",CDF_ANNOTATION_version:"5"},source:"job:3425030520931466",id:8373211813941993,lastUpdatedTime:1597233855648,createdTime:1597233855648},{type:"cognite_annotation",subtype:"pnid_annotation",description:'"COUNTING OF ""BALLAST/BILGE SYSTEMS"" SPARE PARTS',metadata:{CDF_ANNOTATION_box:'{"xMin":0.2639194530131101,"yMin":0.4329073482428115,"xMax":0.296677040872535,"yMax":0.48083067092651754}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_resource_external_id:"3851005878284980",CDF_ANNOTATION_resource_type:"asset",CDF_ANNOTATION_status:"verified",CDF_ANNOTATION_version:"5",CDF_ANNOTATION_page:"1"},source:"email:arne.kvadsheim@cognite.com",id:8578873357196321,lastUpdatedTime:1598349949694,createdTime:1598349949694},{type:"cognite_annotation",subtype:"pnid_annotation",description:"david",metadata:{CDF_ANNOTATION_box:'{"xMin":0.6195874527313318,"yMin":0.5553191489361702,"xMax":0.794079836590885,"yMax":0.676595744680851}',CDF_ANNOTATION_file_external_id:"PH-ME-P-0153-001.pdf",CDF_ANNOTATION_status:"deleted",CDF_ANNOTATION_version:"5"},source:"email:david.liu@cognite.com",id:8710908745302571,lastUpdatedTime:1598885035802,createdTime:1598885032294}],orcResults=[{boundingBox:{xMax:.17019607843137255,xMin:.1392156862745098,yMax:.09451681308694335,yMin:.061193577703726146},confidence:1,text:"A"},{boundingBox:{xMax:.28470588235294114,xMin:.17058823529411765,yMax:.09451681308694335,yMin:.06028476219327476},confidence:1,text:"Simple"},{boundingBox:{xMax:.3811764705882353,xMin:.2980392156862745,yMax:.0884580430172675,yMin:.06270827022114511},confidence:1,text:"PDF"},{boundingBox:{xMax:.46431372549019606,xMin:.3984313725490196,yMax:.08876098152075129,yMin:.0630112087246289},confidence:1,text:"File"},{boundingBox:{xMax:.14784313725490195,xMin:.11764705882352941,yMax:.1299606179945471,yMin:.12117540139351711},confidence:1,text:"This"},{boundingBox:{xMax:.16352941176470587,xMin:.15372549019607842,yMax:.1299606179945471,yMin:.12117540139351711},confidence:1,text:"is"},{boundingBox:{xMax:.1776470588235294,xMin:.17019607843137255,yMax:.1299606179945471,yMin:.12359890942138746},confidence:1,text:"a"},{boundingBox:{xMax:.2192156862745098,xMin:.18352941176470589,yMax:.1299606179945471,yMin:.12117540139351711},confidence:1,text:"small"},{boundingBox:{xMax:.32745098039215687,xMin:.22588235294117645,yMax:.1299606179945471,yMin:.12117540139351711},confidence:1,text:"demonstration"},{boundingBox:{xMax:.36039215686274506,xMin:.3349019607843137,yMax:.13177824901544985,yMin:.12117540139351711},confidence:1,text:".pdf"},{boundingBox:{xMax:.3854901960784314,xMin:.36549019607843136,yMax:.1299606179945471,yMin:.12117540139351711},confidence:1,text:"file"},{boundingBox:{xMax:.3956862745098039,xMin:.39137254901960783,yMax:.12693123295970918,yMin:.1260224174492578},confidence:1,text:"-"},{boundingBox:{xMax:.14235294117647057,xMin:.11725490196078431,yMax:.16237503786731294,yMin:.1514692517418964},confidence:1,text:"just"},{boundingBox:{xMax:.16588235294117645,xMin:.14784313725490195,yMax:.16055740684641018,yMin:.1514692517418964},confidence:1,text:"for"},{boundingBox:{xMax:.19607843137254902,xMin:.17215686274509803,yMax:.16055740684641018,yMin:.15389275976976674},confidence:1,text:"use"},{boundingBox:{xMax:.21294117647058822,xMin:.20313725490196077,yMax:.1602544683429264,yMin:.1514692517418964},confidence:1,text:"in"},{boundingBox:{xMax:.2407843137254902,xMin:.2196078431372549,yMax:.16055740684641018,yMin:.1514692517418964},confidence:1,text:"the"},{boundingBox:{xMax:.2909803921568627,xMin:.24705882352941175,yMax:.16055740684641018,yMin:.1514692517418964},confidence:1,text:"Virtual"},{boundingBox:{xMax:.3741176470588235,xMin:.2984313725490196,yMax:.16055740684641018,yMin:.1514692517418964},confidence:1,text:"Mechanics"},{boundingBox:{xMax:.44,xMin:.3803921568627451,yMax:.16055740684641018,yMin:.1514692517418964},confidence:1,text:"tutorials."},{boundingBox:{xMax:.4823529411764706,xMin:.44745098039215686,yMax:.16055740684641018,yMin:.1514692517418964},confidence:1,text:"More"},{boundingBox:{xMax:.5172549019607843,xMin:.48823529411764705,yMax:.16055740684641018,yMin:.15207512874886397},confidence:1,text:"text."},{boundingBox:{xMax:.5509803921568627,xMin:.523921568627451,yMax:.16055740684641018,yMin:.1514692517418964},confidence:1,text:"And"},{boundingBox:{xMax:.5929411764705882,xMin:.5580392156862745,yMax:.16055740684641018,yMin:.15389275976976674},confidence:1,text:"more"},{boundingBox:{xMax:.14666666666666667,xMin:.11764705882352941,yMax:.17570433202059982,yMin:.16722205392305362},confidence:1,text:"text."},{boundingBox:{xMax:.1803921568627451,xMin:.15333333333333332,yMax:.17570433202059982,yMin:.16661617691608605},confidence:1,text:"And"},{boundingBox:{xMax:.2223529411764706,xMin:.18784313725490195,yMax:.17570433202059982,yMin:.16903968494395638},confidence:1,text:"more"},{boundingBox:{xMax:.2572549019607843,xMin:.22823529411764704,yMax:.17570433202059982,yMin:.16722205392305362},confidence:1,text:"text."},{boundingBox:{xMax:.2909803921568627,xMin:.26431372549019605,yMax:.17570433202059982,yMin:.16661617691608605},confidence:1,text:"And"},{boundingBox:{xMax:.3333333333333333,xMin:.2984313725490196,yMax:.17570433202059982,yMin:.16903968494395638},confidence:1,text:"more"},{boundingBox:{xMax:.36823529411764705,xMin:.33921568627450976,yMax:.17570433202059982,yMin:.16722205392305362},confidence:1,text:"text."},{boundingBox:{xMax:.40196078431372545,xMin:.3749019607843137,yMax:.17570433202059982,yMin:.16661617691608605},confidence:1,text:"And"},{boundingBox:{xMax:.44431372549019604,xMin:.4094117647058823,yMax:.17570433202059982,yMin:.16903968494395638},confidence:1,text:"more"},{boundingBox:{xMax:.4788235294117647,xMin:.4498039215686274,yMax:.17570433202059982,yMin:.16722205392305362},confidence:1,text:"text."},{boundingBox:{xMax:.14549019607843136,xMin:.1180392156862745,yMax:.20569524386549531,yMin:.1966070887609815},confidence:1,text:"And"},{boundingBox:{xMax:.18705882352941175,xMin:.15215686274509804,yMax:.20569524386549531,yMin:.19903059678885185},confidence:1,text:"more"},{boundingBox:{xMax:.22196078431372548,xMin:.19294117647058823,yMax:.20569524386549531,yMin:.1972129657679491},confidence:1,text:"text."},{boundingBox:{xMax:.256078431372549,xMin:.22862745098039214,yMax:.20569524386549531,yMin:.1966070887609815},confidence:1,text:"And"},{boundingBox:{xMax:.2980392156862745,xMin:.26313725490196077,yMax:.20569524386549531,yMin:.19903059678885185},confidence:1,text:"more"},{boundingBox:{xMax:.33294117647058824,xMin:.3035294117647059,yMax:.20569524386549531,yMin:.1972129657679491},confidence:1,text:"text."},{boundingBox:{xMax:.36705882352941177,xMin:.3396078431372549,yMax:.20569524386549531,yMin:.1966070887609815},confidence:1,text:"And"},{boundingBox:{xMax:.40862745098039216,xMin:.3737254901960784,yMax:.20569524386549531,yMin:.19903059678885185},confidence:1,text:"more"},{boundingBox:{xMax:.44352941176470584,xMin:.4145098039215686,yMax:.20569524386549531,yMin:.1972129657679491},confidence:1,text:"text."},{boundingBox:{xMax:.47764705882352937,xMin:.45019607843137255,yMax:.20569524386549531,yMin:.1966070887609815},confidence:1,text:"And"},{boundingBox:{xMax:.5196078431372548,xMin:.48470588235294115,yMax:.20569524386549531,yMin:.19903059678885185},confidence:1,text:"more"},{boundingBox:{xMax:.5545098039215686,xMin:.5250980392156862,yMax:.20569524386549531,yMin:.1972129657679491},confidence:1,text:"text."},{boundingBox:{xMax:.5886274509803922,xMin:.5611764705882353,yMax:.20569524386549531,yMin:.1966070887609815},confidence:1,text:"And"},{boundingBox:{xMax:.6301960784313725,xMin:.5952941176470588,yMax:.20569524386549531,yMin:.19903059678885185},confidence:1,text:"more"},{boundingBox:{xMax:.14666666666666667,xMin:.11764705882352941,yMax:.22084216903968495,yMin:.21235989094213875},confidence:1,text:"text."},{boundingBox:{xMax:.1807843137254902,xMin:.15333333333333332,yMax:.22084216903968495,yMin:.21175401393517115},confidence:1,text:"And"},{boundingBox:{xMax:.2227450980392157,xMin:.18784313725490195,yMax:.22084216903968495,yMin:.2138745834595577},confidence:1,text:"more"},{boundingBox:{xMax:.2572549019607843,xMin:.22823529411764704,yMax:.22084216903968495,yMin:.21235989094213875},confidence:1,text:"text."},{boundingBox:{xMax:.3137254901960784,xMin:.26509803921568625,yMax:.2223568615571039,yMin:.21175401393517115},confidence:1,text:"Boring,"},{boundingBox:{xMax:.3635294117647059,xMin:.3203921568627451,yMax:.22053923053620114,yMin:.2141775219630415},confidence:1,text:"zzzzz."},{boundingBox:{xMax:.3976470588235294,xMin:.37019607843137253,yMax:.22084216903968495,yMin:.21175401393517115},confidence:1,text:"And"},{boundingBox:{xMax:.44,xMin:.40470588235294114,yMax:.22084216903968495,yMin:.2138745834595577},confidence:1,text:"more"},{boundingBox:{xMax:.4745098039215686,xMin:.4454901960784314,yMax:.22084216903968495,yMin:.21235989094213875},confidence:1,text:"text."},{boundingBox:{xMax:.5086274509803921,xMin:.48117647058823526,yMax:.22084216903968495,yMin:.21175401393517115},confidence:1,text:"And"},{boundingBox:{xMax:.5505882352941176,xMin:.5156862745098039,yMax:.22084216903968495,yMin:.2138745834595577},confidence:1,text:"more"},{boundingBox:{xMax:.5850980392156863,xMin:.556078431372549,yMax:.22084216903968495,yMin:.21235989094213875},confidence:1,text:"text."},{boundingBox:{xMax:.6192156862745097,xMin:.591764705882353,yMax:.22084216903968495,yMin:.21175401393517115},confidence:1,text:"And"},{boundingBox:{xMax:.15372549019607842,xMin:.1188235294117647,yMax:.2359890942138746,yMin:.22902150863374734},confidence:1,text:"more"},{boundingBox:{xMax:.18823529411764706,xMin:.1592156862745098,yMax:.2359890942138746,yMin:.2275068161163284},confidence:1,text:"text."},{boundingBox:{xMax:.2223529411764706,xMin:.1949019607843137,yMax:.2359890942138746,yMin:.2269009391093608},confidence:1,text:"And"},{boundingBox:{xMax:.2647058823529412,xMin:.22941176470588234,yMax:.2359890942138746,yMin:.22902150863374734},confidence:1,text:"more"},{boundingBox:{xMax:.2992156862745098,xMin:.27019607843137255,yMax:.2359890942138746,yMin:.2275068161163284},confidence:1,text:"text."},{boundingBox:{xMax:.3333333333333333,xMin:.30588235294117644,yMax:.2359890942138746,yMin:.2269009391093608},confidence:1,text:"And"},{boundingBox:{xMax:.37529411764705883,xMin:.3403921568627451,yMax:.2359890942138746,yMin:.22902150863374734},confidence:1,text:"more"},{boundingBox:{xMax:.40980392156862744,xMin:.38078431372549015,yMax:.2359890942138746,yMin:.2275068161163284},confidence:1,text:"text."},{boundingBox:{xMax:.44431372549019604,xMin:.4168627450980392,yMax:.2359890942138746,yMin:.2269009391093608},confidence:1,text:"And"},{boundingBox:{xMax:.48627450980392156,xMin:.45098039215686275,yMax:.2359890942138746,yMin:.22902150863374734},confidence:1,text:"more"},{boundingBox:{xMax:.5207843137254902,xMin:.49176470588235294,yMax:.2359890942138746,yMin:.2275068161163284},confidence:1,text:"text."},{boundingBox:{xMax:.5549019607843138,xMin:.5274509803921569,yMax:.2359890942138746,yMin:.2269009391093608},confidence:1,text:"And"},{boundingBox:{xMax:.5972549019607842,xMin:.5619607843137254,yMax:.2359890942138746,yMin:.22902150863374734},confidence:1,text:"more"},{boundingBox:{xMax:.6313725490196078,xMin:.6023529411764705,yMax:.2359890942138746,yMin:.2275068161163284},confidence:1,text:"text."},{boundingBox:{xMax:.14509803921568626,xMin:.1180392156862745,yMax:.25113601938806424,yMin:.24204786428355043},confidence:1,text:"And"},{boundingBox:{xMax:.18705882352941175,xMin:.15215686274509804,yMax:.25113601938806424,yMin:.24447137231142077},confidence:1,text:"more"},{boundingBox:{xMax:.22196078431372548,xMin:.19294117647058823,yMax:.25113601938806424,yMin:.24265374129051803},confidence:1,text:"text."},{boundingBox:{xMax:.2556862745098039,xMin:.22862745098039214,yMax:.25113601938806424,yMin:.24204786428355043},confidence:1,text:"And"},{boundingBox:{xMax:.2980392156862745,xMin:.26313725490196077,yMax:.25113601938806424,yMin:.24447137231142077},confidence:1,text:"more"},{boundingBox:{xMax:.33294117647058824,xMin:.3035294117647059,yMax:.25113601938806424,yMin:.24265374129051803},confidence:1,text:"text."},{boundingBox:{xMax:.14509803921568626,xMin:.1180392156862745,yMax:.28112693123295973,yMin:.2720387761284459},confidence:1,text:"And"},{boundingBox:{xMax:.18705882352941175,xMin:.15215686274509804,yMax:.28112693123295973,yMin:.2744622841563163},confidence:1,text:"more"},{boundingBox:{xMax:.22196078431372548,xMin:.19333333333333333,yMax:.28112693123295973,yMin:.27264465313541353},confidence:1,text:"text."},{boundingBox:{xMax:.2556862745098039,xMin:.22862745098039214,yMax:.28112693123295973,yMin:.2720387761284459},confidence:1,text:"And"},{boundingBox:{xMax:.2980392156862745,xMin:.26313725490196077,yMax:.28112693123295973,yMin:.2744622841563163},confidence:1,text:"more"},{boundingBox:{xMax:.33294117647058824,xMin:.30392156862745096,yMax:.28112693123295973,yMin:.27264465313541353},confidence:1,text:"text."},{boundingBox:{xMax:.36666666666666664,xMin:.3396078431372549,yMax:.28112693123295973,yMin:.2720387761284459},confidence:1,text:"And"},{boundingBox:{xMax:.40862745098039216,xMin:.3737254901960784,yMax:.28112693123295973,yMin:.2744622841563163},confidence:1,text:"more"},{boundingBox:{xMax:.44352941176470584,xMin:.4149019607843137,yMax:.28112693123295973,yMin:.27264465313541353},confidence:1,text:"text."},{boundingBox:{xMax:.4772549019607843,xMin:.45019607843137255,yMax:.28112693123295973,yMin:.2720387761284459},confidence:1,text:"And"},{boundingBox:{xMax:.5196078431372548,xMin:.48470588235294115,yMax:.28112693123295973,yMin:.2744622841563163},confidence:1,text:"more"},{boundingBox:{xMax:.5545098039215686,xMin:.5254901960784314,yMax:.28112693123295973,yMin:.27264465313541353},confidence:1,text:"text."},{boundingBox:{xMax:.5882352941176471,xMin:.5611764705882353,yMax:.28112693123295973,yMin:.2720387761284459},confidence:1,text:"And"},{boundingBox:{xMax:.6301960784313725,xMin:.5952941176470588,yMax:.28112693123295973,yMin:.2744622841563163},confidence:1,text:"more"},{boundingBox:{xMax:.14666666666666667,xMin:.11764705882352941,yMax:.29627385640714937,yMin:.28779157830960317},confidence:1,text:"text."},{boundingBox:{xMax:.1803921568627451,xMin:.15333333333333332,yMax:.29627385640714937,yMin:.28718570130263554},confidence:1,text:"And"},{boundingBox:{xMax:.2223529411764706,xMin:.18784313725490195,yMax:.29627385640714937,yMin:.28960920933050593},confidence:1,text:"more"},{boundingBox:{xMax:.2572549019607843,xMin:.22823529411764704,yMax:.29627385640714937,yMin:.28779157830960317},confidence:1,text:"text."},{boundingBox:{xMax:.2909803921568627,xMin:.26431372549019605,yMax:.29627385640714937,yMin:.28718570130263554},confidence:1,text:"And"},{boundingBox:{xMax:.3333333333333333,xMin:.2984313725490196,yMax:.29627385640714937,yMin:.28960920933050593},confidence:1,text:"more"},{boundingBox:{xMax:.36823529411764705,xMin:.33921568627450976,yMax:.29627385640714937,yMin:.28779157830960317},confidence:1,text:"text."},{boundingBox:{xMax:.4101960784313725,xMin:.376078431372549,yMax:.29627385640714937,yMin:.28718570130263554},confidence:1,text:"Even"},{boundingBox:{xMax:.4564705882352941,xMin:.41764705882352937,yMax:.29627385640714937,yMin:.28960920933050593},confidence:1,text:"more."},{boundingBox:{xMax:.5352941176470588,xMin:.46352941176470586,yMax:.29627385640714937,yMin:.28688276279915176},confidence:1,text:"Continued"},{boundingBox:{xMax:.5580392156862745,xMin:.5419607843137255,yMax:.29627385640714937,yMin:.28960920933050593},confidence:1,text:"on"},{boundingBox:{xMax:.5996078431372549,xMin:.5650980392156862,yMax:.2986973644350197,yMin:.28960920933050593},confidence:1,text:"page"},{boundingBox:{xMax:.6129411764705882,xMin:.6054901960784314,yMax:.29597091790366553,yMin:.2874886398061194},confidence:1,text:"2"},{boundingBox:{xMax:.6305882352941177,xMin:.6203921568627451,yMax:.29597091790366553,yMin:.2950621023932142},confidence:1,text:"..."}],randomId=__webpack_require__(200),pnid=__webpack_require__(776),pnid_default=__webpack_require__.n(pnid),img_pnid=__webpack_require__(499),img_pnid_default=__webpack_require__.n(img_pnid);function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  width: 100%;\n  height: 600px;\n  background: grey;\n"]);return _templateObject=function _templateObject(){return data},data}var _getDownloadUrls,_retrieve,_post,_create,_update,_getDownloadUrls2,_retrieve2,_post2,_create2,_update2,_getDownloadUrls3,_retrieve3,_post3,_create3,_update3,pdfFile={id:1,lastUpdatedTime:new Date,uploaded:!1,createdTime:new Date,name:"Random File",mimeType:"application/pdf"},imgFile={id:1,lastUpdatedTime:new Date,uploaded:!1,createdTime:new Date,name:"Random File",mimeType:"image/png"},imgSdkThreeAnnotations={events:{list:function list(){return{autoPagingToArray:(_autoPagingToArray=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.abrupt("return",threeAnnotationsResponse);case 1:case"end":return _context.stop()}}),_callee)}))),function autoPagingToArray(){return _autoPagingToArray.apply(this,arguments)})};var _autoPagingToArray},update:(_update=asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(){var _len,annotations,_key,_args2=arguments;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:for(_len=_args2.length,annotations=new Array(_len),_key=0;_key<_len;_key++)annotations[_key]=_args2[_key];return _context2.abrupt("return",annotations.map((function(el){return el.annotation})));case 2:case"end":return _context2.stop()}}),_callee2)}))),function update(){return _update.apply(this,arguments)}),create:(_create=asyncToGenerator_default()(regenerator_default.a.mark((function _callee3(){var _len2,annotations,_key2,_args3=arguments;return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:for(_len2=_args3.length,annotations=new Array(_len2),_key2=0;_key2<_len2;_key2++)annotations[_key2]=_args3[_key2];return _context3.abrupt("return",annotations.map((function(el){return Object.assign({},el,{id:Object(randomId.a)()})})));case 2:case"end":return _context3.stop()}}),_callee3)}))),function create(){return _create.apply(this,arguments)})},post:(_post=asyncToGenerator_default()(regenerator_default.a.mark((function _callee4(){return regenerator_default.a.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.abrupt("return",{data:{items:[{annotations:orcResults}]}});case 1:case"end":return _context4.stop()}}),_callee4)}))),function post(){return _post.apply(this,arguments)}),files:{retrieve:(_retrieve=asyncToGenerator_default()(regenerator_default.a.mark((function _callee5(){return regenerator_default.a.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.abrupt("return",[imgFile]);case 1:case"end":return _context5.stop()}}),_callee5)}))),function retrieve(){return _retrieve.apply(this,arguments)}),getDownloadUrls:(_getDownloadUrls=asyncToGenerator_default()(regenerator_default.a.mark((function _callee6(){return regenerator_default.a.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.abrupt("return",[{downloadUrl:img_pnid_default.a}]);case 1:case"end":return _context6.stop()}}),_callee6)}))),function getDownloadUrls(){return _getDownloadUrls.apply(this,arguments)})}},imgSdk={events:{list:function list(){return{autoPagingToArray:(_autoPagingToArray2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee7(){return regenerator_default.a.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:return _context7.abrupt("return",response);case 1:case"end":return _context7.stop()}}),_callee7)}))),function autoPagingToArray(){return _autoPagingToArray2.apply(this,arguments)})};var _autoPagingToArray2},update:(_update2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee8(){var _len3,annotations,_key3,_args8=arguments;return regenerator_default.a.wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:for(_len3=_args8.length,annotations=new Array(_len3),_key3=0;_key3<_len3;_key3++)annotations[_key3]=_args8[_key3];return _context8.abrupt("return",annotations.map((function(el){return el.annotation})));case 2:case"end":return _context8.stop()}}),_callee8)}))),function update(){return _update2.apply(this,arguments)}),create:(_create2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee9(){var _len4,annotations,_key4,_args9=arguments;return regenerator_default.a.wrap((function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:for(_len4=_args9.length,annotations=new Array(_len4),_key4=0;_key4<_len4;_key4++)annotations[_key4]=_args9[_key4];return _context9.abrupt("return",annotations.map((function(el){return Object.assign({},el,{id:Object(randomId.a)()})})));case 2:case"end":return _context9.stop()}}),_callee9)}))),function create(){return _create2.apply(this,arguments)})},post:(_post2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee10(){return regenerator_default.a.wrap((function _callee10$(_context10){for(;;)switch(_context10.prev=_context10.next){case 0:return _context10.abrupt("return",{data:{items:[{annotations:orcResults}]}});case 1:case"end":return _context10.stop()}}),_callee10)}))),function post(){return _post2.apply(this,arguments)}),files:{retrieve:(_retrieve2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee11(){return regenerator_default.a.wrap((function _callee11$(_context11){for(;;)switch(_context11.prev=_context11.next){case 0:return _context11.abrupt("return",[imgFile]);case 1:case"end":return _context11.stop()}}),_callee11)}))),function retrieve(){return _retrieve2.apply(this,arguments)}),getDownloadUrls:(_getDownloadUrls2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee12(){return regenerator_default.a.wrap((function _callee12$(_context12){for(;;)switch(_context12.prev=_context12.next){case 0:return _context12.abrupt("return",[{downloadUrl:img_pnid_default.a}]);case 1:case"end":return _context12.stop()}}),_callee12)}))),function getDownloadUrls(){return _getDownloadUrls2.apply(this,arguments)})}},pdfSdk={events:{list:function list(){return{autoPagingToArray:(_autoPagingToArray3=asyncToGenerator_default()(regenerator_default.a.mark((function _callee13(){return regenerator_default.a.wrap((function _callee13$(_context13){for(;;)switch(_context13.prev=_context13.next){case 0:return _context13.abrupt("return",response);case 1:case"end":return _context13.stop()}}),_callee13)}))),function autoPagingToArray(){return _autoPagingToArray3.apply(this,arguments)})};var _autoPagingToArray3},update:(_update3=asyncToGenerator_default()(regenerator_default.a.mark((function _callee14(){var _len5,annotations,_key5,_args14=arguments;return regenerator_default.a.wrap((function _callee14$(_context14){for(;;)switch(_context14.prev=_context14.next){case 0:for(_len5=_args14.length,annotations=new Array(_len5),_key5=0;_key5<_len5;_key5++)annotations[_key5]=_args14[_key5];return _context14.abrupt("return",annotations.map((function(el){return el.annotation})));case 2:case"end":return _context14.stop()}}),_callee14)}))),function update(){return _update3.apply(this,arguments)}),create:(_create3=asyncToGenerator_default()(regenerator_default.a.mark((function _callee15(){var _len6,annotations,_key6,_args15=arguments;return regenerator_default.a.wrap((function _callee15$(_context15){for(;;)switch(_context15.prev=_context15.next){case 0:for(_len6=_args15.length,annotations=new Array(_len6),_key6=0;_key6<_len6;_key6++)annotations[_key6]=_args15[_key6];return _context15.abrupt("return",annotations.map((function(el){return Object.assign({},el,{id:Object(randomId.a)()})})));case 2:case"end":return _context15.stop()}}),_callee15)}))),function create(){return _create3.apply(this,arguments)})},post:(_post3=asyncToGenerator_default()(regenerator_default.a.mark((function _callee16(){return regenerator_default.a.wrap((function _callee16$(_context16){for(;;)switch(_context16.prev=_context16.next){case 0:return _context16.abrupt("return",{data:{items:[{annotations:orcResults}]}});case 1:case"end":return _context16.stop()}}),_callee16)}))),function post(){return _post3.apply(this,arguments)}),files:{retrieve:(_retrieve3=asyncToGenerator_default()(regenerator_default.a.mark((function _callee17(){return regenerator_default.a.wrap((function _callee17$(_context17){for(;;)switch(_context17.prev=_context17.next){case 0:return _context17.abrupt("return",[pdfFile]);case 1:case"end":return _context17.stop()}}),_callee17)}))),function retrieve(){return _retrieve3.apply(this,arguments)}),getDownloadUrls:(_getDownloadUrls3=asyncToGenerator_default()(regenerator_default.a.mark((function _callee18(){return regenerator_default.a.wrap((function _callee18$(_context18){for(;;)switch(_context18.prev=_context18.next){case 0:return _context18.abrupt("return",[{downloadUrl:pnid_default.a}]);case 1:case"end":return _context18.stop()}}),_callee18)}))),function getDownloadUrls(){return _getDownloadUrls3.apply(this,arguments)})}},Container=styled_components_browser_esm.a.div(_templateObject()),stubObserverObj=function stubObserverObj(_){return null};try{Container.displayName="Container",Container.__docgenInfo={description:"",displayName:"Container",props:{ref:{defaultValue:null,description:"",name:"ref",required:!1,type:{name:"((instance: HTMLDivElement | null) => void) | RefObject<HTMLDivElement> | null | undefined"}},theme:{defaultValue:null,description:"",name:"theme",required:!1,type:{name:"any"}},as:{defaultValue:null,description:"",name:"as",required:!1,type:{name:"undefined"}},forwardedAs:{defaultValue:null,description:"",name:"forwardedAs",required:!1,type:{name:"undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/utils.tsx#Container"]={docgenInfo:Container.__docgenInfo,name:"Container",path:"stories/utils.tsx#Container"})}catch(__react_docgen_typescript_loader_error){}try{stubObserverObj.displayName="stubObserverObj",stubObserverObj.__docgenInfo={description:"",displayName:"stubObserverObj",props:{sdk:{defaultValue:null,description:"The sdk that was provided via provider",name:"sdk",required:!0,type:{name:"CogniteClient"}},page:{defaultValue:null,description:"The current page, available via `usePage()`",name:"page",required:!0,type:{name:"number"}},setPage:{defaultValue:null,description:"Set the current page, available via `usePage()`",name:"setPage",required:!0,type:{name:"Dispatch<SetStateAction<number>>"}},totalPages:{defaultValue:null,description:"The total number of pages, available via `usePage()`",name:"totalPages",required:!0,type:{name:"number"}},file:{defaultValue:null,description:"The current file",name:"file",required:!1,type:{name:"FileInfo | undefined"}},selectedAnnotations:{defaultValue:null,description:"The current annotation, available via `useSelectedAnnotations()`",name:"selectedAnnotations",required:!0,type:{name:"(ProposedCogniteAnnotation | CogniteAnnotation)[]"}},setSelectedAnnotations:{defaultValue:null,description:"Set the current annotation, available via `useSelectedAnnotations()`",name:"setSelectedAnnotations",required:!0,type:{name:"Dispatch<SetStateAction<(ProposedCogniteAnnotation | CogniteAnnotation)[]>>"}},annotations:{defaultValue:null,description:"Annotations to display, available via `useAnnotations()`",name:"annotations",required:!0,type:{name:"(ProposedCogniteAnnotation | CogniteAnnotation)[]"}},setAnnotations:{defaultValue:null,description:"Set the annotations to display, useful if you want to modify annotations across views under the context, available via useAnnotations()",name:"setAnnotations",required:!0,type:{name:"(annotations: (ProposedCogniteAnnotation | CogniteAnnotation)[]) => void"}},query:{defaultValue:null,description:"The search query, available via `useViewerQuery()`",name:"query",required:!0,type:{name:"string"}},setQuery:{defaultValue:null,description:"Set the file search query, available via `useViewerQuery()`",name:"setQuery",required:!0,type:{name:"Dispatch<SetStateAction<string>>"}},isLoading:{defaultValue:null,description:"Is the file loading, available via `useIsFileLoading()`",name:"isLoading",required:!0,type:{name:"boolean"}},zoomIn:{defaultValue:null,description:"zoomIn() will zoom the viewer in, available via `useZoomControls()`",name:"zoomIn",required:!0,type:{name:"ViewerZoomFunction | undefined"}},zoomOut:{defaultValue:null,description:"zoomOut() will zoom the viewer out, available via `useZoomControls()`",name:"zoomOut",required:!0,type:{name:"ViewerZoomFunction | undefined"}},zoomOnAnnotation:{defaultValue:null,description:"zoomOnAnnotation(annotation) centers and zooms the file on a particular annotation",name:"zoomOnAnnotation",required:!0,type:{name:"ViewerZoomControlledFunction | undefined"}},reset:{defaultValue:null,description:"reset() reset the zoom and position, available via `useZoomControls()`",name:"reset",required:!0,type:{name:"ViewerZoomFunction | undefined"}},download:{defaultValue:null,description:"download() will allow you to download the file (and decide if annotations should be drawn on top), available via `useDownload()`",name:"download",required:!0,type:{name:"DownloadFileFunction | undefined"}},extractFromCanvas:{defaultValue:null,description:"extractFromCanvas() will allow you to extract part of the PDF as an image string, available via `useExtractFromCanvas()`",name:"extractFromCanvas",required:!0,type:{name:"ExtractFromCanvasFunction | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["stories/utils.tsx#stubObserverObj"]={docgenInfo:stubObserverObj.__docgenInfo,name:"stubObserverObj",path:"stories/utils.tsx#stubObserverObj"})}catch(__react_docgen_typescript_loader_error){}},44:function(module,__webpack_exports__,__webpack_require__){"use strict";var _ReactPictureAnnotation__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(325);__webpack_require__.d(__webpack_exports__,"ReactPictureAnnotation",(function(){return _ReactPictureAnnotation__WEBPACK_IMPORTED_MODULE_0__.a}));__webpack_require__(329),__webpack_require__(196);var _Annotation__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(750);__webpack_require__.o(_Annotation__WEBPACK_IMPORTED_MODULE_3__,"CogniteFileViewer")&&__webpack_require__.d(__webpack_exports__,"CogniteFileViewer",(function(){return _Annotation__WEBPACK_IMPORTED_MODULE_3__.CogniteFileViewer}));var _Cognite__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(769);__webpack_require__.d(__webpack_exports__,"CogniteFileViewer",(function(){return _Cognite__WEBPACK_IMPORTED_MODULE_4__.a}))},499:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/pnid.5014ac02.jpg"},740:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"simple",(function(){return simple})),__webpack_require__.d(__webpack_exports__,"_AllowCustomization_",(function(){return _AllowCustomization_})),__webpack_require__.d(__webpack_exports__,"_AllowControlledEditing_",(function(){return _AllowControlledEditing_})),__webpack_require__.d(__webpack_exports__,"_SplitContextAndViewer_",(function(){return _SplitContextAndViewer_})),__webpack_require__.d(__webpack_exports__,"_CustomizedAnnotations_",(function(){return _CustomizedAnnotations_})),__webpack_require__.d(__webpack_exports__,"_ZoomOnSelectedAnnotation_",(function(){return _ZoomOnSelectedAnnotation_})),__webpack_require__.d(__webpack_exports__,"_BoxAndArrows_",(function(){return _BoxAndArrows_})),__webpack_require__.d(__webpack_exports__,"_Playground_",(function(){return _Playground_}));__webpack_require__(12),__webpack_require__(33),__webpack_require__(10),__webpack_require__(17),__webpack_require__(0);var _mdx_js_react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(7),_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(59),_utils__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(43),_src__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(44),_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(84);function _extends(){return(_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target}).apply(this,arguments)}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var layoutProps={};function MDXContent(_ref){var components=_ref.components,props=_objectWithoutProperties(_ref,["components"]);return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("wrapper",_extends({},layoutProps,props,{components:components,mdxType:"MDXLayout"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Meta,{title:"Cognite File Viewer",component:_src__WEBPACK_IMPORTED_MODULE_8__.CogniteFileViewer,decorators:[function(storyFn){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_utils__WEBPACK_IMPORTED_MODULE_7__.a,{mdxType:"Container"},storyFn())}],mdxType:"Meta"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h1",{id:"cognitefileviewer"},"CogniteFileViewer"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"Cognite File Viewer is easiest way to view files in CDF with annotations displayed on top."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"There are 2 ways to use this FileViewer, the simple way and the advanced way."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h2",{id:"simple-viewer"},"Simple Viewer"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"The simple viewer will cover all the basic use case if you simply need to:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("li",{parentName:"ul"},"Preview a file with all the annotations on top"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("li",{parentName:"ul"},"Zoom, pan, pinch, navigate across pages"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("li",{parentName:"ul"},"Get a callback when an annotation is clicked"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("li",{parentName:"ul"},"Download, search in a file"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("li",{parentName:"ul"},"Customize annotations' appearance, viewer controls etc.")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"If you need to modify the annotations from CDF and change them before supplying them to the viewer, or need to allow for add/edit annotation boxes, view the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("a",{href:"#advanced-viewer"},"Advanced Viewer Section")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"To use the viewer simply import the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"CogniteFileViewer")," and supply it a ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"sdk")," and a ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"file"),", as show below. You will have access to all the other props in the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("a",{href:"#props"},"Props Section"),"."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("strong",{parentName:"p"},"NOTE:")," Avoid using ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"annotations")," to supply additional annotations, this will be explained in the next section"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Canvas,{mdxType:"Canvas"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Story,{name:"Simple",mdxType:"Story"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_src__WEBPACK_IMPORTED_MODULE_8__.CogniteFileViewer,{sdk:_utils__WEBPACK_IMPORTED_MODULE_7__.c,file:_utils__WEBPACK_IMPORTED_MODULE_7__.b,mdxType:"CogniteFileViewer"}))),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h2",{id:"advanced-viewer"},"Advanced Viewer"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"This is much more useful for people who want to:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("li",{parentName:"ul"},"Modify annotations from CDF to add/edit/remove annotations and supply them to the viewer"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("li",{parentName:"ul"},"Allow for creating/editing annotation via drag-and-create process")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"In both cases, you would set ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"disableAutoFetch={true}")," and supply ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"annotations")," to the viewer. The sample code below will explain further"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Canvas,{mdxType:"Canvas"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Story,{story:_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.AllowCustomization,name:"_AllowCustomization_",mdxType:"Story"})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"Here is a demo of the more advanced case with editing enabled and display an annotation selected at start."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Canvas,{mdxType:"Canvas"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Story,{story:_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.AllowControlledEditing,name:"_AllowControlledEditing_",mdxType:"Story"})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h2",{id:"pro-viewer"},"Pro Viewer"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"Sometimes you want various views to also share access to the same annotations, props as the viewer. Hence we have a ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"ContextProvider")," and ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"FileViewer")," seperated so you can add other components and allow them to change properties, access props and viewer callback with ease."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Canvas,{mdxType:"Canvas"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Story,{story:_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.SplitContextAndViewer,name:"_SplitContextAndViewer_",mdxType:"Story"})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h2",{id:"props"},"Props"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"CogniteFileViewer")," supports and uses ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("strong",{parentName:"p"},"ALL")," props from ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"CogniteFileViewer.Provider")," and ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"CogniteFileViewer.FileViewer")," combined."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h3",{id:"cognitefileviewerprovider-props"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"h3"},"CogniteFileViewer.Provider")," Props"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.ArgsTable,{of:_src__WEBPACK_IMPORTED_MODULE_8__.CogniteFileViewer.Provider,mdxType:"ArgsTable"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h3",{id:"cognitefileviewerfileviewer-props"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"h3"},"CogniteFileViewer.FileViewer")," Props"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.ArgsTable,{of:_src__WEBPACK_IMPORTED_MODULE_8__.CogniteFileViewer.FileViewer,mdxType:"ArgsTable"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h3",{id:"available-context-propshooks-from-cognitefileviewercontext"},"Available context props/hooks from ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"h3"},"CogniteFileViewer.Context")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.ArgsTable,{of:_utils__WEBPACK_IMPORTED_MODULE_7__.g,mdxType:"ArgsTable"}),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h2",{id:"customized-annotations"},"Customized annotations"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"You can customize annotations via the advanced CogniteFileViewer. To do that, you need to pass an ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"allowCustomAnnotations")," flag to the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"<CogniteFileViewer>")," component."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"When the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"allowCustomAnnotations")," flag equals ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"true"),", you can pass an additional argument in your annotation object - ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"mark"),". Here you can define your custom annotation shape, as well as determine if an annotation is a highlight (which basically just adds padding to the box)."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("code",_extends({parentName:"pre"},{}),"{\n  mark: {\n    backgroundColor?: string; // this must be in hex or string format\n    strokeColor?: string;\n    strokeWidth?: number;\n    highlight?: boolean;\n    draw?: (\n      canvas: CanvasRenderingContext2D,\n      x: number,\n      y: number,\n      width: number,\n      height: number\n    ) => void;\n  }\n}\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"The ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"draw()")," function allows you to define a canvas and draw any shape you like. Example of what the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"draw()")," function might look like is in the story below."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Canvas,{mdxType:"Canvas"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Story,{story:_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.CustomizedAnnotations,name:"_CustomizedAnnotations_",mdxType:"Story"})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h2",{id:"programatically-zoom-on-selected-annotation"},"Programatically zoom on selected annotation"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Canvas,{mdxType:"Canvas"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Story,{story:_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.ZoomOnSelectedAnnotation,name:"_ZoomOnSelectedAnnotation_",mdxType:"Story"})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h2",{id:"box-and-arrows"},"Box and arrows"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Canvas,{mdxType:"Canvas"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Story,{story:_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.BoxAndArrows,name:"_BoxAndArrows_",mdxType:"Story"})),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"You can add an additional info box to every annotation, connected to it with an arrow."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h3",{id:"customizing-the-box"},"Customizing the box"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"To add an arrow box to the annotation, pass a ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"renderArrowPreview")," field to the CogniteFileViewer. This component will get connected to the annotation with an arrow. You can style it however you want!\nThere is one info box per annotation, therefore you can pass ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"undefined")," if you do not wish for the box to appear for a particular annotation."),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h3",{id:"offset-of-the-arrow-boxes"},"Offset of the arrow boxes"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"If you want to customize arrow boxes in other fields than the connected component, you can pass an optional ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"arrowPreviewOptions")," prop:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("code",_extends({parentName:"pre"},{}),"  arrowPreviewOptions: {\n    baseOffset?: { \n      x?: number, \n      y?: number \n    },\n    customOffset?: {\n      [annotationId]: {\n        x?: number.\n        y?: number\n      }\n    }\n  }\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("ul",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"li"},"baseOffset")," field creates an offset for all of the rendered boxes. The reference point is the top left corner of an annotation. If it's not provided, the offset defaults to ","[-40, -40]"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("li",{parentName:"ul"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"li"},"customOffset")," customizes the offset for the particular boxes, identified by the ID of annotation they are connected to. It overwrites the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"li"},"baseOffset")," value")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h3",{id:"saving-the-position-of-the-dragged-box"},"Saving the position of the dragged box"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"You can drag all of the boxes around, but their positions will reset once the component rerenders. If you want to get the position where the arrow box was dragged to, you have to use ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"onArrowBoxMove")," method:"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("pre",null,Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("code",_extends({parentName:"pre"},{}),"  onArrowBoxMove = ({ annotationId: string|number, offsetX?: number, offsetY?: number }) => void\n")),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("p",null,"It is a callback that allows you to access the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"offsetX")," and ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"offsetY")," for the dragged arrow box, identified by the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"annotationId")," field.\nYou can store that value somewhere, and then pass it back to the ",Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("inlineCode",{parentName:"p"},"arrowPreviewOptions.customOffset[annotationId]")," if you want to recreate it!"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)("h2",{id:"playground"},"Playground"),Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Canvas,{mdxType:"Canvas"},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.Story,{story:_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.Playground,name:"_Playground_",mdxType:"Story"})))}MDXContent.displayName="MDXContent",MDXContent.isMDXComponent=!0;var simple=function simple(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_src__WEBPACK_IMPORTED_MODULE_8__.CogniteFileViewer,{sdk:_utils__WEBPACK_IMPORTED_MODULE_7__.c,file:_utils__WEBPACK_IMPORTED_MODULE_7__.b})};simple.displayName="simple",simple.storyName="Simple",simple.parameters={storySource:{source:"<CogniteFileViewer sdk={imgSdk} file={imgFile} />"}};var _AllowCustomization_=_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.AllowCustomization,_AllowControlledEditing_=_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.AllowControlledEditing,_SplitContextAndViewer_=_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.SplitContextAndViewer,_CustomizedAnnotations_=_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.CustomizedAnnotations,_ZoomOnSelectedAnnotation_=_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.ZoomOnSelectedAnnotation,_BoxAndArrows_=_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.BoxAndArrows,_Playground_=_cognite_stories_tsx__WEBPACK_IMPORTED_MODULE_9__.Playground,componentMeta={title:"Cognite File Viewer",decorators:[function(storyFn){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_utils__WEBPACK_IMPORTED_MODULE_7__.a,null,storyFn())}],component:_src__WEBPACK_IMPORTED_MODULE_8__.CogniteFileViewer,includeStories:["simple","_AllowCustomization_","_AllowControlledEditing_","_SplitContextAndViewer_","_CustomizedAnnotations_","_ZoomOnSelectedAnnotation_","_BoxAndArrows_","_Playground_"]},mdxStoryNameToKey={Simple:"simple",_AllowCustomization_:"_AllowCustomization_",_AllowControlledEditing_:"_AllowControlledEditing_",_SplitContextAndViewer_:"_SplitContextAndViewer_",_CustomizedAnnotations_:"_CustomizedAnnotations_",_ZoomOnSelectedAnnotation_:"_ZoomOnSelectedAnnotation_",_BoxAndArrows_:"_BoxAndArrows_",_Playground_:"_Playground_"};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs=Object.assign({},componentMeta.parameters.docs||{},{page:function page(){return Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(_storybook_addon_docs_blocks__WEBPACK_IMPORTED_MODULE_6__.AddContext,{mdxStoryNameToKey:mdxStoryNameToKey,mdxComponentMeta:componentMeta},Object(_mdx_js_react__WEBPACK_IMPORTED_MODULE_5__.mdx)(MDXContent,null))}}),__webpack_exports__.default=componentMeta},741:function(module,exports){},750:function(module,exports){},769:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return CogniteFileViewer}));__webpack_require__(26),__webpack_require__(182),__webpack_require__(72),__webpack_require__(91),__webpack_require__(78),__webpack_require__(30),__webpack_require__(99),__webpack_require__(234),__webpack_require__(15),__webpack_require__(266),__webpack_require__(10),__webpack_require__(40),__webpack_require__(85),__webpack_require__(92);var taggedTemplateLiteral=__webpack_require__(65),taggedTemplateLiteral_default=__webpack_require__.n(taggedTemplateLiteral),regenerator=__webpack_require__(11),regenerator_default=__webpack_require__.n(regenerator),asyncToGenerator=(__webpack_require__(104),__webpack_require__(32)),asyncToGenerator_default=__webpack_require__.n(asyncToGenerator),slicedToArray=__webpack_require__(8),slicedToArray_default=__webpack_require__.n(slicedToArray),jsx_runtime=__webpack_require__(6),react=__webpack_require__(0),react_default=__webpack_require__.n(react),src=__webpack_require__(44),index_es=__webpack_require__(38),styled_components_browser_esm=__webpack_require__(46),dist_index_es=__webpack_require__(73),FileViewerContext=__webpack_require__(86);function _templateObject(){var data=taggedTemplateLiteral_default()(["\n  display: flex;\n  align-items: stretch;\n  input {\n    height: 32px;\n  }\n"]);return _templateObject=function _templateObject(){return data},data}var SearchField_SearchField=function SearchField(){var _useState=Object(react.useState)(!1),_useState2=slicedToArray_default()(_useState,2),open=_useState2[0],setOpen=_useState2[1],_useViewerQuery=Object(FileViewerContext.f)(),query=_useViewerQuery.query,setQuery=_useViewerQuery.setQuery,wrapperRef=react_default.a.createRef();return Object(react.useEffect)((function(){var _wrapperRef$current$q;open&&wrapperRef&&wrapperRef.current&&(null===(_wrapperRef$current$q=wrapperRef.current.querySelector("input"))||void 0===_wrapperRef$current$q||_wrapperRef$current$q.focus())}),[wrapperRef,open]),open?Object(jsx_runtime.jsxs)(Wrapper,{ref:wrapperRef,children:[Object(jsx_runtime.jsx)(index_es.d,{icon:"Search",type:"text",onChange:function onChange(e){return setQuery(e.target.value)},value:query}),Object(jsx_runtime.jsx)(index_es.a,{icon:"Close",onClick:function onClick(){setOpen(!1),setQuery("")}})]}):Object(jsx_runtime.jsx)(index_es.a,{icon:"Search",onClick:function onClick(){return setOpen(!0)}})};SearchField_SearchField.displayName="SearchField";var Wrapper=styled_components_browser_esm.a.div(_templateObject()),FileViewerUtils_selectAnnotationColor=function selectAnnotationColor(annotation){var isSelected=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return isSelected?index_es.b.midblue.hex():"asset"===annotation.resourceType?Object(dist_index_es.c)(annotation).includes("Model")?index_es.b["purple-3"].hex():index_es.b["purple-2"].hex():"file"===annotation.resourceType?Object(dist_index_es.c)(annotation).includes("Model")?index_es.b["midorange-3"].hex():index_es.b["midorange-2"].hex():"timeSeries"===annotation.resourceType?Object(dist_index_es.c)(annotation).includes("Model")?index_es.b["lightblue-3"].hex():index_es.b["lightblue-2"].hex():"sequence"===annotation.resourceType?Object(dist_index_es.c)(annotation).includes("Model")?index_es.b["yellow-3"].hex():index_es.b["yellow-2"].hex():"event"===annotation.resourceType?Object(dist_index_es.c)(annotation).includes("Model")?index_es.b["pink-3"].hex():index_es.b["pink-2"].hex():index_es.b["text-color-secondary"].hex()},convertCogniteAnnotationToIAnnotation=function convertCogniteAnnotationToIAnnotation(el){var _el$mark,_el$mark2,_el$mark3,_el$mark4,_el$mark5,isSelected=arguments.length>1&&void 0!==arguments[1]&&arguments[1],allowCustomAnnotations=arguments.length>2?arguments[2]:void 0,isPending="string"==typeof el.id,annotation={id:"".concat(el.id),comment:el.label||"No Label",page:el.page,mark:{type:"RECT",x:el.box.xMin,y:el.box.yMin,width:el.box.xMax-el.box.xMin,height:el.box.yMax-el.box.yMin,strokeWidth:2,strokeColor:isPending?"yellow":FileViewerUtils_selectAnnotationColor(el,isSelected)}};allowCustomAnnotations&&((null==el||null===(_el$mark=el.mark)||void 0===_el$mark?void 0:_el$mark.backgroundColor)&&(annotation.mark.backgroundColor=el.mark.backgroundColor),(null==el||null===(_el$mark2=el.mark)||void 0===_el$mark2?void 0:_el$mark2.strokeColor)&&(annotation.mark.strokeColor=el.mark.strokeColor),void 0!==(null==el||null===(_el$mark3=el.mark)||void 0===_el$mark3?void 0:_el$mark3.strokeWidth)&&(annotation.mark.strokeWidth=el.mark.strokeWidth),(null==el||null===(_el$mark4=el.mark)||void 0===_el$mark4?void 0:_el$mark4.draw)&&(annotation.mark.draw=el.mark.draw),(null==el||null===(_el$mark5=el.mark)||void 0===_el$mark5?void 0:_el$mark5.highlight)&&(annotation.mark.highlight=!0));return annotation},FileViewerUtils_isPreviewableImage=function isPreviewableImage(file){var _file$mimeType=file.mimeType,mimeType=void 0===_file$mimeType?"":_file$mimeType;return["png","jpeg","jpg","svg"].some((function(el){return mimeType.includes(el)}))},retrieveDownloadUrl=function(){var _ref=asyncToGenerator_default()(regenerator_default.a.mark((function _callee(client,fileId){var _yield$client$files$g,_yield$client$files$g2,downloadUrl;return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.prev=0,_context.next=3,client.files.getDownloadUrls([{id:fileId}]);case 3:return _yield$client$files$g=_context.sent,_yield$client$files$g2=slicedToArray_default()(_yield$client$files$g,1),downloadUrl=_yield$client$files$g2[0].downloadUrl,_context.abrupt("return",downloadUrl);case 9:return _context.prev=9,_context.t0=_context.catch(0),_context.abrupt("return",void 0);case 12:case"end":return _context.stop()}}),_callee,null,[[0,9]])})));return function retrieveDownloadUrl(_x,_x2){return _ref.apply(this,arguments)}}(),retrieveOCRResults=function(){var _ref2=asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(client,fileId){var _yield$client$post,_yield$client$post$da,annotations;return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.prev=0,_context2.next=3,client.post("/api/playground/projects/".concat(client.project,"/context/pnid/ocr"),{data:{fileId:fileId}});case 3:return _yield$client$post=_context2.sent,_yield$client$post$da=slicedToArray_default()(_yield$client$post.data.items,1),annotations=_yield$client$post$da[0].annotations,_context2.abrupt("return",annotations||[]);case 9:return _context2.prev=9,_context2.t0=_context2.catch(0),_context2.abrupt("return",[]);case 12:case"end":return _context2.stop()}}),_callee2,null,[[0,9]])})));return function retrieveOCRResults(_x3,_x4){return _ref2.apply(this,arguments)}}();try{FileViewerUtils_selectAnnotationColor.displayName="selectAnnotationColor",FileViewerUtils_selectAnnotationColor.__docgenInfo={description:"If there is no allowCustomAnnotations flag, those are the colors of the annotations.",displayName:"selectAnnotationColor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Cognite/FileViewerUtils.tsx#selectAnnotationColor"]={docgenInfo:FileViewerUtils_selectAnnotationColor.__docgenInfo,name:"selectAnnotationColor",path:"src/Cognite/FileViewerUtils.tsx#selectAnnotationColor"})}catch(__react_docgen_typescript_loader_error){}try{FileViewerUtils_isPreviewableImage.displayName="isPreviewableImage",FileViewerUtils_isPreviewableImage.__docgenInfo={description:"",displayName:"isPreviewableImage",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Cognite/FileViewerUtils.tsx#isPreviewableImage"]={docgenInfo:FileViewerUtils_isPreviewableImage.__docgenInfo,name:"isPreviewableImage",path:"src/Cognite/FileViewerUtils.tsx#isPreviewableImage"})}catch(__react_docgen_typescript_loader_error){}function _templateObject3(){var data=taggedTemplateLiteral_default()(["\n  display: inline-flex;\n  position: absolute;\n  z-index: 2;\n  right: 24px;\n  top: 24px;\n  align-items: stretch;\n\n  && > * {\n    margin-left: 8px;\n  }\n"]);return _templateObject3=function _templateObject3(){return data},data}function _templateObject2(){var data=taggedTemplateLiteral_default()(["\n  display: inline-flex;\n  position: absolute;\n  z-index: 2;\n  right: 24px;\n  bottom: 24px;\n  && #controls {\n    display: inline-flex;\n  }\n  && #controls > * {\n    border-radius: 0px;\n  }\n  && #controls > *:nth-child(1) {\n    border-top-left-radius: 4px;\n    border-bottom-left-radius: 4px;\n  }\n  && #controls > *:nth-last-child(1) {\n    border-top-right-radius: 4px;\n    border-bottom-right-radius: 4px;\n  }\n"]);return _templateObject2=function _templateObject2(){return data},data}function FileViewer_templateObject(){var data=taggedTemplateLiteral_default()(["\n  position: absolute;\n  left: 50%;\n  transform: translate(-50%, -50%);\n  bottom: 16px;\n  && {\n    background: #fff;\n    border-radius: 50px;\n    padding: 12px 24px;\n    box-shadow: 0px 0px 8px ",";\n  }\n"]);return FileViewer_templateObject=function _templateObject(){return data},data}var FileViewer_FileViewer=function FileViewer(_ref){var annotationsFromProps=_ref.annotations,_ref$allowCustomAnnot=_ref.allowCustomAnnotations,allowCustomAnnotations=void 0!==_ref$allowCustomAnnot&&_ref$allowCustomAnnot,fileFromProps=_ref.file,_ref$hideLabel=_ref.hideLabel,hideLabel=void 0===_ref$hideLabel||_ref$hideLabel,_ref$hoverable=_ref.hoverable,hoverable=void 0!==_ref$hoverable&&_ref$hoverable,_ref$editCallbacks=_ref.editCallbacks,editCallbacks=void 0===_ref$editCallbacks?{onUpdate:function onUpdate(a){return a},onCreate:function onCreate(a){return a}}:_ref$editCallbacks,_ref$renderItemPrevie=_ref.renderItemPreview,_renderItemPreview=void 0===_ref$renderItemPrevie?function(){return Object(jsx_runtime.jsx)(jsx_runtime.Fragment,{})}:_ref$renderItemPrevie,creatable=_ref.creatable,editable=_ref.editable,selectedIds=_ref.selectedIds,_ref$pagination=_ref.pagination,pagination=void 0===_ref$pagination?"normal":_ref$pagination,_ref$hideControls=_ref.hideControls,hideControls=void 0!==_ref$hideControls&&_ref$hideControls,loader=_ref.loader,_ref$hideDownload=_ref.hideDownload,hideDownload=void 0!==_ref$hideDownload&&_ref$hideDownload,_ref$hideSearch=_ref.hideSearch,hideSearch=void 0!==_ref$hideSearch&&_ref$hideSearch,zoomOnAnnotation=_ref.zoomOnAnnotation,onAnnotationSelected=_ref.onAnnotationSelected,onArrowBoxMove=_ref.onArrowBoxMove,_ref$renderAnnotation=_ref.renderAnnotation,renderAnnotation=void 0===_ref$renderAnnotation?convertCogniteAnnotationToIAnnotation:_ref$renderAnnotation,renderArrowPreview=_ref.renderArrowPreview,arrowPreviewOptions=_ref.arrowPreviewOptions,onFileLoaded=_ref.onFileLoaded,_useContext=Object(react.useContext)(FileViewerContext.b),annotations=_useContext.annotations,setAnnotations=_useContext.setAnnotations,page=_useContext.page,setFile=_useContext.setFile,setPage=_useContext.setPage,sdk=_useContext.sdk,file=_useContext.file,selectedAnnotations=_useContext.selectedAnnotations,setSelectedAnnotations=_useContext.setSelectedAnnotations,setDownload=_useContext.setDownload,setExtractFromCanvas=_useContext.setExtractFromCanvas,setReset=_useContext.setReset,setZoomIn=_useContext.setZoomIn,setZoomOut=_useContext.setZoomOut,zoomIn=_useContext.zoomIn,zoomOut=_useContext.zoomOut,reset=_useContext.reset,totalPages=_useContext.totalPages,setTotalPages=_useContext.setTotalPages,download=_useContext.download,query=_useContext.query;Object(react.useEffect)((function(){annotationsFromProps&&setAnnotations(annotationsFromProps)}),[annotationsFromProps,setAnnotations]),Object(react.useEffect)((function(){fileFromProps&&setFile(fileFromProps)}),[fileFromProps,setFile]);var combinedIAnnotations=Object(react.useMemo)((function(){return annotations.map((function(el){return renderAnnotation(el,selectedAnnotations.some((function(item){return function isSameResource(a,b){return a.resourceType===b.resourceType&&!!(a.resourceExternalId&&a.resourceExternalId===b.resourceExternalId||a.resourceId&&a.resourceId===b.resourceId)}(el,item)})),!!allowCustomAnnotations)}))}),[annotations,selectedAnnotations]),_useState=Object(react.useState)(combinedIAnnotations||[]),_useState2=slicedToArray_default()(_useState,2),visibleAnnotations=_useState2[0],setVisibleAnnotations=_useState2[1],wrapperRef=Object(react.useRef)(null),annotatorRef=Object(react.useRef)(null),_useState3=Object(react.useState)(0),_useState4=slicedToArray_default()(_useState3,2),height=_useState4[0],setHeight=_useState4[1],_useState5=Object(react.useState)(0),_useState6=slicedToArray_default()(_useState5,2),width=_useState6[0],setWidth=_useState6[1],_useState7=Object(react.useState)(!0),_useState8=slicedToArray_default()(_useState7,2),loading=_useState8[0],setLoading=_useState8[1],_useState9=Object(react.useState)([]),_useState10=slicedToArray_default()(_useState9,2),textboxes=_useState10[0],setTextboxes=_useState10[1],_useState11=Object(react.useState)(void 0),_useState12=slicedToArray_default()(_useState11,2),previewUrl=_useState12[0],setPreviewUrl=_useState12[1],fileId=file?file.id:void 0,textboxesToShow=Object(react.useMemo)((function(){return textboxes.filter((function(box){return 0!==query.length&&query.toLowerCase().split(",").some((function(el){return box.text.toLowerCase().includes(el)}))})).map((function(el){return{id:JSON.stringify(el.boundingBox),mark:{x:el.boundingBox.xMin,y:el.boundingBox.yMin,width:el.boundingBox.xMax-el.boundingBox.xMin,height:el.boundingBox.yMax-el.boundingBox.yMin,backgroundColor:"".concat(index_es.b["midblue-4"].hex(),"88"),strokeWidth:2,highlight:!0},disableClick:!0}}))}),[textboxes,query]);Object(react.useEffect)((function(){asyncToGenerator_default()(regenerator_default.a.mark((function _callee(){return regenerator_default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!fileId){_context.next=6;break}return _context.t0=setTextboxes,_context.next=4,retrieveOCRResults(sdk,fileId);case 4:_context.t1=_context.sent,(0,_context.t0)(_context.t1);case 6:case"end":return _context.stop()}}),_callee)})))()}),[fileId,setTextboxes]),Object(react.useEffect)((function(){asyncToGenerator_default()(regenerator_default.a.mark((function _callee2(){return regenerator_default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(!fileId){_context2.next=9;break}return setPreviewUrl(void 0),setLoading(!0),_context2.t0=setPreviewUrl,_context2.next=6,retrieveDownloadUrl(sdk,fileId);case 6:_context2.t1=_context2.sent,(0,_context2.t0)(_context2.t1),setLoading(!1);case 9:case"end":return _context2.stop()}}),_callee2)})))()}),[sdk,fileId]),Object(react.useEffect)((function(){annotatorRef&&annotatorRef.current&&(setDownload((function(){return annotatorRef.current.downloadFile})),setExtractFromCanvas((function(){return annotatorRef.current.extractFromCanvas})),setZoomIn((function(){return annotatorRef.current.zoomIn})),setZoomOut((function(){return annotatorRef.current.zoomOut})),setReset((function(){return annotatorRef.current.reset})))}),[annotatorRef]),Object(react.useEffect)((function(){setVisibleAnnotations(combinedIAnnotations)}),[combinedIAnnotations]),Object(react.useEffect)((function(){wrapperRef.current&&(setHeight(wrapperRef.current.clientHeight),setWidth(wrapperRef.current.clientWidth))}),[wrapperRef]),Object(react.useEffect)((function(){var resizeListener=function resizeListener(){wrapperRef.current&&(setHeight(wrapperRef.current.clientHeight),setWidth(wrapperRef.current.clientWidth))};return window.addEventListener("resize",resizeListener),function(){window.removeEventListener("resize",resizeListener)}}),[]);var isImage=Object(react.useMemo)((function(){return!!file&&FileViewerUtils_isPreviewableImage(file)}),[file]),onUpdateAnnotation=function(){var _ref4=asyncToGenerator_default()(regenerator_default.a.mark((function _callee3(annotation){var foundAnno,pendingAnnotation;return regenerator_default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(!(foundAnno=annotations.find((function(el){return el.id===Number(annotation.id)||el.id===annotation.id})))){_context3.next=8;break}if(!(pendingAnnotation=editCallbacks.onUpdate(Object.assign({},foundAnno,{box:{xMin:annotation.mark.x,yMin:annotation.mark.y,xMax:annotation.mark.x+annotation.mark.width,yMax:annotation.mark.y+annotation.mark.height}})))){_context3.next=8;break}if("number"!=typeof pendingAnnotation.id){_context3.next=7;break}return _context3.next=7,Object(dist_index_es.e)(sdk,[{id:pendingAnnotation.id,annotation:pendingAnnotation,update:{box:{set:pendingAnnotation.box}}}]);case 7:setAnnotations(annotations.reduce((function(prev,el){return el.id!==Number(annotation.id)&&el.id!==annotation.id?prev.push(el):prev.push(pendingAnnotation),prev}),[]));case 8:case"end":return _context3.stop()}}),_callee3)})));return function onUpdateAnnotation(_x){return _ref4.apply(this,arguments)}}(),onCreateAnnotation=function(){var _ref5=asyncToGenerator_default()(regenerator_default.a.mark((function _callee4(annotation){var pendingAnnotation,_yield$createAnnotati,_yield$createAnnotati2,createdAnnotation;return regenerator_default.a.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(!(pendingAnnotation=editCallbacks.onCreate(Object.assign({status:"verified"},file.externalId?{fileExternalId:file.externalId}:{fileId:file.id},{version:dist_index_es.a,label:"",page:annotation.page||page,box:{xMin:annotation.mark.x,yMin:annotation.mark.y,xMax:annotation.mark.x+annotation.mark.width,yMax:annotation.mark.y+annotation.mark.height}})))){_context4.next=9;break}return _context4.next=4,Object(dist_index_es.b)(sdk,[pendingAnnotation]);case 4:_yield$createAnnotati=_context4.sent,_yield$createAnnotati2=slicedToArray_default()(_yield$createAnnotati,1),createdAnnotation=_yield$createAnnotati2[0],setAnnotations(annotations.concat([createdAnnotation])),setSelectedAnnotations([createdAnnotation]);case 9:case"end":return _context4.stop()}}),_callee4)})));return function onCreateAnnotation(_x2){return _ref5.apply(this,arguments)}}(),annotationData=Object(react.useMemo)((function(){return visibleAnnotations.filter((function(el){return 1===totalPages||el.page===page})).concat(textboxesToShow)}),[textboxesToShow,page,totalPages,visibleAnnotations]);return Object(jsx_runtime.jsxs)("div",{ref:wrapperRef,style:{width:"100%",height:"100%",position:"relative"},children:[loading&&Object(jsx_runtime.jsx)("div",{style:{position:"absolute",height:"100%",width:"100%"},children:loader}),Object(jsx_runtime.jsx)(src.ReactPictureAnnotation,{ref:annotatorRef,selectedIds:selectedIds,drawLabel:!hideLabel,hoverable:hoverable,editable:editable,annotationData:annotationData,onChange:function onChange(e){setVisibleAnnotations(visibleAnnotations.filter((function(el){return!(1===totalPages||el.page===page)})).concat(e.filter((function(el){return!textboxesToShow.some((function(box){return box.id===el.id}))}))))},onSelect:function onAnnotationSelect(ids){if(0===ids.length&&(setSelectedAnnotations([]),onAnnotationSelected&&onAnnotationSelected([])),selectedAnnotations.length!==ids.length||!selectedAnnotations.map((function(el){return"".concat(el.id)})).every((function(item){return ids.includes(item)}))){var newlySelectedAnnotations=annotations.filter((function(el){return ids.includes("".concat(el.id))}));newlySelectedAnnotations.length>0&&(setSelectedAnnotations(newlySelectedAnnotations),onAnnotationSelected&&onAnnotationSelected(newlySelectedAnnotations))}},onAnnotationCreate:onCreateAnnotation,onAnnotationUpdate:onUpdateAnnotation,pdf:file&&"application/pdf"===file.mimeType?previewUrl:void 0,image:file&&isImage?previewUrl:void 0,creatable:creatable,width:width,height:height,page:page,onLoading:function onLoading(isLoading){return setLoading(isLoading)},renderItemPreview:function renderItemPreview(items,maxHeight){var ids=items.map((function(el){return el.id})),currentAnnotations=annotations.filter((function(el){return ids.includes("".concat(el.id))}));return _renderItemPreview(currentAnnotations,maxHeight)},renderArrowPreview:renderArrowPreview,arrowPreviewOptions:arrowPreviewOptions,onArrowBoxMove:function onArrowBoxMoved(annotationId,offsetX,offsetY){onArrowBoxMove&&onArrowBoxMove({annotationId:annotationId,offsetX:offsetX,offsetY:offsetY})},onPDFLoaded:function(){var _ref6=asyncToGenerator_default()(regenerator_default.a.mark((function _callee5(_ref7){var pages;return regenerator_default.a.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:pages=_ref7.pages,setLoading(!1),setTotalPages(pages),onFileLoaded&&onFileLoaded();case 4:case"end":return _context5.stop()}}),_callee5)})));return function(_x3){return _ref6.apply(this,arguments)}}(),zoomOnAnnotation:zoomOnAnnotation}),totalPages>1&&pagination&&Object(jsx_runtime.jsx)(DocumentPagination,{total:totalPages,current:page||1,pageSize:1,showPrevNextJumpers:!0,simple:"small"===pagination,onChange:function onChange(newPageNum){return setPage&&setPage(newPageNum)}}),!hideControls&&Object(jsx_runtime.jsx)(Buttons,{children:Object(jsx_runtime.jsxs)("div",{id:"controls",children:[Object(jsx_runtime.jsx)(index_es.a,{onClick:function onClick(){zoomIn&&zoomIn()},icon:"ZoomIn"}),Object(jsx_runtime.jsx)(index_es.a,{icon:"Refresh",onClick:function onClick(){reset&&reset()}}),Object(jsx_runtime.jsx)(index_es.a,{icon:"ZoomOut",onClick:function onClick(){zoomOut&&zoomOut()}})]})}),Object(jsx_runtime.jsxs)(ToolingButtons,{children:[!hideSearch&&0!==textboxes.length&&Object(jsx_runtime.jsx)(SearchField_SearchField,{}),download&&!hideDownload&&Object(jsx_runtime.jsx)(index_es.c,{content:Object(jsx_runtime.jsxs)(index_es.e,{children:[Object(jsx_runtime.jsx)(index_es.e.Item,{onClick:function onClick(){return download(file?file.name:"export.pdf",!1,!1,!1)},children:"Original File"}),Object(jsx_runtime.jsx)(index_es.e.Item,{onClick:function onClick(){return download(file?file.name:"export.pdf",!1,!0,!0)},children:"File with Annotations"})]}),children:Object(jsx_runtime.jsx)(index_es.a,{icon:"Download"})})]})]})};FileViewer_FileViewer.displayName="FileViewer";var DocumentPagination=Object(styled_components_browser_esm.a)(index_es.f)(FileViewer_templateObject(),index_es.b["greyscale-grey3"].hex()),Buttons=styled_components_browser_esm.a.div(_templateObject2()),ToolingButtons=styled_components_browser_esm.a.div(_templateObject3());try{FileViewer_FileViewer.displayName="FileViewer",FileViewer_FileViewer.__docgenInfo={description:"",displayName:"FileViewer",props:{allowCustomAnnotations:{defaultValue:{value:!1},description:"If true, you can customize the color and shape of annotation boxes.",name:"allowCustomAnnotations",required:!1,type:{name:"boolean | undefined"}},file:{defaultValue:null,description:"File will tell the viewer what file to show.",name:"file",required:!1,type:{name:"FileInfo | undefined"}},editable:{defaultValue:null,description:"Should the label of the of the annotation be hidden",name:"editable",required:!1,type:{name:"boolean | undefined"}},creatable:{defaultValue:null,description:"Should users be able to create new annotations",name:"creatable",required:!1,type:{name:"boolean | undefined"}},hoverable:{defaultValue:{value:!1},description:"Should users be able to choose annotations purely using hovers? Useful in conjunction with `renderItemPreview`",name:"hoverable",required:!1,type:{name:"boolean | undefined"}},selectedIds:{defaultValue:null,description:"Used when an annotation needs to be selected on start",name:"selectedIds",required:!1,type:{name:"string[] | undefined"}},annotations:{defaultValue:null,description:"Used when `disableAutoFetch` is true to supply `annotations` to display",name:"annotations",required:!1,type:{name:"(ProposedCogniteAnnotation | CogniteAnnotation)[] | undefined"}},editCallbacks:{defaultValue:{value:"{\n    onUpdate: (a) => a,\n    onCreate: (a) => a,\n  } as ViewerEditCallbacks"},description:"Callbacks when something is created or edited. Return false from function if you want to handle it in a custom manner.",name:"editCallbacks",required:!1,type:{name:"ViewerEditCallbacks | undefined"}},renderAnnotation:{defaultValue:null,description:"Useful when in hover mode. Renders a small display of whatever you link near the box when something is selected.",name:"renderAnnotation",required:!1,type:{name:"((el: ProposedCogniteAnnotation | CogniteAnnotation, isSelected: boolean, allowCustomAnnotations: boolean) => IAnnotation<IRectShapeData>) | undefined"}},renderItemPreview:{defaultValue:{value:"() => <></>"},description:"Override how an annotation box is drawn on top of the file",name:"renderItemPreview",required:!1,type:{name:"RenderItemPreviewFunction | undefined"}},renderArrowPreview:{defaultValue:null,description:"Renders an always visible small draggable display connected to annotation with an arrow.",name:"renderArrowPreview",required:!1,type:{name:"RenderArrowPreviewFunction | undefined"}},arrowPreviewOptions:{defaultValue:null,description:"Options for the arrow preview, if it's defined.",name:"arrowPreviewOptions",required:!1,type:{name:"ArrowPreviewOptions | undefined"}},onArrowBoxMove:{defaultValue:null,description:"Callback when an arrow box belonging to an annotation is moved.\nUseful to save the new arrow box position so it can be preserved over page refresh.",name:"onArrowBoxMove",required:!1,type:{name:"((arrowBox: { annotationId: ReactText; offsetX?: number | undefined; offsetY?: number | undefined; }) => void) | undefined"}},onAnnotationSelected:{defaultValue:null,description:"Callback for when something is selected",name:"onAnnotationSelected",required:!1,type:{name:"((annotation: (ProposedCogniteAnnotation | CogniteAnnotation)[]) => void) | undefined"}},onFileLoaded:{defaultValue:null,description:"Callback function to be called when the file is loaded",name:"onFileLoaded",required:!1,type:{name:"(() => void) | undefined"}},pagination:{defaultValue:{value:"normal"},description:"Should pagination be shown, and what size? One page files will have no pagination displayed regardless of settings!",name:"pagination",required:!1,type:{name:'false | "small" | "normal" | undefined'}},hideLabel:{defaultValue:{value:!0},description:"Should controls (zoom levels) be hidden.",name:"hideLabel",required:!1,type:{name:"boolean | undefined"}},hideControls:{defaultValue:{value:!1},description:"Should users be able to edit existing annotations and add new ones",name:"hideControls",required:!1,type:{name:"boolean | undefined"}},hideDownload:{defaultValue:{value:!1},description:"Should hide the download button",name:"hideDownload",required:!1,type:{name:"boolean | undefined"}},hideSearch:{defaultValue:{value:!1},description:"Should hide the search field",name:"hideSearch",required:!1,type:{name:"boolean | undefined"}},loader:{defaultValue:null,description:"What to display while loading. Note this is NOT displayed when `file` is not set.",name:"loader",required:!1,type:{name:"ReactNode"}},zoomOnAnnotation:{defaultValue:null,description:"Sets the annotation that the file should zoom on",name:"zoomOnAnnotation",required:!1,type:{name:"{ annotation: CogniteAnnotation; scale?: number | undefined; } | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Cognite/FileViewer.tsx#FileViewer"]={docgenInfo:FileViewer_FileViewer.__docgenInfo,name:"FileViewer",path:"src/Cognite/FileViewer.tsx#FileViewer"})}catch(__react_docgen_typescript_loader_error){}var objectWithoutProperties=__webpack_require__(495),objectWithoutProperties_default=__webpack_require__.n(objectWithoutProperties),CombinedCogniteViewer_CombinedCogniteFileViewer=function CombinedCogniteFileViewer(_ref){var sdk=_ref.sdk,disableAutoFetch=_ref.disableAutoFetch,extraProps=objectWithoutProperties_default()(_ref,["sdk","disableAutoFetch"]);return Object(jsx_runtime.jsx)(FileViewerContext.a,{sdk:sdk,disableAutoFetch:disableAutoFetch,children:Object(jsx_runtime.jsx)(FileViewer_FileViewer,Object.assign({},extraProps))})};CombinedCogniteViewer_CombinedCogniteFileViewer.displayName="CombinedCogniteFileViewer";var CogniteFileViewer=Object.assign(CombinedCogniteViewer_CombinedCogniteFileViewer,{FileViewer:FileViewer_FileViewer,Provider:FileViewerContext.a,Context:FileViewerContext.b});try{CombinedCogniteViewer_CombinedCogniteFileViewer.displayName="CombinedCogniteFileViewer",CombinedCogniteViewer_CombinedCogniteFileViewer.__docgenInfo={description:"",displayName:"CombinedCogniteFileViewer",props:{sdk:{defaultValue:null,description:"A CogniteClient to supply to the viewer",name:"sdk",required:!0,type:{name:"CogniteClient"}},disableAutoFetch:{defaultValue:null,description:"Should fetching of annotations happen automatically? Unless you want to hook annotations fetching/storing into your store or augment annotations from CDF before sending into viewer, and you can trust the viewer to fetch annotations each time a file is supplied.",name:"disableAutoFetch",required:!1,type:{name:"boolean | undefined"}},allowCustomAnnotations:{defaultValue:null,description:"If true, you can customize the color and shape of annotation boxes.",name:"allowCustomAnnotations",required:!1,type:{name:"boolean | undefined"}},file:{defaultValue:null,description:"File will tell the viewer what file to show.",name:"file",required:!1,type:{name:"FileInfo | undefined"}},editable:{defaultValue:null,description:"Should the label of the of the annotation be hidden",name:"editable",required:!1,type:{name:"boolean | undefined"}},creatable:{defaultValue:null,description:"Should users be able to create new annotations",name:"creatable",required:!1,type:{name:"boolean | undefined"}},hoverable:{defaultValue:null,description:"Should users be able to choose annotations purely using hovers? Useful in conjunction with `renderItemPreview`",name:"hoverable",required:!1,type:{name:"boolean | undefined"}},selectedIds:{defaultValue:null,description:"Used when an annotation needs to be selected on start",name:"selectedIds",required:!1,type:{name:"string[] | undefined"}},annotations:{defaultValue:null,description:"Used when `disableAutoFetch` is true to supply `annotations` to display",name:"annotations",required:!1,type:{name:"(ProposedCogniteAnnotation | CogniteAnnotation)[] | undefined"}},editCallbacks:{defaultValue:null,description:"Callbacks when something is created or edited. Return false from function if you want to handle it in a custom manner.",name:"editCallbacks",required:!1,type:{name:"ViewerEditCallbacks | undefined"}},renderAnnotation:{defaultValue:null,description:"Useful when in hover mode. Renders a small display of whatever you link near the box when something is selected.",name:"renderAnnotation",required:!1,type:{name:"((el: ProposedCogniteAnnotation | CogniteAnnotation, isSelected: boolean, allowCustomAnnotations: boolean) => IAnnotation<IRectShapeData>) | undefined"}},renderItemPreview:{defaultValue:null,description:"Override how an annotation box is drawn on top of the file",name:"renderItemPreview",required:!1,type:{name:"RenderItemPreviewFunction | undefined"}},renderArrowPreview:{defaultValue:null,description:"Renders an always visible small draggable display connected to annotation with an arrow.",name:"renderArrowPreview",required:!1,type:{name:"RenderArrowPreviewFunction | undefined"}},arrowPreviewOptions:{defaultValue:null,description:"Options for the arrow preview, if it's defined.",name:"arrowPreviewOptions",required:!1,type:{name:"ArrowPreviewOptions | undefined"}},onArrowBoxMove:{defaultValue:null,description:"Callback when an arrow box belonging to an annotation is moved.\nUseful to save the new arrow box position so it can be preserved over page refresh.",name:"onArrowBoxMove",required:!1,type:{name:"((arrowBox: { annotationId: ReactText; offsetX?: number | undefined; offsetY?: number | undefined; }) => void) | undefined"}},onAnnotationSelected:{defaultValue:null,description:"Callback for when something is selected",name:"onAnnotationSelected",required:!1,type:{name:"((annotation: (ProposedCogniteAnnotation | CogniteAnnotation)[]) => void) | undefined"}},onFileLoaded:{defaultValue:null,description:"Callback function to be called when the file is loaded",name:"onFileLoaded",required:!1,type:{name:"(() => void) | undefined"}},pagination:{defaultValue:null,description:"Should pagination be shown, and what size? One page files will have no pagination displayed regardless of settings!",name:"pagination",required:!1,type:{name:'false | "small" | "normal" | undefined'}},hideLabel:{defaultValue:null,description:"Should controls (zoom levels) be hidden.",name:"hideLabel",required:!1,type:{name:"boolean | undefined"}},hideControls:{defaultValue:null,description:"Should users be able to edit existing annotations and add new ones",name:"hideControls",required:!1,type:{name:"boolean | undefined"}},hideDownload:{defaultValue:null,description:"Should hide the download button",name:"hideDownload",required:!1,type:{name:"boolean | undefined"}},hideSearch:{defaultValue:null,description:"Should hide the search field",name:"hideSearch",required:!1,type:{name:"boolean | undefined"}},loader:{defaultValue:null,description:"What to display while loading. Note this is NOT displayed when `file` is not set.",name:"loader",required:!1,type:{name:"ReactNode"}},zoomOnAnnotation:{defaultValue:null,description:"Sets the annotation that the file should zoom on",name:"zoomOnAnnotation",required:!1,type:{name:"{ annotation: CogniteAnnotation; scale?: number | undefined; } | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Cognite/CombinedCogniteViewer.tsx#CombinedCogniteFileViewer"]={docgenInfo:CombinedCogniteViewer_CombinedCogniteFileViewer.__docgenInfo,name:"CombinedCogniteFileViewer",path:"src/Cognite/CombinedCogniteViewer.tsx#CombinedCogniteFileViewer"})}catch(__react_docgen_typescript_loader_error){}try{FileViewer.displayName="FileViewer",FileViewer.__docgenInfo={description:"",displayName:"FileViewer",props:{allowCustomAnnotations:{defaultValue:{value:!1},description:"If true, you can customize the color and shape of annotation boxes.",name:"allowCustomAnnotations",required:!1,type:{name:"boolean | undefined"}},file:{defaultValue:null,description:"File will tell the viewer what file to show.",name:"file",required:!1,type:{name:"FileInfo | undefined"}},editable:{defaultValue:null,description:"Should the label of the of the annotation be hidden",name:"editable",required:!1,type:{name:"boolean | undefined"}},creatable:{defaultValue:null,description:"Should users be able to create new annotations",name:"creatable",required:!1,type:{name:"boolean | undefined"}},hoverable:{defaultValue:{value:!1},description:"Should users be able to choose annotations purely using hovers? Useful in conjunction with `renderItemPreview`",name:"hoverable",required:!1,type:{name:"boolean | undefined"}},selectedIds:{defaultValue:null,description:"Used when an annotation needs to be selected on start",name:"selectedIds",required:!1,type:{name:"string[] | undefined"}},annotations:{defaultValue:null,description:"Used when `disableAutoFetch` is true to supply `annotations` to display",name:"annotations",required:!1,type:{name:"(ProposedCogniteAnnotation | CogniteAnnotation)[] | undefined"}},editCallbacks:{defaultValue:{value:"{\n    onUpdate: (a) => a,\n    onCreate: (a) => a,\n  } as ViewerEditCallbacks"},description:"Callbacks when something is created or edited. Return false from function if you want to handle it in a custom manner.",name:"editCallbacks",required:!1,type:{name:"ViewerEditCallbacks | undefined"}},renderAnnotation:{defaultValue:null,description:"Useful when in hover mode. Renders a small display of whatever you link near the box when something is selected.",name:"renderAnnotation",required:!1,type:{name:"((el: ProposedCogniteAnnotation | CogniteAnnotation, isSelected: boolean, allowCustomAnnotations: boolean) => IAnnotation<IRectShapeData>) | undefined"}},renderItemPreview:{defaultValue:{value:"() => <></>"},description:"Override how an annotation box is drawn on top of the file",name:"renderItemPreview",required:!1,type:{name:"RenderItemPreviewFunction | undefined"}},renderArrowPreview:{defaultValue:null,description:"Renders an always visible small draggable display connected to annotation with an arrow.",name:"renderArrowPreview",required:!1,type:{name:"RenderArrowPreviewFunction | undefined"}},arrowPreviewOptions:{defaultValue:null,description:"Options for the arrow preview, if it's defined.",name:"arrowPreviewOptions",required:!1,type:{name:"ArrowPreviewOptions | undefined"}},onArrowBoxMove:{defaultValue:null,description:"Callback when an arrow box belonging to an annotation is moved.\nUseful to save the new arrow box position so it can be preserved over page refresh.",name:"onArrowBoxMove",required:!1,type:{name:"((arrowBox: { annotationId: ReactText; offsetX?: number | undefined; offsetY?: number | undefined; }) => void) | undefined"}},onAnnotationSelected:{defaultValue:null,description:"Callback for when something is selected",name:"onAnnotationSelected",required:!1,type:{name:"((annotation: (ProposedCogniteAnnotation | CogniteAnnotation)[]) => void) | undefined"}},onFileLoaded:{defaultValue:null,description:"Callback function to be called when the file is loaded",name:"onFileLoaded",required:!1,type:{name:"(() => void) | undefined"}},pagination:{defaultValue:{value:"normal"},description:"Should pagination be shown, and what size? One page files will have no pagination displayed regardless of settings!",name:"pagination",required:!1,type:{name:'false | "small" | "normal" | undefined'}},hideLabel:{defaultValue:{value:!0},description:"Should controls (zoom levels) be hidden.",name:"hideLabel",required:!1,type:{name:"boolean | undefined"}},hideControls:{defaultValue:{value:!1},description:"Should users be able to edit existing annotations and add new ones",name:"hideControls",required:!1,type:{name:"boolean | undefined"}},hideDownload:{defaultValue:{value:!1},description:"Should hide the download button",name:"hideDownload",required:!1,type:{name:"boolean | undefined"}},hideSearch:{defaultValue:{value:!1},description:"Should hide the search field",name:"hideSearch",required:!1,type:{name:"boolean | undefined"}},loader:{defaultValue:null,description:"What to display while loading. Note this is NOT displayed when `file` is not set.",name:"loader",required:!1,type:{name:"ReactNode"}},zoomOnAnnotation:{defaultValue:null,description:"Sets the annotation that the file should zoom on",name:"zoomOnAnnotation",required:!1,type:{name:"{ annotation: CogniteAnnotation; scale?: number | undefined; } | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Cognite/index.tsx#FileViewer"]={docgenInfo:FileViewer.__docgenInfo,name:"FileViewer",path:"src/Cognite/index.tsx#FileViewer"})}catch(__react_docgen_typescript_loader_error){}try{FileViewerProvider.displayName="FileViewerProvider",FileViewerProvider.__docgenInfo={description:"",displayName:"FileViewerProvider",props:{sdk:{defaultValue:null,description:"A CogniteClient to supply to the viewer",name:"sdk",required:!0,type:{name:"CogniteClient"}},disableAutoFetch:{defaultValue:{value:!1},description:"Should fetching of annotations happen automatically? Unless you want to hook annotations fetching/storing into your store or augment annotations from CDF before sending into viewer, and you can trust the viewer to fetch annotations each time a file is supplied.",name:"disableAutoFetch",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Cognite/index.tsx#FileViewerProvider"]={docgenInfo:FileViewerProvider.__docgenInfo,name:"FileViewerProvider",path:"src/Cognite/index.tsx#FileViewerProvider"})}catch(__react_docgen_typescript_loader_error){}try{selectAnnotationColor.displayName="selectAnnotationColor",selectAnnotationColor.__docgenInfo={description:"If there is no allowCustomAnnotations flag, those are the colors of the annotations.",displayName:"selectAnnotationColor",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Cognite/index.tsx#selectAnnotationColor"]={docgenInfo:selectAnnotationColor.__docgenInfo,name:"selectAnnotationColor",path:"src/Cognite/index.tsx#selectAnnotationColor"})}catch(__react_docgen_typescript_loader_error){}try{isPreviewableImage.displayName="isPreviewableImage",isPreviewableImage.__docgenInfo={description:"",displayName:"isPreviewableImage",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Cognite/index.tsx#isPreviewableImage"]={docgenInfo:isPreviewableImage.__docgenInfo,name:"isPreviewableImage",path:"src/Cognite/index.tsx#isPreviewableImage"})}catch(__react_docgen_typescript_loader_error){}},776:function(module,exports,__webpack_require__){module.exports=__webpack_require__.p+"static/media/pnid.b88dbff5.pdf"},805:function(module,exports,__webpack_require__){__webpack_require__(806),__webpack_require__(960),__webpack_require__(961),__webpack_require__(1193),__webpack_require__(1642),__webpack_require__(1676),__webpack_require__(1692),__webpack_require__(1697),__webpack_require__(1709),__webpack_require__(1798),__webpack_require__(1803),__webpack_require__(1805),module.exports=__webpack_require__(1811)},84:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"AllowCustomization",(function(){return AllowCustomization})),__webpack_require__.d(__webpack_exports__,"AllowControlledEditing",(function(){return AllowControlledEditing})),__webpack_require__.d(__webpack_exports__,"ZoomOnSelectedAnnotation",(function(){return ZoomOnSelectedAnnotation})),__webpack_require__.d(__webpack_exports__,"SplitContextAndViewer",(function(){return SplitContextAndViewer})),__webpack_require__.d(__webpack_exports__,"CustomizedAnnotations",(function(){return CustomizedAnnotations})),__webpack_require__.d(__webpack_exports__,"BoxAndArrows",(function(){return BoxAndArrows})),__webpack_require__.d(__webpack_exports__,"Playground",(function(){return Playground}));__webpack_require__(12),__webpack_require__(23),__webpack_require__(26),__webpack_require__(767),__webpack_require__(72),__webpack_require__(91),__webpack_require__(478),__webpack_require__(78),__webpack_require__(30),__webpack_require__(27),__webpack_require__(10),__webpack_require__(674),__webpack_require__(85),__webpack_require__(185);var _babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(801),_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14___default=__webpack_require__.n(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14__),_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(65),_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_15___default=__webpack_require__.n(_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_15__),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(11),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_18__=(__webpack_require__(104),__webpack_require__(32)),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_18___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_18__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(8),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(6),react__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(0),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(68),_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(118),_src__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(44),_utils__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(43),_cognite_annotations__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(73),_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(38),_src_Cognite_FileViewerContext__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(86),styled_components__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(46);function _templateObject3(){var data=_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_15___default()(["\n  display: flex;\n  flex-direction: row;\n  border-radius: 3px;\n  overflow: hidden;\n  box-sizing: border-box;\n  box-shadow: 0 0 5px ",";\n"]);return _templateObject3=function _templateObject3(){return data},data}function _templateObject2(){var data=_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_15___default()(["\n  padding: 4px;\n  background-color: ",";\n  color: ",";\n  box-sizing: border-box;\n  user-select: none;\n  font-size: 14px;\n  line-height: 20px;\n  font-weight: bold;\n  font-family: Inter, Verdana, Geneva, Tahoma, sans-serif;\n"]);return _templateObject2=function _templateObject2(){return data},data}function _templateObject(){var data=_babel_runtime_helpers_taggedTemplateLiteral__WEBPACK_IMPORTED_MODULE_15___default()(["\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  width: 250px;\n  height: 100%;\n  background: white;\n  padding: 8px;\n  & > * {\n    margin: 8px;\n  }\n"]);return _templateObject=function _templateObject(){return data},data}var AllowCustomization=function AllowCustomization(){var _useState=Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)([]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default()(_useState,2),annotations=_useState2[0],setAnnotations=_useState2[1];return Object(react__WEBPACK_IMPORTED_MODULE_21__.useEffect)((function(){_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_18___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.mark((function _callee(){var annotationsFromCdf;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,Object(_cognite_annotations__WEBPACK_IMPORTED_MODULE_26__.d)(_utils__WEBPACK_IMPORTED_MODULE_25__.f,_utils__WEBPACK_IMPORTED_MODULE_25__.e);case 2:annotationsFromCdf=_context.sent,setAnnotations(annotationsFromCdf.concat([{id:123,label:"David",createdTime:new Date,lastUpdatedTime:new Date,type:"tmp_annotation",status:"unhandled",box:{xMin:.1,xMax:.2,yMin:.1,yMax:.2},version:5,page:1,source:"tmp"}]));case 4:case"end":return _context.stop()}}),_callee)})))()}),[]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_src__WEBPACK_IMPORTED_MODULE_24__.CogniteFileViewer,{sdk:_utils__WEBPACK_IMPORTED_MODULE_25__.f,file:_utils__WEBPACK_IMPORTED_MODULE_25__.e,disableAutoFetch:!0,annotations:annotations})};AllowCustomization.displayName="AllowCustomization";var id=0,AllowControlledEditing=function AllowControlledEditing(){var _useState3=Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)([]),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default()(_useState3,2),annotations=_useState4[0],setAnnotations=_useState4[1];Object(react__WEBPACK_IMPORTED_MODULE_21__.useEffect)((function(){_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_18___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.mark((function _callee2(){return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:return _context2.t0=setAnnotations,_context2.next=3,Object(_cognite_annotations__WEBPACK_IMPORTED_MODULE_26__.d)(_utils__WEBPACK_IMPORTED_MODULE_25__.f,_utils__WEBPACK_IMPORTED_MODULE_25__.e);case 3:_context2.t1=_context2.sent,(0,_context2.t0)(_context2.t1);case 5:case"end":return _context2.stop()}}),_callee2)})))()}),[]);var callbacks=Object(react__WEBPACK_IMPORTED_MODULE_21__.useMemo)((function(){return{onCreate:function onCreate(annotation){return id+=1,setAnnotations(annotations.concat([Object.assign({},annotation,{id:id,createdTime:new Date,lastUpdatedTime:new Date})])),!1},onUpdate:function onUpdate(annotation){return setAnnotations(annotations.filter((function(el){return"".concat(el.id)!=="".concat(annotation.id)})).concat([annotation])),!1}}}),[annotations,setAnnotations]),_useState5=Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)(["406167784064508"]),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default()(_useState5,2),selectedIds=_useState6[0],setSelectedIds=_useState6[1];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_src__WEBPACK_IMPORTED_MODULE_24__.CogniteFileViewer,{sdk:_utils__WEBPACK_IMPORTED_MODULE_25__.c,file:_utils__WEBPACK_IMPORTED_MODULE_25__.b,disableAutoFetch:!0,annotations:annotations,editable:!0,editCallbacks:callbacks,selectedIds:selectedIds,onAnnotationSelected:function handleAnnotationSelection(selectedAnnotations){selectedAnnotations.length>0&&setSelectedIds(["".concat(selectedAnnotations[0].id)])},renderItemPreview:function renderItemPreview(anno){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("span",{children:anno[0].label}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__.a,{icon:"Delete",onClick:function onClick(){return setAnnotations(annotations.filter((function(el){return"".concat(el.id)!=="".concat(anno[0].id)})))}})]})}})};AllowControlledEditing.displayName="AllowControlledEditing";var Wrapper=styled_components__WEBPACK_IMPORTED_MODULE_29__.a.div(_templateObject()),ZoomOnSelectedAnnotation=function ZoomOnSelectedAnnotation(){var _useState7=Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)([]),_useState8=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default()(_useState7,2),annotations=_useState8[0],setAnnotations=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)(),_useState10=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default()(_useState9,2),zoomedAnnotation=_useState10[0],setZoomedAnnotation=_useState10[1];Object(react__WEBPACK_IMPORTED_MODULE_21__.useEffect)((function(){_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_18___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.mark((function _callee3(){var annotationsFromCdf;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:return _context3.next=2,Object(_cognite_annotations__WEBPACK_IMPORTED_MODULE_26__.d)(_utils__WEBPACK_IMPORTED_MODULE_25__.f,_utils__WEBPACK_IMPORTED_MODULE_25__.e);case 2:annotationsFromCdf=_context3.sent,setAnnotations(annotationsFromCdf.concat([{id:123,label:"David",createdTime:new Date,lastUpdatedTime:new Date,type:"tmp_annotation",status:"unhandled",box:{xMin:.1,xMax:.2,yMin:.1,yMax:.2},version:5,page:1,source:"tmp"}]));case 4:case"end":return _context3.stop()}}),_callee3)})))()}),[]);var onZoomOnRandomAnnotation=function onZoomOnRandomAnnotation(){var randomAnnotationIndex=Math.floor(Math.random()*annotations.length),randomAnnotation=annotations[randomAnnotationIndex];setZoomedAnnotation(randomAnnotation)};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{style:{height:"100%",width:"100%",display:"flex"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(Wrapper,{children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__.a,{onClick:function onClick(){return onZoomOnRandomAnnotation()},children:"Zoom on random annotation"})}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_src__WEBPACK_IMPORTED_MODULE_24__.CogniteFileViewer,{sdk:_utils__WEBPACK_IMPORTED_MODULE_25__.f,file:_utils__WEBPACK_IMPORTED_MODULE_25__.e,disableAutoFetch:!0,annotations:annotations,onFileLoaded:function onFileLoaded(){setTimeout((function(){onZoomOnRandomAnnotation()}),200)},zoomOnAnnotation:zoomedAnnotation&&{annotation:zoomedAnnotation,scale:.3}})]})};ZoomOnSelectedAnnotation.displayName="ZoomOnSelectedAnnotation";var SplitContextAndViewer=function SplitContextAndViewer(){var AnotherComponent=function AnotherComponent(){var download=Object(_src_Cognite_FileViewerContext__WEBPACK_IMPORTED_MODULE_28__.c)(),_useZoomControls=Object(_src_Cognite_FileViewerContext__WEBPACK_IMPORTED_MODULE_28__.g)(),zoomIn=_useZoomControls.zoomIn,zoomOut=_useZoomControls.zoomOut,reset=_useZoomControls.reset,extract=Object(_src_Cognite_FileViewerContext__WEBPACK_IMPORTED_MODULE_28__.d)(),_useSelectedAnnotatio=Object(_src_Cognite_FileViewerContext__WEBPACK_IMPORTED_MODULE_28__.e)(),selectedAnnotations=_useSelectedAnnotatio.selectedAnnotations,setSelectedAnnotations=_useSelectedAnnotatio.setSelectedAnnotations,selectedAnnotation=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default()(selectedAnnotations,1)[0];return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(Wrapper,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__.a,{onClick:function onClick(){return download("testing.pdf")},children:"Download"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__.a,{onClick:function onClick(){return zoomIn()},children:"Zoom In"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__.a,{onClick:function onClick(){return zoomOut()},children:"Zoom Out"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__.a,{onClick:function onClick(){return reset()},children:"Reset"}),selectedAnnotation&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__.a,{onClick:function onClick(){return setSelectedAnnotations([])},children:"Unselect Annotation"}),selectedAnnotation&&"".concat(selectedAnnotation.type,": ").concat(selectedAnnotation.description),selectedAnnotation&&Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("img",{style:{objectFit:"contain",width:"100%"},src:extract(selectedAnnotation.box.xMin,selectedAnnotation.box.yMin,selectedAnnotation.box.xMax-selectedAnnotation.box.xMin,selectedAnnotation.box.yMax-selectedAnnotation.box.yMin)})]})};return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_src__WEBPACK_IMPORTED_MODULE_24__.CogniteFileViewer.Provider,{sdk:_utils__WEBPACK_IMPORTED_MODULE_25__.f,children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{style:{height:"100%",width:"100%",display:"flex"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(AnotherComponent,{}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_src__WEBPACK_IMPORTED_MODULE_24__.CogniteFileViewer.FileViewer,{file:_utils__WEBPACK_IMPORTED_MODULE_25__.e,editable:!1})]})})};SplitContextAndViewer.displayName="SplitContextAndViewer";var CustomizedAnnotations=function CustomizedAnnotations(){var _useState11=Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)([]),_useState12=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default()(_useState11,2),annotations=_useState12[0],setAnnotations=_useState12[1],mark=[{backgroundColor:"#ff110055",strokeColor:"#26ff0055",strokeWidth:0},{draw:function draw(canvas,x,y,width,height){canvas.beginPath(),canvas.globalCompositeOperation="multiply",canvas.fillStyle="#26ff0055",canvas.arc(x+width/2,y+height/2,Math.min(height,width)/2,0,2*Math.PI),canvas.stroke(),canvas.fill()}},{draw:function draw(canvas,x,y,width,height){canvas.beginPath(),canvas.lineWidth=4,canvas.shadowBlur=10,canvas.shadowColor="#000033",canvas.fillStyle="#0000ff",canvas.lineTo(x+width-10,y),canvas.quadraticCurveTo(x+width,y,x+width,y+10),canvas.lineTo(x+width,y+height-10),canvas.quadraticCurveTo(x+width,y+height,x+width-10,y+height),canvas.lineTo(x+10,y+height),canvas.quadraticCurveTo(x,y+height,x,y+height-10),canvas.lineTo(x,y+10),canvas.quadraticCurveTo(x,y,x+10,y),canvas.stroke(),canvas.fill()}}];return Object(react__WEBPACK_IMPORTED_MODULE_21__.useEffect)((function(){_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_18___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.mark((function _callee4(){var rawAnnotations,customizedAnnotations;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:return _context4.next=2,Object(_cognite_annotations__WEBPACK_IMPORTED_MODULE_26__.d)(_utils__WEBPACK_IMPORTED_MODULE_25__.d,_utils__WEBPACK_IMPORTED_MODULE_25__.b);case 2:rawAnnotations=_context4.sent,customizedAnnotations=rawAnnotations.map((function(annotation,index){return Object.assign({},annotation,{mark:mark[index]})})),setAnnotations(customizedAnnotations);case 5:case"end":return _context4.stop()}}),_callee4)})))()}),[mark]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_src__WEBPACK_IMPORTED_MODULE_24__.CogniteFileViewer,{sdk:_utils__WEBPACK_IMPORTED_MODULE_25__.c,file:_utils__WEBPACK_IMPORTED_MODULE_25__.b,disableAutoFetch:!0,annotations:annotations,editable:!0,allowCustomAnnotations:!0})};CustomizedAnnotations.displayName="CustomizedAnnotations";var PreviewBox=styled_components__WEBPACK_IMPORTED_MODULE_29__.a.div(_templateObject2(),(function(_ref5){var color=_ref5.color;return null!=color?color:"#2D79CF"}),(function(_ref6){return _ref6.invert?_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__.b.black.hex():_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__.b.white.hex()})),BoxWrapper=styled_components__WEBPACK_IMPORTED_MODULE_29__.a.div(_templateObject3(),_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__.b["greyscale-grey6"].hex()),BoxAndArrows=function BoxAndArrows(){var _useState13=Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)([]),_useState14=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default()(_useState13,2),annotations=_useState14[0],setAnnotations=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)({annotationId:void 0,offsetX:void 0,offsetY:void 0}),_useState16=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default()(_useState15,2),arrowBox=_useState16[0],setArrowBox=_useState16[1];Object(react__WEBPACK_IMPORTED_MODULE_21__.useEffect)((function(){_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_18___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.mark((function _callee5(){var rawAnnotations;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:return _context5.next=2,Object(_cognite_annotations__WEBPACK_IMPORTED_MODULE_26__.d)(_utils__WEBPACK_IMPORTED_MODULE_25__.c,_utils__WEBPACK_IMPORTED_MODULE_25__.b);case 2:rawAnnotations=_context5.sent,setAnnotations(rawAnnotations);case 4:case"end":return _context5.stop()}}),_callee5)})))()}),[]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("div",{style:{display:"flex",width:"100%",height:"100%",backgroundColor:"grey"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(Wrapper,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("strong",{children:"Moved arrow box"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("p",{children:["ID: ",arrowBox.annotationId]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("p",{children:["offsetX: ",arrowBox.offsetX]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("p",{children:["offsetY: ",arrowBox.offsetY]})]}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_src__WEBPACK_IMPORTED_MODULE_24__.CogniteFileViewer,{sdk:_utils__WEBPACK_IMPORTED_MODULE_25__.c,file:_utils__WEBPACK_IMPORTED_MODULE_25__.b,editable:!1,creatable:!1,hideLabel:!0,pagination:!1,disableAutoFetch:!0,annotations:annotations,onArrowBoxMove:function onArrowBoxMove(movedArrowBox){setArrowBox(movedArrowBox)},arrowPreviewOptions:{baseOffset:{x:-40,y:-40},customOffset:{2742838378943997:{x:-100,y:-100},5284005858465797:{x:-200},7508866173707239:{y:-20}}},renderArrowPreview:function renderArrowPreview(annotation){var annotationsToDisplay=["2742838378943997","5284005858465797","7508866173707239","352749521886257"],annotationIndex=annotationsToDisplay.findIndex((function(annotationId){return annotationId===annotation.id}));if(annotationsToDisplay.includes(annotation.id))return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(BoxWrapper,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(PreviewBox,{children:annotationIndex+1}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(PreviewBox,{invert:!0,color:"#fdc000",children:annotation.id.substring(0,2)})]})}})]})};BoxAndArrows.displayName="BoxAndArrows";var Playground=function Playground(){var _useState17=Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)([]),_useState18=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default()(_useState17,2),annotations=_useState18[0],setAnnotations=_useState18[1],_useState19=Object(react__WEBPACK_IMPORTED_MODULE_21__.useState)([]),_useState20=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_19___default()(_useState19,2),annotationIdsWithArrowBoxes=_useState20[0],setAnnotationIdsWithArrowBoxes=_useState20[1];Object(react__WEBPACK_IMPORTED_MODULE_21__.useEffect)((function(){_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_18___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.mark((function _callee6(){var rawAnnotations;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_16___default.a.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:return _context6.next=2,Object(_cognite_annotations__WEBPACK_IMPORTED_MODULE_26__.d)(_utils__WEBPACK_IMPORTED_MODULE_25__.c,_utils__WEBPACK_IMPORTED_MODULE_25__.b);case 2:rawAnnotations=_context6.sent,setAnnotations(rawAnnotations);case 4:case"end":return _context6.stop()}}),_callee6)})))()}),[]);return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.Fragment,{children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_cognite_cogs_js__WEBPACK_IMPORTED_MODULE_27__.a,{onClick:function generateArrowPreview(){var randomIndex=Math.floor(Math.random()*annotations.length),randomAnnotation=annotations[randomIndex];randomAnnotation&&!annotationIdsWithArrowBoxes.includes(randomAnnotation.id)&&setAnnotationIdsWithArrowBoxes([].concat(_babel_runtime_helpers_toConsumableArray__WEBPACK_IMPORTED_MODULE_14___default()(annotationIdsWithArrowBoxes),[randomAnnotation.id]))},children:"Generate boxes"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)(_src__WEBPACK_IMPORTED_MODULE_24__.CogniteFileViewer,{sdk:_utils__WEBPACK_IMPORTED_MODULE_25__.c,file:_utils__WEBPACK_IMPORTED_MODULE_25__.b,annotations:annotations,editable:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_23__.boolean)("Editable",!1),creatable:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_23__.boolean)("Creatable",!1),hideControls:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_23__.boolean)("Hide Controls",!1),hideLabel:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_23__.boolean)("Hide Label",!1),hoverable:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_23__.boolean)("Hoverable",!1),pagination:Object(_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_23__.select)("Pagination",["small","normal",!1],"normal"),renderArrowPreview:function renderArrowPreview(annotation){return annotationIdsWithArrowBoxes.find((function(annotationId){return"string"==typeof annotation.id?parseInt(annotation.id,10)===annotationId:annotation.id===annotationId}))?Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div",{style:{padding:"5px",backgroundColor:"red"},children:annotation.id}):void 0},onAnnotationSelected:Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_22__.action)("onAnnotationSelected"),renderItemPreview:function renderItemPreview(){return Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("div",{style:{backgroundColor:"white",color:"black",border:"1px solid black",padding:"5px"},children:Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsxs)("ul",{style:{margin:0,padding:0,listStyleType:"none"},children:[Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("li",{children:"test"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("li",{children:"test"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("li",{children:"test"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("li",{children:"test"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("li",{children:"test"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("li",{children:"test"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("li",{children:"test"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("li",{children:"test"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("li",{children:"test"}),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_20__.jsx)("li",{children:"test"})]})})}})]})};AllowCustomization.parameters=Object.assign({storySource:{source:'() => {\n  const [annotations, setAnnotations] = useState<CogniteAnnotation[]>([]);\n  useEffect(() => {\n    (async () => {\n      const annotationsFromCdf = await listAnnotationsForFile(pdfSdk, pdfFile);\n      setAnnotations(\n        annotationsFromCdf.concat([\n          {\n            id: 123,\n            label: "David",\n            createdTime: new Date(),\n            lastUpdatedTime: new Date(),\n            type: "tmp_annotation",\n            status: "unhandled",\n            box: { xMin: 0.1, xMax: 0.2, yMin: 0.1, yMax: 0.2 },\n            version: 5,\n            page: 1,\n            source: "tmp",\n          },\n        ])\n      );\n    })();\n  }, []);\n  return (\n    <CogniteFileViewer\n      sdk={pdfSdk}\n      file={pdfFile}\n      disableAutoFetch={true}\n      annotations={annotations}\n    />\n  );\n}'}},AllowCustomization.parameters),AllowControlledEditing.parameters=Object.assign({storySource:{source:'() => {\n  const [annotations, setAnnotations] = useState<CogniteAnnotation[]>([]);\n  useEffect(() => {\n    (async () => {\n      setAnnotations(await listAnnotationsForFile(pdfSdk, pdfFile));\n    })();\n  }, []);\n\n  const callbacks: ViewerEditCallbacks = useMemo(\n    () => ({\n      onCreate: (annotation) => {\n        // decide if changes should complete\n        id += 1;\n        setAnnotations(\n          annotations.concat([\n            {\n              ...annotation,\n              id,\n              createdTime: new Date(),\n              lastUpdatedTime: new Date(),\n            } as CogniteAnnotation,\n          ])\n        );\n        return false;\n      },\n      onUpdate: (annotation) => {\n        // decide if changes should complete\n        setAnnotations(\n          annotations\n            .filter((el) => `${el.id}` !== `${annotation.id}`)\n            .concat([annotation as CogniteAnnotation])\n        );\n        return false;\n      },\n    }),\n    [annotations, setAnnotations]\n  );\n\n  const [selectedIds, setSelectedIds] = useState<string[]>(["406167784064508"]);\n\n  const handleAnnotationSelection = (\n    selectedAnnotations: CogniteAnnotation[]\n  ) => {\n    if (selectedAnnotations.length > 0) {\n      setSelectedIds([`${selectedAnnotations[0].id}`]);\n    }\n  };\n\n  return (\n    <CogniteFileViewer\n      sdk={imgSdk}\n      file={imgFile}\n      disableAutoFetch={true}\n      annotations={annotations}\n      editable={true}\n      editCallbacks={callbacks}\n      selectedIds={selectedIds}\n      onAnnotationSelected={handleAnnotationSelection}\n      renderItemPreview={(anno) => (\n        <>\n          <span>{anno[0].label}</span>\n          <Button\n            icon="Delete"\n            onClick={() =>\n              setAnnotations(\n                annotations.filter((el) => `${el.id}` !== `${anno[0].id}`)\n              )\n            }\n          />\n        </>\n      )}\n    />\n  );\n}'}},AllowControlledEditing.parameters),ZoomOnSelectedAnnotation.parameters=Object.assign({storySource:{source:'() => {\n  const [annotations, setAnnotations] = useState<CogniteAnnotation[]>([]);\n  const [zoomedAnnotation, setZoomedAnnotation] = useState<CogniteAnnotation>();\n  const scale = 0.3;\n\n  useEffect(() => {\n    (async () => {\n      const annotationsFromCdf = await listAnnotationsForFile(pdfSdk, pdfFile);\n      setAnnotations(\n        annotationsFromCdf.concat([\n          {\n            id: 123,\n            label: "David",\n            createdTime: new Date(),\n            lastUpdatedTime: new Date(),\n            type: "tmp_annotation",\n            status: "unhandled",\n            box: { xMin: 0.1, xMax: 0.2, yMin: 0.1, yMax: 0.2 },\n            version: 5,\n            page: 1,\n            source: "tmp",\n          },\n        ])\n      );\n    })();\n  }, []);\n\n  const onZoomOnRandomAnnotation = () => {\n    const randomAnnotationIndex = Math.floor(\n      Math.random() * annotations.length\n    );\n    const randomAnnotation = annotations[\n      randomAnnotationIndex\n    ] as CogniteAnnotation;\n    setZoomedAnnotation(randomAnnotation);\n  };\n\n  const onFileLoaded = () => {\n    setTimeout(() => {\n      onZoomOnRandomAnnotation();\n    }, 200); // wait to finish rendering the annotations\n  };\n\n  return (\n    <div style={{ height: "100%", width: "100%", display: "flex" }}>\n      <Wrapper>\n        <Button onClick={() => onZoomOnRandomAnnotation()}>\n          Zoom on random annotation\n        </Button>\n      </Wrapper>\n      <CogniteFileViewer\n        sdk={pdfSdk}\n        file={pdfFile}\n        disableAutoFetch={true}\n        annotations={annotations}\n        onFileLoaded={onFileLoaded}\n        zoomOnAnnotation={\n          zoomedAnnotation && { annotation: zoomedAnnotation, scale }\n        }\n      />\n    </div>\n  );\n}'}},ZoomOnSelectedAnnotation.parameters),SplitContextAndViewer.parameters=Object.assign({storySource:{source:'() => {\n  const AnotherComponent = () => {\n    // This component now has access to all of the utilities and props of the viewer!\n    const download = useDownloadPDF();\n    const { zoomIn, zoomOut, reset } = useZoomControls();\n    const extract = useExtractFromCanvas();\n    const {\n      selectedAnnotations,\n      setSelectedAnnotations,\n    } = useSelectedAnnotations();\n\n    const [selectedAnnotation] = selectedAnnotations;\n\n    return (\n      <Wrapper>\n        <Button onClick={() => download!("testing.pdf")}>Download</Button>\n        <Button onClick={() => zoomIn!()}>Zoom In</Button>\n        <Button onClick={() => zoomOut!()}>Zoom Out</Button>\n        <Button onClick={() => reset!()}>Reset</Button>\n        {selectedAnnotation && (\n          <Button onClick={() => setSelectedAnnotations([])}>\n            Unselect Annotation\n          </Button>\n        )}\n\n        {selectedAnnotation &&\n          `${selectedAnnotation.type}: ${selectedAnnotation.description}`}\n        {selectedAnnotation && (\n          <img\n            style={{\n              objectFit: "contain",\n              width: "100%",\n            }}\n            src={extract!(\n              selectedAnnotation.box.xMin,\n              selectedAnnotation.box.yMin,\n              selectedAnnotation.box.xMax - selectedAnnotation.box.xMin,\n              selectedAnnotation.box.yMax - selectedAnnotation.box.yMin\n            )}\n          />\n        )}\n      </Wrapper>\n    );\n  };\n  return (\n    <CogniteFileViewer.Provider sdk={pdfSdk}>\n      <div style={{ height: "100%", width: "100%", display: "flex" }}>\n        <AnotherComponent />\n        <CogniteFileViewer.FileViewer file={pdfFile} editable={false} />\n      </div>\n    </CogniteFileViewer.Provider>\n  );\n}'}},SplitContextAndViewer.parameters),CustomizedAnnotations.parameters=Object.assign({storySource:{source:'() => {\n  const [annotations, setAnnotations] = useState<\n    CustomizableCogniteAnnotation[]\n  >([]);\n  const mark = [\n    {\n      backgroundColor: "#ff110055",\n      strokeColor: "#26ff0055",\n      strokeWidth: 0,\n    },\n    {\n      draw: (\n        canvas: CanvasRenderingContext2D,\n        x: number,\n        y: number,\n        width: number,\n        height: number\n      ) => {\n        canvas.beginPath();\n        canvas.globalCompositeOperation = "multiply";\n        canvas.fillStyle = "#26ff0055";\n        canvas.arc(\n          x + width / 2,\n          y + height / 2,\n          Math.min(height, width) / 2,\n          0,\n          2 * Math.PI\n        );\n        canvas.stroke();\n        canvas.fill();\n      },\n    },\n    {\n      draw: (\n        canvas: CanvasRenderingContext2D,\n        x: number,\n        y: number,\n        width: number,\n        height: number\n      ) => {\n        const radius = 10;\n        canvas.beginPath();\n        canvas.lineWidth = 4;\n        canvas.shadowBlur = 10;\n        canvas.shadowColor = "#000033";\n        canvas.fillStyle = "#0000ff";\n        canvas.lineTo(x + width - radius, y);\n        canvas.quadraticCurveTo(x + width, y, x + width, y + radius);\n        canvas.lineTo(x + width, y + height - radius);\n        canvas.quadraticCurveTo(\n          x + width,\n          y + height,\n          x + width - radius,\n          y + height\n        );\n        canvas.lineTo(x + radius, y + height);\n        canvas.quadraticCurveTo(x, y + height, x, y + height - radius);\n        canvas.lineTo(x, y + radius);\n        canvas.quadraticCurveTo(x, y, x + radius, y);\n        canvas.stroke();\n        canvas.fill();\n      },\n    },\n  ];\n  useEffect(() => {\n    (async () => {\n      const rawAnnotations = await listAnnotationsForFile(\n        imgSdkThreeAnnotations,\n        imgFile\n      );\n      const customizedAnnotations = rawAnnotations.map(\n        (annotation: CustomizableCogniteAnnotation, index: number) => ({\n          ...annotation,\n          mark: mark[index],\n        })\n      );\n      setAnnotations(customizedAnnotations);\n    })();\n  }, [mark]);\n\n  return (\n    <CogniteFileViewer\n      sdk={imgSdk}\n      file={imgFile}\n      disableAutoFetch={true}\n      annotations={annotations}\n      editable={true}\n      allowCustomAnnotations={true}\n    />\n  );\n}'}},CustomizedAnnotations.parameters),BoxAndArrows.parameters=Object.assign({storySource:{source:'() => {\n  const [annotations, setAnnotations] = useState<CogniteAnnotation[]>([]);\n  const [arrowBox, setArrowBox] = useState({\n    annotationId: undefined,\n    offsetX: undefined,\n    offsetY: undefined,\n  } as any);\n  useEffect(() => {\n    (async () => {\n      const rawAnnotations = await listAnnotationsForFile(imgSdk, imgFile);\n      setAnnotations(rawAnnotations);\n    })();\n  }, []);\n\n  /**\n   * Annotations numbered 1 to 3 will have their own custom offsets.\n   * Annotation numbered 4 will have the base offset.\n   */\n  const arrowPreviewOptions = {\n    baseOffset: {\n      x: -40,\n      y: -40,\n    },\n    customOffset: {\n      "2742838378943997": { x: -100, y: -100 },\n      "5284005858465797": { x: -200 },\n      "7508866173707239": { y: -20 },\n    },\n  };\n\n  /**\n   * We take 4 annotations out of all available, and generate arrow boxes for them.\n   */\n  const renderArrowPreview = (annotation: any) => {\n    const annotationsToDisplay = [\n      "2742838378943997",\n      "5284005858465797",\n      "7508866173707239",\n      "352749521886257",\n    ];\n    const annotationIndex = annotationsToDisplay.findIndex(\n      (annotationId: string) => annotationId === annotation.id\n    );\n    if (annotationsToDisplay.includes(annotation.id))\n      return (\n        <BoxWrapper>\n          <PreviewBox>{annotationIndex + 1}</PreviewBox>\n          <PreviewBox invert={true} color="#fdc000">\n            {annotation.id.substring(0, 2)}\n          </PreviewBox>\n        </BoxWrapper>\n      );\n    return undefined;\n  };\n\n  /**\n   * When the arrow box is moved, we save its returned data to state so we can display the data returned on the sidebar on the left.\n   */\n  const onArrowBoxMove = (movedArrowBox: {\n    annotationId: string | number;\n    offsetX?: number;\n    offsetY?: number;\n  }) => {\n    setArrowBox(movedArrowBox);\n  };\n\n  return (\n    <div\n      style={{\n        display: "flex",\n        width: "100%",\n        height: "100%",\n        backgroundColor: "grey",\n      }}\n    >\n      <Wrapper>\n        <strong>Moved arrow box</strong>\n        <p>ID: {arrowBox.annotationId}</p>\n        <p>offsetX: {arrowBox.offsetX}</p>\n        <p>offsetY: {arrowBox.offsetY}</p>\n      </Wrapper>\n      <CogniteFileViewer\n        sdk={imgSdk}\n        file={imgFile}\n        editable={false}\n        creatable={false}\n        hideLabel={true}\n        pagination={false}\n        disableAutoFetch={true}\n        annotations={annotations}\n        onArrowBoxMove={onArrowBoxMove}\n        arrowPreviewOptions={arrowPreviewOptions}\n        renderArrowPreview={renderArrowPreview}\n      />\n    </div>\n  );\n}'}},BoxAndArrows.parameters),Playground.parameters=Object.assign({storySource:{source:'() => {\n  const [annotations, setAnnotations] = useState<CogniteAnnotation[]>([]);\n  const [\n    annotationIdsWithArrowBoxes,\n    setAnnotationIdsWithArrowBoxes,\n  ] = useState([] as number[]);\n  useEffect(() => {\n    (async () => {\n      const rawAnnotations = await listAnnotationsForFile(imgSdk, imgFile);\n      setAnnotations(rawAnnotations);\n    })();\n  }, []);\n  const generateArrowPreview = () => {\n    const randomIndex = Math.floor(Math.random() * annotations.length);\n    const randomAnnotation = annotations[randomIndex];\n    if (\n      randomAnnotation &&\n      !annotationIdsWithArrowBoxes.includes(randomAnnotation.id)\n    ) {\n      setAnnotationIdsWithArrowBoxes([\n        ...annotationIdsWithArrowBoxes,\n        randomAnnotation.id,\n      ]);\n    }\n  };\n\n  const renderArrowPreview = (annotation: any) => {\n    const hasPreview = annotationIdsWithArrowBoxes.find((annotationId: any) => {\n      if (typeof annotation.id === "string")\n        return parseInt(annotation.id, 10) === annotationId;\n      else return annotation.id === annotationId;\n    });\n    if (hasPreview) {\n      return (\n        <div style={{ padding: "5px", backgroundColor: "red" }}>\n          {annotation.id}\n        </div>\n      );\n    } else return undefined;\n  };\n\n  return (\n    <>\n      <Button onClick={generateArrowPreview}>Generate boxes</Button>\n      <CogniteFileViewer\n        sdk={imgSdk}\n        file={imgFile}\n        annotations={annotations}\n        editable={boolean("Editable", false)}\n        creatable={boolean("Creatable", false)}\n        hideControls={boolean("Hide Controls", false)}\n        hideLabel={boolean("Hide Label", false)}\n        hoverable={boolean("Hoverable", false)}\n        pagination={select("Pagination", ["small", "normal", false], "normal")}\n        renderArrowPreview={renderArrowPreview}\n        onAnnotationSelected={action("onAnnotationSelected")}\n        renderItemPreview={() => (\n          <div\n            style={{\n              backgroundColor: "white",\n              color: "black",\n              border: "1px solid black",\n              padding: "5px",\n            }}\n          >\n            <ul style={{ margin: 0, padding: 0, listStyleType: "none" }}>\n              <li>test</li>\n              <li>test</li>\n              <li>test</li>\n              <li>test</li>\n              <li>test</li>\n              <li>test</li>\n              <li>test</li>\n              <li>test</li>\n              <li>test</li>\n              <li>test</li>\n            </ul>\n          </div>\n        )}\n      />\n    </>\n  );\n}'}},Playground.parameters)},86:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"g",(function(){return useZoomControls})),__webpack_require__.d(__webpack_exports__,"c",(function(){return useDownloadPDF})),__webpack_require__.d(__webpack_exports__,"d",(function(){return useExtractFromCanvas})),__webpack_require__.d(__webpack_exports__,"e",(function(){return useSelectedAnnotations})),__webpack_require__.d(__webpack_exports__,"f",(function(){return useViewerQuery})),__webpack_require__.d(__webpack_exports__,"a",(function(){return FileViewerProvider}));var _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(11),_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__=(__webpack_require__(104),__webpack_require__(32)),_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default=__webpack_require__.n(_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(8),_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default=__webpack_require__.n(_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3__),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(6),react__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(0),react__WEBPACK_IMPORTED_MODULE_5___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__),_cognite_annotations__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(73),FileViewerContext=react__WEBPACK_IMPORTED_MODULE_5___default.a.createContext({}),useZoomControls=function useZoomControls(){var _useContext4=Object(react__WEBPACK_IMPORTED_MODULE_5__.useContext)(FileViewerContext);return{zoomIn:_useContext4.zoomIn,zoomOut:_useContext4.zoomOut,zoomOnAnnotation:_useContext4.zoomOnAnnotation,reset:_useContext4.reset}},useDownloadPDF=function useDownloadPDF(){return Object(react__WEBPACK_IMPORTED_MODULE_5__.useContext)(FileViewerContext).download},useExtractFromCanvas=function useExtractFromCanvas(){return Object(react__WEBPACK_IMPORTED_MODULE_5__.useContext)(FileViewerContext).extractFromCanvas},useSelectedAnnotations=function useSelectedAnnotations(){var _useContext7=Object(react__WEBPACK_IMPORTED_MODULE_5__.useContext)(FileViewerContext);return{selectedAnnotations:_useContext7.selectedAnnotations,setSelectedAnnotations:_useContext7.setSelectedAnnotations}},useViewerQuery=function useViewerQuery(){var _useContext8=Object(react__WEBPACK_IMPORTED_MODULE_5__.useContext)(FileViewerContext);return{query:_useContext8.query,setQuery:_useContext8.setQuery}},FileViewerProvider=function FileViewerProvider(_ref){var sdk=_ref.sdk,children=_ref.children,_ref$disableAutoFetch=_ref.disableAutoFetch,disableAutoFetch=void 0!==_ref$disableAutoFetch&&_ref$disableAutoFetch,_useState=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)([]),_useState2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState,2),annotations=_useState2[0],setAnnotations=_useState2[1],_useState3=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)([]),_useState4=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState3,2),selectedAnnotations=_useState4[0],setSelectedAnnotations=_useState4[1],_useState5=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(!0),_useState6=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState5,2),isLoading=_useState6[0],setIsLoading=_useState6[1],_useState7=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(1),_useState8=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState7,2),page=_useState8[0],setPage=_useState8[1],_useState9=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(1),_useState10=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState9,2),totalPages=_useState10[0],setTotalPages=_useState10[1],_useState11=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(void 0),_useState12=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState11,2),file=_useState12[0],setFile=_useState12[1],_useState13=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(""),_useState14=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState13,2),query=_useState14[0],setQuery=_useState14[1],_useState15=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(void 0),_useState16=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState15,2),download=_useState16[0],setDownload=_useState16[1],_useState17=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(void 0),_useState18=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState17,2),zoomIn=_useState18[0],setZoomIn=_useState18[1],_useState19=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(void 0),_useState20=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState19,2),zoomOut=_useState20[0],setZoomOut=_useState20[1],_useState21=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(void 0),_useState22=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState21,2),zoomOnAnnotation=_useState22[0],setZoomOnAnnotation=_useState22[1],_useState23=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(void 0),_useState24=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState23,2),reset=_useState24[0],setReset=_useState24[1],_useState25=Object(react__WEBPACK_IMPORTED_MODULE_5__.useState)(void 0),_useState26=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_useState25,2),extractFromCanvas=_useState26[0],setExtractFromCanvas=_useState26[1],fileId=file?file.id:void 0;return Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){_babel_runtime_helpers_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2___default()(_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark((function _callee(){var _yield$sdk$files$retr,_yield$sdk$files$retr2,fetchedFile,annos;return _babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(!fileId||!sdk||disableAutoFetch){_context.next=14;break}return setIsLoading(!0),_context.next=4,sdk.files.retrieve([{id:fileId}],{ignoreUnknownIds:!0});case 4:if(_yield$sdk$files$retr=_context.sent,_yield$sdk$files$retr2=_babel_runtime_helpers_slicedToArray__WEBPACK_IMPORTED_MODULE_3___default()(_yield$sdk$files$retr,1),fetchedFile=_yield$sdk$files$retr2[0],setFile(fetchedFile),!fetchedFile){_context.next=13;break}return _context.next=11,Object(_cognite_annotations__WEBPACK_IMPORTED_MODULE_6__.d)(sdk,fetchedFile);case 11:annos=_context.sent,setAnnotations(annos);case 13:setIsLoading(!1);case 14:case"end":return _context.stop()}}),_callee)})))()}),[sdk,fileId,disableAutoFetch]),Object(react__WEBPACK_IMPORTED_MODULE_5__.useEffect)((function(){fileId&&setPage(1)}),[fileId]),Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_4__.jsx)(FileViewerContext.Provider,{value:{sdk:sdk,isLoading:isLoading,setIsLoading:setIsLoading,annotations:annotations,setAnnotations:setAnnotations,download:download,zoomIn:zoomIn,zoomOut:zoomOut,zoomOnAnnotation:zoomOnAnnotation,reset:reset,extractFromCanvas:extractFromCanvas,setDownload:setDownload,setZoomIn:setZoomIn,setZoomOut:setZoomOut,setZoomOnAnnotation:setZoomOnAnnotation,setReset:setReset,setExtractFromCanvas:setExtractFromCanvas,page:page,file:file,setFile:setFile,setPage:setPage,totalPages:totalPages,setTotalPages:setTotalPages,selectedAnnotations:selectedAnnotations,query:query,setQuery:setQuery,setSelectedAnnotations:setSelectedAnnotations},children:children})};FileViewerProvider.displayName="FileViewerProvider",__webpack_exports__.b=FileViewerContext;try{FileViewerProvider.displayName="FileViewerProvider",FileViewerProvider.__docgenInfo={description:"",displayName:"FileViewerProvider",props:{sdk:{defaultValue:null,description:"A CogniteClient to supply to the viewer",name:"sdk",required:!0,type:{name:"CogniteClient"}},disableAutoFetch:{defaultValue:{value:!1},description:"Should fetching of annotations happen automatically? Unless you want to hook annotations fetching/storing into your store or augment annotations from CDF before sending into viewer, and you can trust the viewer to fetch annotations each time a file is supplied.",name:"disableAutoFetch",required:!1,type:{name:"boolean | undefined"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/Cognite/FileViewerContext.tsx#FileViewerProvider"]={docgenInfo:FileViewerProvider.__docgenInfo,name:"FileViewerProvider",path:"src/Cognite/FileViewerContext.tsx#FileViewerProvider"})}catch(__react_docgen_typescript_loader_error){}},872:function(module,exports){},961:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(326)}},[[805,1,2]]]);
//# sourceMappingURL=main.b0836e77be71640fddaa.bundle.js.map