(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("ERkP")},,,function(module,exports){module.exports=storybook_docs_dll},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("1t7P")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("IAdD")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("ho0z")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("+KXO")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("jQ/y")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("7x/C")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("M+/F")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("plBw")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("87if")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("DZ+c")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("lTEL")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("kYxP")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("aLgo")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("vrRf")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("cARO")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("z84I")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("2G9S")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("hCOa")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("KqXw")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("NyMY")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("UvmB")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("EgRP")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("yH/f")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("jwue")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("+oxZ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("aokA")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("LW0h")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("lN5B")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("A3UQ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("MvUL")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__(498);var _ReactPictureAnnotation__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(106);__webpack_require__.d(__webpack_exports__,"ReactPictureAnnotation",(function(){return _ReactPictureAnnotation__WEBPACK_IMPORTED_MODULE_1__.a}));__webpack_require__(109),__webpack_require__(76),__webpack_require__(208)},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("7xRU")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("Ysgh")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("hBpG")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("KOtZ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("1Iuc")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("P2aG")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("jQ3i")},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("ZVkB")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("x4t0")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("y2Ah")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("WNMA")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("Yct5")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("1IsZ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("vbDw")},,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("JtPf")},,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return RectShape}));__webpack_require__(25);var shapeStyle_padding=5,shapeStyle_fontSize=12,shapeStyle_fontColor="#212529",shapeStyle_fontBackground="#f8f9fa",shapeStyle_fontFamily="-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', Helvetica, Arial, sans-serif",shapeStyle_shapeBackground="hsla(210, 16%, 93%, 0.2)",shapeStyle_shapeStrokeStyle="ff0000",shapeStyle_shapeShadowStyle="hsla(210, 9%, 31%, 0.35)",RectShape=function RectShape(_data,onChange,getImageSize){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,RectShape),this.annotationData=void 0,this.onChangeCallBack=void 0,this.getImageSize=void 0,this.dragStartOffset=void 0,this.onDragStart=function(positionX,positionY){var _this$annotationData$=_this.annotationData.mark,x=_this$annotationData$.x,y=_this$annotationData$.y,width=_this$annotationData$.width,height=_this$annotationData$.height;if(width<1&&height<1){var imageSize=_this.getImageSize();_this.dragStartOffset={offsetX:positionX/imageSize.width-x,offsetY:positionY/imageSize.height-y}}else _this.dragStartOffset={offsetX:positionX-x,offsetY:positionY-y}},this.onDrag=function(positionX,positionY){if(_this.dragStartOffset){var _this$annotationData$2=_this.annotationData.mark,_width=_this$annotationData$2.width,_height=_this$annotationData$2.height;if(_width<1&&_height<1){var imageSize=_this.getImageSize();_this.annotationData.mark.x=positionX/imageSize.width-_this.dragStartOffset.offsetX,_this.annotationData.mark.y=positionY/imageSize.height-_this.dragStartOffset.offsetY}else _this.annotationData.mark.x=positionX-_this.dragStartOffset.offsetX,_this.annotationData.mark.y=positionY-_this.dragStartOffset.offsetY;_this.onChangeCallBack()}},this.checkBoundary=function(positionX,positionY,calculateTruePosition){var padding=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,_calculateTruePositio=calculateTruePosition(_this.annotationData.mark),x=_calculateTruePositio.x,y=_calculateTruePositio.y,width=_calculateTruePositio.width,height=_calculateTruePositio.height;return(positionX>x-padding&&positionX<x+width+padding||positionX<x+padding&&positionX>x+width-padding)&&(positionY>y-padding&&positionY<y+height+padding||positionY<y+padding&&positionY>y+height-padding)},this.paint=function(canvas2D,calculateTruePosition,selected,drawLabel,scale,isDownload){var mark=_this.annotationData.mark,_calculateTruePositio2=calculateTruePosition(mark),x=_calculateTruePositio2.x,y=_calculateTruePositio2.y,width=_calculateTruePositio2.width,height=_calculateTruePositio2.height;if(canvas2D.save(),_this.annotationData.mark.draw)_this.annotationData.mark.draw(canvas2D,x,y,width,height,scale,isDownload);else if(canvas2D.shadowBlur=10,canvas2D.shadowColor=mark.shadowColor||shapeStyle_shapeShadowStyle,canvas2D.strokeStyle=mark.strokeColor||shapeStyle_shapeStrokeStyle,canvas2D.lineWidth=mark.strokeWidth||4,canvas2D.strokeRect(x-canvas2D.lineWidth/2,y-canvas2D.lineWidth/2,width+canvas2D.lineWidth,height+canvas2D.lineWidth),selected)canvas2D.fillStyle=mark.backgroundColor||shapeStyle_shapeBackground,canvas2D.fillRect(x-canvas2D.lineWidth/2,y-canvas2D.lineWidth/2,width+canvas2D.lineWidth,height+canvas2D.lineWidth);else{var _comment=_this.annotationData.comment;if(_comment&&drawLabel){canvas2D.font="".concat(shapeStyle_fontSize,"px ").concat(shapeStyle_fontFamily);var metrics=canvas2D.measureText(_comment);canvas2D.fillStyle=shapeStyle_fontBackground,canvas2D.fillRect(x,y,metrics.width+2*shapeStyle_padding,shapeStyle_fontSize+2*shapeStyle_padding),canvas2D.textBaseline="top",canvas2D.fillStyle=shapeStyle_fontColor,canvas2D.fillText(_comment,x+shapeStyle_padding,y+shapeStyle_padding)}}return canvas2D.restore(),{x:x,y:y,width:width,height:height}},this.adjustMark=function(_ref){var _ref$x=_ref.x,x=void 0===_ref$x?_this.annotationData.mark.x:_ref$x,_ref$y=_ref.y,y=void 0===_ref$y?_this.annotationData.mark.y:_ref$y,_ref$width=_ref.width,width=void 0===_ref$width?_this.annotationData.mark.width:_ref$width,_ref$height=_ref.height,height=void 0===_ref$height?_this.annotationData.mark.height:_ref$height;width>0&&height>0&&(_this.annotationData.mark.x=x,_this.annotationData.mark.y=y,_this.annotationData.mark.width=width,_this.annotationData.mark.height=height,_this.onChangeCallBack())},this.getAnnotationData=function(){return _this.annotationData},this.setComment=function(comment){_this.annotationData.comment=comment},this.equal=function(data){return data.id===_this.annotationData.id&&data.comment===_this.annotationData.comment&&data.mark.x===_this.annotationData.mark.x&&data.mark.y===_this.annotationData.mark.y&&data.mark.width===_this.annotationData.mark.width&&data.mark.height===_this.annotationData.mark.height},this.annotationData=_data,this.onChangeCallBack=onChange,this.getImageSize=getImageSize}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("5o43")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("tVqn")},,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("3yYM")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("aYSr")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("DfhM")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("LJOr")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("pu3o")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("ax0f")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("Cm4o")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("j4Sf")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("LUwd")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("OZaJ")},,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("fRV1")},,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return ReactPictureAnnotation_ReactPictureAnnotation}));__webpack_require__(6),__webpack_require__(13),__webpack_require__(21),__webpack_require__(25),__webpack_require__(48),__webpack_require__(201),__webpack_require__(26),__webpack_require__(16),__webpack_require__(19),__webpack_require__(24),__webpack_require__(15),__webpack_require__(125),__webpack_require__(23),__webpack_require__(8),__webpack_require__(7),__webpack_require__(92),__webpack_require__(31),__webpack_require__(77),__webpack_require__(93),__webpack_require__(14),__webpack_require__(72),__webpack_require__(94),__webpack_require__(18),__webpack_require__(17),__webpack_require__(20),__webpack_require__(119),__webpack_require__(91),__webpack_require__(85);var delegated_reactfrom_dll_reference_storybook_docs_dll=__webpack_require__(2),delegated_reactfrom_dll_reference_storybook_docs_dll_default=__webpack_require__.n(delegated_reactfrom_dll_reference_storybook_docs_dll),build_pdf=__webpack_require__(112),pdf_default=__webpack_require__.n(build_pdf),es=__webpack_require__(113),parse_color=__webpack_require__(226),parse_color_default=__webpack_require__.n(parse_color),Shape=__webpack_require__(76);function _createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var Transformer=function Transformer(_shape,editable,getImageSize,_calculateTruePosition){var _this=this;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Transformer),this.id=void 0,this.shape=void 0,this.editable=void 0,this.currentNodeCenterIndex=void 0,this.calculateTruePosition=void 0,this.getImageSize=void 0,this.checkBoundary=function(positionX,positionY){return _this.getCenterIndexByCursor(positionX,positionY)>=0},this.startTransformation=function(positionX,positionY){var currentCenterIndex=_this.getCenterIndexByCursor(positionX,positionY);_this.currentNodeCenterIndex=currentCenterIndex},this.onTransformation=function(positionX,positionY){_this.getAllCentersTable()[_this.currentNodeCenterIndex].adjust(positionX,positionY)},this.paint=function(canvas2D,calculateTruePosition){var allCentersTable=_this.getAllCentersTable();if(canvas2D.save(),canvas2D.fillStyle="#5c7cfa",_this.editable){var _step,_iterator=_createForOfIteratorHelper(allCentersTable);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value,_calculateTruePositio=calculateTruePosition({x:item.x-5,y:item.y-5,width:10,height:10}),x=_calculateTruePositio.x,y=_calculateTruePositio.y,width=_calculateTruePositio.width,height=_calculateTruePositio.height;canvas2D.fillRect(x,y,width,height)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}canvas2D.restore()},this.getCenterIndexByCursor=function(positionX,positionY){return _this.getAllCentersTable().findIndex((function(item){return _this.checkEachRectBoundary(item.x,item.y,positionX,positionY)}))},this.checkEachRectBoundary=function(rectCenterX,rectCenterY,positionX,positionY){return Math.abs(positionX-rectCenterX)<=5&&Math.abs(positionY-rectCenterY)<=5},this.getAllCentersTable=function(){var shape=_this.shape,isPercentage=shape.getAnnotationData().mark.width<1&&shape.getAnnotationData().mark.height<1,_this$calculateTruePo=_this.calculateTruePosition(shape.getAnnotationData().mark),scaledX=_this$calculateTruePo.x,scaledY=_this$calculateTruePo.y,scaledWidth=_this$calculateTruePo.width,scaledHeight=_this$calculateTruePo.height,_shape$getAnnotationD=shape.getAnnotationData().mark,x=_shape$getAnnotationD.x,y=_shape$getAnnotationD.y,width=_shape$getAnnotationD.width,height=_shape$getAnnotationD.height,_this$getImageSize=_this.getImageSize(),imageWidth=_this$getImageSize.width,imageHeight=_this$getImageSize.height;return[{x:scaledX,y:scaledY,adjust:function adjust(positionX,positionY){isPercentage&&(positionX/=imageWidth,positionY/=imageHeight),shape.adjustMark({x:positionX,y:positionY,width:width+x-positionX,height:height+y-positionY})}},{x:scaledX+scaledWidth/2,y:scaledY,adjust:function adjust(_,positionY){isPercentage&&(positionY/=imageHeight),shape.adjustMark({y:positionY,height:height+y-positionY})}},{x:scaledX+scaledWidth,y:scaledY,adjust:function adjust(positionX,positionY){isPercentage&&(positionX/=imageWidth,positionY/=imageHeight),shape.adjustMark({x:x,y:positionY,width:positionX-x,height:y+height-positionY})}},{x:scaledX,y:scaledY+scaledHeight/2,adjust:function adjust(positionX){isPercentage&&(positionX/=imageWidth),shape.adjustMark({x:positionX,width:width+x-positionX})}},{x:scaledX+scaledWidth,y:scaledY+scaledHeight/2,adjust:function adjust(positionX){isPercentage&&(positionX/=imageWidth),shape.adjustMark({width:positionX-x})}},{x:scaledX,y:scaledY+scaledHeight,adjust:function adjust(positionX,positionY){isPercentage&&(positionX/=imageWidth,positionY/=imageHeight),shape.adjustMark({x:positionX,width:width+x-positionX,height:positionY-y})}},{x:scaledX+scaledWidth/2,y:scaledY+scaledHeight,adjust:function adjust(_,positionY){isPercentage&&(positionY/=imageHeight),shape.adjustMark({height:positionY-y})}},{x:scaledX+scaledWidth,y:scaledY+scaledHeight,adjust:function adjust(positionX,positionY){isPercentage&&(positionX/=imageWidth,positionY/=imageHeight),shape.adjustMark({width:positionX-x,height:positionY-y})}}]},this.shape=_shape,this.editable=editable,this.id=_shape.getAnnotationData().id,this.getImageSize=getImageSize,this.calculateTruePosition=_calculateTruePosition};var CreatingAnnotationState_CreatingAnnotationState=function CreatingAnnotationState(context){var _this=this;!function CreatingAnnotationState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,CreatingAnnotationState),this.context=void 0,this.onMouseDown=function(){},this.onMouseMove=function(positionX,positionY){var _this$context=_this.context,shapes=_this$context.shapes,onShapeChange=_this$context.onShapeChange;if(shapes.length>0){var currentShape=shapes.find((function(el){return el.getAnnotationData().id===_this.context.pendingShapeId}));if(currentShape){var _currentShape$getAnno2=currentShape.getAnnotationData().mark,x=_currentShape$getAnno2.x,y=_currentShape$getAnno2.y;currentShape.adjustMark({width:positionX-x,height:positionY-y})}}onShapeChange()},this.onMouseUp=function(){var _this$context2=_this.context,shapes=_this$context2.shapes,onShapeChange=_this$context2.onShapeChange,setAnnotationState=_this$context2.setAnnotationState,onDelete=_this$context2.onDelete,getOriginalImageSize=_this$context2.getOriginalImageSize,_this$context2$props=_this$context2.props,onAnnotationCreate=_this$context2$props.onAnnotationCreate,usePercentage=_this$context2$props.usePercentage,data=shapes.find((function(el){return el.getAnnotationData().id===_this.context.pendingShapeId}));if(data)if(data&&0!==data.getAnnotationData().mark.width&&0!==data.getAnnotationData().mark.height){var _data$getAnnotationDa=data.getAnnotationData().mark,x=_data$getAnnotationDa.x,y=_data$getAnnotationDa.y,width=_data$getAnnotationDa.width,height=_data$getAnnotationDa.height;if(usePercentage){var origSize=getOriginalImageSize();x/=origSize.width,y/=origSize.height,width/=origSize.width,height/=origSize.height}data.getAnnotationData().mark.x=x+Math.min(0,width),data.getAnnotationData().mark.y=y+Math.min(0,height),data.getAnnotationData().mark.width=Math.abs(width),data.getAnnotationData().mark.height=Math.abs(height),_this.context.selectedId=data.getAnnotationData().id,onAnnotationCreate&&onAnnotationCreate(data.getAnnotationData())}else onDelete(_this.context.pendingShapeId),_this.context.selectedId=null;else _this.context.pendingShapeId=null,_this.context.selectedId=null;setAnnotationState(new DefaultAnnotationState_DefaultAnnotationState(_this.context)),onShapeChange()},this.onMouseLeave=function(){return _this.onMouseUp()},this.context=context};var DraggingAnnotationState_DraggingAnnotationState=function DraggingAnnotationState(context){var _this=this;!function DraggingAnnotationState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DraggingAnnotationState),this.hasMoved=void 0,this.context=void 0,this.onMouseDown=function(){},this.onMouseMove=function(positionX,positionY){var _this$context=_this.context,shapes=_this$context.shapes,selectedId=_this$context.selectedId,currentShape=shapes.find((function(el){return el.getAnnotationData().id===selectedId}));_this.hasMoved=!0,currentShape.onDrag(positionX,positionY)},this.onMouseUp=function(){var _this$context2=_this.context,shapes=_this$context2.shapes,setAnnotationState=_this$context2.setAnnotationState,selectedId=_this$context2.selectedId,onAnnotationUpdate=_this$context2.props.onAnnotationUpdate;(setAnnotationState(new DefaultAnnotationState_DefaultAnnotationState(_this.context)),onAnnotationUpdate&&_this.hasMoved)&&onAnnotationUpdate(shapes.find((function(el){return el.getAnnotationData().id===selectedId})).getAnnotationData())},this.onMouseLeave=function(){return _this.onMouseUp()},this.context=context,this.hasMoved=!1};var TransfromationState_TransformationState=function TransformationState(context){var _this=this;!function TransfromationState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TransformationState),this.context=void 0,this.onMouseDown=function(){},this.onMouseMove=function(positionX,positionY){var currentTransformer=_this.context.currentTransformer;currentTransformer&&currentTransformer.onTransformation(positionX,positionY)},this.onMouseUp=function(){var _this$context=_this.context,shapes=_this$context.shapes,setAnnotationState=_this$context.setAnnotationState,selectedId=_this$context.selectedId,onAnnotationUpdate=_this$context.props.onAnnotationUpdate;if(setAnnotationState(new DefaultAnnotationState_DefaultAnnotationState(_this.context)),onAnnotationUpdate){var currentShape=shapes.find((function(el){return el.getAnnotationData().id===selectedId}));currentShape&&onAnnotationUpdate(currentShape.getAnnotationData())}},this.onMouseLeave=function(){return _this.onMouseUp()},this.context=context};function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function DefaultAnnotationState_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return DefaultAnnotationState_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return DefaultAnnotationState_arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function DefaultAnnotationState_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var DefaultAnnotationState_DefaultAnnotationState=function DefaultAnnotationState(context){var _this=this;!function DefaultAnnotationState_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,DefaultAnnotationState),this.context=void 0,this.hasMoved=!1,this.hasClicked=!1,this.hasSelected=!1,this.onMouseMove=function(positionX,positionY){_this.hasClicked&&(_this.hasMoved=!0),_this.context.props.hoverable&&_this.checkSelectedId(positionX,positionY)},this.onMouseUp=function(){_this.hasMoved||_this.hasSelected||!_this.hasClicked||(_this.context.selectedId=null),_this.context.onShapeChange(),_this.hasMoved=!1,_this.hasClicked=!1,_this.hasSelected=!1},this.onMouseLeave=function(){_this.hasClicked=!1,_this.hasMoved=!1,_this.hasSelected=!1},this.onMouseDown=function(positionX,positionY){_this.hasClicked=!0;var _this$context=_this.context,shapes=_this$context.shapes,currentTransformer=_this$context.currentTransformer,onShapeChange=_this$context.onShapeChange,setState=_this$context.setAnnotationState,_this$context$props=_this$context.props,editable=_this$context$props.editable,creatable=_this$context$props.creatable;if(currentTransformer&&currentTransformer.checkBoundary(positionX,positionY))return currentTransformer.startTransformation(positionX,positionY),void setState(new TransfromationState_TransformationState(_this.context));for(var i=shapes.length-1;i>=0;i--)if(shapes[i].checkBoundary(positionX,positionY,_this.context.calculateShapePositionNoOffset)){_this.context.selectedId!==shapes[i].getAnnotationData().id&&(_this.hasSelected=!0),_this.context.selectedId=shapes[i].getAnnotationData().id;var selectedShape=_slicedToArray(shapes.splice(i,1),1)[0];return shapes.push(selectedShape),onShapeChange(),void(editable&&(_this.context.currentTransformer=new Transformer(shapes[i],editable,_this.context.getOriginalImageSize,_this.context.calculateShapePositionNoOffset),selectedShape.onDragStart(positionX,positionY),setState(new DraggingAnnotationState_DraggingAnnotationState(_this.context))))}if(editable||creatable){var newShapeId=function(){for(var len=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,chars="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz2345678",maxPos=chars.length,id="",i=0;i<len;i++)id+=chars.charAt(Math.floor(Math.random()*maxPos));return id}();_this.context.shapes.push(new Shape.a({id:newShapeId,mark:{x:positionX,y:positionY,width:0,height:0,type:"RECT"}},onShapeChange,_this.context.getOriginalImageSize)),_this.context.pendingShapeId=newShapeId,setState(new CreatingAnnotationState_CreatingAnnotationState(_this.context))}},this.checkSelectedId=function(positionX,positionY){for(var _this$context2=_this.context,shapes=_this$context2.shapes,onShapeChange=_this$context2.onShapeChange,i=shapes.length-1;i>=0;i--)if(shapes[i].checkBoundary(positionX,positionY,_this.context.calculateShapePositionNoOffset,(shapes[i].getAnnotationData().mark.strokeWidth||4)+10)){var id=shapes[i].getAnnotationData().id;return void(_this.context.selectedId!==id&&(_this.context.selectedId=id,onShapeChange()))}_this.context.selectedId&&(_this.context.selectedId=null,onShapeChange())},this.context=context,this.hasMoved=!1,this.hasSelected=!1,this.hasClicked=!1},DefaultInputSection=__webpack_require__(109);function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function ReactPictureAnnotation_createForOfIteratorHelper(o,allowArrayLike){var it;if("undefined"==typeof Symbol||null==o[Symbol.iterator]){if(Array.isArray(o)||(it=function ReactPictureAnnotation_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ReactPictureAnnotation_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ReactPictureAnnotation_arrayLikeToArray(o,minLen)}(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function ReactPictureAnnotation_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function ReactPictureAnnotation_classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function _setPrototypeOf(o,p){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(o,p){return o.__proto__=p,o})(o,p)}function _createSuper(Derived){var hasNativeReflectConstruct=function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function _createSuperInternal(){var result,Super=_getPrototypeOf(Derived);if(hasNativeReflectConstruct){var NewTarget=_getPrototypeOf(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else result=Super.apply(this,arguments);return _possibleConstructorReturn(this,result)}}function _possibleConstructorReturn(self,call){return!call||"object"!==_typeof(call)&&"function"!=typeof call?_assertThisInitialized(self):call}function _assertThisInitialized(self){if(void 0===self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _getPrototypeOf(o){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(o){return o.__proto__||Object.getPrototypeOf(o)})(o)}pdf_default.a.GlobalWorkerOptions.workerSrc="https://cdf-hub-bundles.cogniteapp.com/dependencies/pdfjs-dist@2.4.456/build/pdf.worker.min.js";var defaultState={scale:1,originX:0,originY:0},ReactPictureAnnotation_ReactPictureAnnotation=function(_React$Component){!function _inherits(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}}),superClass&&_setPrototypeOf(subClass,superClass)}(ReactPictureAnnotation,_React$Component);var _super=_createSuper(ReactPictureAnnotation);function ReactPictureAnnotation(){var _this;ReactPictureAnnotation_classCallCheck(this,ReactPictureAnnotation);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return(_this=_super.call.apply(_super,[this].concat(args))).shapes=[],_this.currentTransformer=void 0,_this.pendingShapeId=null,_this.state={inputPosition:{left:0,right:0,maxHeight:0},showInput:!1},_this.currentAnnotationData=[],_this.selectedIdTrueValue=null,_this.canvasRef=delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createRef(),_this.canvas2D=void 0,_this.imageCanvasRef=delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createRef(),_this.imageCanvas2D=void 0,_this.currentImageElement=void 0,_this.currentAnnotationState=new DefaultAnnotationState_DefaultAnnotationState(_assertThisInitialized(_this)),_this.scaleState=defaultState,_this.startDrag=void 0,_this.lastPinchLength=void 0,_this._PDF_DOC=void 0,_this.componentDidMount=_asyncToGenerator(regeneratorRuntime.mark((function _callee(){var currentCanvas,currentImageCanvas;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(currentCanvas=_this.canvasRef.current,currentImageCanvas=_this.imageCanvasRef.current,!_this.props.pdf){_context.next=7;break}return _context.next=5,pdf_default.a.getDocument({url:_this.props.pdf}).promise;case 5:_this._PDF_DOC=_context.sent,_this.props.onPDFLoaded&&_this.props.onPDFLoaded({pages:_this._PDF_DOC.numPages});case 7:currentCanvas&&currentImageCanvas&&(_this.setCanvasDPI(),_this.canvas2D=currentCanvas.getContext("2d"),_this.imageCanvas2D=currentImageCanvas.getContext("2d"),_this.onImageChange(),currentCanvas.addEventListener("wheel",_this.onWheel,{passive:!1})),_this.syncAnnotationData(),_this.syncSelectedId();case 10:case"end":return _context.stop()}}),_callee)}))),_this.componentDidUpdate=function(){var _ref2=_asyncToGenerator(regeneratorRuntime.mark((function _callee2(prevProps){var _this$props,width,height,image,pdf,page;return regeneratorRuntime.wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(_this$props=_this.props,width=_this$props.width,height=_this$props.height,image=_this$props.image,pdf=_this$props.pdf,page=_this$props.page,prevProps.width===width&&prevProps.height===height||(_this.setCanvasDPI(),_this.onShapeChange(),_this.onImageChange()),prevProps.pdf===pdf){_context2.next=11;break}if(!pdf){_context2.next=10;break}return _context2.next=6,pdf_default.a.getDocument({url:pdf}).promise;case 6:_this._PDF_DOC=_context2.sent,_this.props.onPDFLoaded&&_this.props.onPDFLoaded({pages:_this._PDF_DOC.numPages}),_context2.next=11;break;case 10:_this._PDF_DOC=void 0;case 11:if(image&&prevProps.image!==image&&(_this.cleanImage(),_this.currentImageElement||_this.reset(),_this.currentImageElement&&image&&(_this.currentImageElement.src=image)),!pdf||prevProps.pdf===pdf&&prevProps.page===page){_context2.next=18;break}if(_this.currentImageElement||_this.reset(),!_this.currentImageElement||!_this._PDF_DOC){_context2.next=18;break}return _context2.next=17,_this.loadPDFPage();case 17:_this.currentImageElement.src=_context2.sent;case 18:_this.syncAnnotationData(),_this.syncSelectedId();case 20:case"end":return _context2.stop()}}),_callee2)})));return function(_x){return _ref2.apply(this,arguments)}}(),_this.componentWillUnmount=function(){_this.canvasRef.current&&_this.canvasRef.current.removeEventListener("wheel",_this.onWheel)},_this.calculateMousePosition=function(positionX,positionY){var _this$scaleState=_this.scaleState,originX=_this$scaleState.originX,originY=_this$scaleState.originY,scale=_this$scaleState.scale;return{positionX:(positionX-originX)/scale,positionY:(positionY-originY)/scale}},_this.getOriginalImageSize=function(){return _this.currentImageElement?{width:_this.currentImageElement.width,height:_this.currentImageElement.height}:{width:1,height:1}},_this.calculateShapePositionNoOffset=function(shapeData){var x=shapeData.x,y=shapeData.y,width=shapeData.width,height=shapeData.height,scaledX=x,scaledWidth=width,scaledY=y,scaledHeight=height;return _this.currentImageElement&&width<1&&height<1&&width>0&&height>0&&(scaledX=x*_this.currentImageElement.width,scaledWidth=width*_this.currentImageElement.width,scaledY=y*_this.currentImageElement.height,scaledHeight=height*_this.currentImageElement.height),{x:scaledX,y:scaledY,width:scaledWidth,height:scaledHeight}},_this.calculateShapePosition=function(shapeData){var _this$scaleState2=_this.scaleState,originX=_this$scaleState2.originX,originY=_this$scaleState2.originY,scale=_this$scaleState2.scale,_this$calculateShapeP=_this.calculateShapePositionNoOffset(shapeData);return{x:_this$calculateShapeP.x*scale+originX,y:_this$calculateShapeP.y*scale+originY,width:_this$calculateShapeP.width*scale,height:_this$calculateShapeP.height*scale}},_this.setAnnotationState=function(annotationState){_this.currentAnnotationState=annotationState},_this.onShapeChange=function(){if(_this.canvas2D&&_this.canvasRef.current){_this.canvas2D.clearRect(0,0,_this.canvasRef.current.width,_this.canvasRef.current.height);var hasSelectedItem=!1;if(1===_this.getOriginalImageSize().width)return;var _step,_iterator=ReactPictureAnnotation_createForOfIteratorHelper(_this.shapes);try{for(_iterator.s();!(_step=_iterator.n()).done;){var item=_step.value,isSelected=item.getAnnotationData().id===_this.selectedId,scale=_this.scaleState.scale,_item$paint=item.paint(_this.canvas2D,_this.calculateShapePosition,isSelected,_this.props.drawLabel,scale,!1),x=_item$paint.x,y=_item$paint.y,_height=_item$paint.height,width=_item$paint.width;if(isSelected){_this.currentTransformer&&_this.currentTransformer.id===item.getAnnotationData().id||(_this.currentTransformer=new Transformer(item,_this.props.editable,_this.getOriginalImageSize,_this.calculateShapePositionNoOffset)),hasSelectedItem=!0,_this.currentTransformer.paint(_this.canvas2D,_this.calculateShapePosition);var _this$props2=_this.props,containerWidth=_this$props2.width,containerHeight=_this$props2.height,leftOfMiddle=x<containerWidth/2,topOfMiddle=y<containerHeight/2,_item$getAnnotationDa=item.getAnnotationData().mark.strokeWidth,strokeWidth=void 0===_item$getAnnotationDa?4:_item$getAnnotationDa,margin=strokeWidth+10;_this.setState({showInput:!0,inputPosition:Object.assign({},leftOfMiddle?{left:x}:{right:containerWidth-(x+width)},topOfMiddle?{top:y+_height+strokeWidth}:{bottom:-y+strokeWidth},topOfMiddle?{paddingTop:margin}:{paddingBottom:margin},topOfMiddle&&{maxHeight:"calc(".concat(_this.props.height,"px - ").concat(y+_height+2*margin,"px)")},!topOfMiddle&&{maxHeight:"calc(".concat(y-2*margin,"px)")},{overflow:"visible",zIndex:1e3})})}}}catch(err){_iterator.e(err)}finally{_iterator.f()}hasSelectedItem||_this.setState({showInput:!1,inputComment:""})}_this.currentAnnotationData=_this.shapes.map((function(item){return item.getAnnotationData()}));var onChange=_this.props.onChange;onChange&&onChange(_this.currentAnnotationData)},_this.onDelete=function(){var id=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_this.selectedId,_this$props3=_this.props,onAnnotationDelete=_this$props3.onAnnotationDelete,editable=_this$props3.editable;if(editable){var deleteTarget=_this.shapes.findIndex((function(shape){return shape.getAnnotationData().id===id}));if(deleteTarget>=0){_this.shapes.splice(deleteTarget,1),_this.onShapeChange();var _annotation=_this.shapes.find((function(shape){return shape.getAnnotationData().id===id}));onAnnotationDelete&&_annotation&&onAnnotationDelete(_annotation.getAnnotationData())}_this.selectedId=null,_this.onShapeChange()}},_this.zoomIn=function(){_this.scaleState.scale>10?_this.scaleState.scale=10:_this.scaleState.scale<.1?_this.scaleState.scale=.1:(_this.scaleState.scale+=.2*_this.scaleState.scale,_this.scaleState.scale=Math.max(Math.min(_this.scaleState.scale,10),.1)),_this.setState({imageScale:_this.scaleState}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange()}))},_this.zoomOut=function(){_this.scaleState.scale>10?_this.scaleState.scale=10:_this.scaleState.scale<.1?_this.scaleState.scale=.1:(_this.scaleState.scale-=.2*_this.scaleState.scale,_this.scaleState.scale=Math.max(Math.min(_this.scaleState.scale,10),.1)),_this.setState({imageScale:_this.scaleState}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange()}))},_this.reset=_asyncToGenerator(regeneratorRuntime.mark((function _callee3(){var nextImageNode,loadProperDimentions;return regeneratorRuntime.wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:if(_this.props.onLoading(!0),(nextImageNode=_this.currentImageElement||document.createElement("img")).crossOrigin="anonymous",loadProperDimentions=function loadProperDimentions(){var width=nextImageNode.width,height=nextImageNode.height,imageNodeRatio=height/width,_this$props4=_this.props,canvasWidth=_this$props4.width,canvasHeight=_this$props4.height,canvasNodeRatio=canvasHeight/canvasWidth;if(!isNaN(imageNodeRatio)&&!isNaN(canvasNodeRatio))if(imageNodeRatio<canvasNodeRatio){var scale=canvasWidth/width;_this.scaleState={originX:0,originY:(canvasHeight-scale*height)/2,scale:scale}}else{var _scale=canvasHeight/height;_this.scaleState={originX:(canvasWidth-_scale*width)/2,originY:0,scale:_scale}}_this.onImageChange(),_this.onShapeChange()},!_this.currentImageElement){_context3.next=8;break}loadProperDimentions(),_context3.next=18;break;case 8:if(nextImageNode.addEventListener("load",(function(){_this.currentImageElement=nextImageNode,_this.props.onReady&&_this.props.onReady(_assertThisInitialized(_this)),loadProperDimentions()})),nextImageNode.alt="",!_this.props.image){_context3.next=14;break}nextImageNode.src=_this.props.image,_context3.next=18;break;case 14:if(!_this._PDF_DOC){_context3.next=18;break}return _context3.next=17,_this.loadPDFPage();case 17:nextImageNode.src=_context3.sent;case 18:_this.props.onLoading(!1);case 19:case"end":return _context3.stop()}}),_callee3)}))),_this.downloadFile=function(){var _ref4=_asyncToGenerator(regeneratorRuntime.mark((function _callee5(fileName){var drawText,drawBox,drawCustom,immediateDownload,annotationData,pdfDoc,pages,pageNum,currentPage,fontSize,pageRotation,_currentPage$getSize,pageWidth,pageHeight,DOWNLOAD_SCALE,bCanvas,bCtx,bData,bImage,pdfBytes,blob,url,a,_args5=arguments;return regeneratorRuntime.wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(drawText=!(_args5.length>1&&void 0!==_args5[1])||_args5[1],drawBox=!(_args5.length>2&&void 0!==_args5[2])||_args5[2],drawCustom=!(_args5.length>3&&void 0!==_args5[3])||_args5[3],immediateDownload=!(_args5.length>4&&void 0!==_args5[4])||_args5[4],_this._PDF_DOC&&_this.currentImageElement){_context5.next=6;break}return _context5.abrupt("return");case 6:return annotationData=_this.props.annotationData,_context5.t0=es.PDFDocument,_context5.next=10,_this._PDF_DOC.getData();case 10:return _context5.t1=_context5.sent,_context5.next=13,_context5.t0.load.call(_context5.t0,_context5.t1);case 13:if(pdfDoc=_context5.sent,pages=pdfDoc.getPages(),pageNum=_this.props.page?_this.props.page-1:0,currentPage=pages[pageNum],fontSize=12,pageRotation=_this.getPageRotation(currentPage)%360,_currentPage$getSize=currentPage.getSize(),pageWidth=_currentPage$getSize.width,pageHeight=_currentPage$getSize.height,DOWNLOAD_SCALE=4,bCanvas=document.createElement("canvas"),bCtx=bCanvas.getContext("2d"),bCanvas.width=pageWidth*DOWNLOAD_SCALE,bCanvas.height=pageHeight*DOWNLOAD_SCALE,!annotationData){_context5.next=28;break}return _context5.next=28,Promise.all(annotationData.map(function(){var _ref5=_asyncToGenerator(regeneratorRuntime.mark((function _callee4(el){var _this$currentImageEle,_this$currentImageEle2,color,_this$calculateShapeP2,x,y,width,height,coordsFromBottomLeft,drawX,drawY,tmpWidth,_tmpWidth,noXYRotate,newX,newY;return regeneratorRuntime.wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:if(color=parse_color_default()(el.mark.strokeColor||"blue").rgb,_this$calculateShapeP2=_this.calculateShapePositionNoOffset(el.mark),x=_this$calculateShapeP2.x,y=_this$calculateShapeP2.y,width=_this$calculateShapeP2.width,height=_this$calculateShapeP2.height,x/=(null===(_this$currentImageEle=_this.currentImageElement)||void 0===_this$currentImageEle?void 0:_this$currentImageEle.width)||1,width/=_this.currentImageElement.width,y/=(null===(_this$currentImageEle2=_this.currentImageElement)||void 0===_this$currentImageEle2?void 0:_this$currentImageEle2.height)||1,height/=_this.currentImageElement.height,coordsFromBottomLeft={x:x,y:1-y},drawX=null,drawY=null,90===pageRotation?(drawX=1-coordsFromBottomLeft.y,drawY=coordsFromBottomLeft.x,tmpWidth=width,width=height,height=-tmpWidth):180===pageRotation?(drawX=1-coordsFromBottomLeft.x,drawY=1-coordsFromBottomLeft.y,height=-height,width=-width):270===pageRotation?(drawX=coordsFromBottomLeft.y,drawY=1-coordsFromBottomLeft.x,_tmpWidth=width,width=-height,height=_tmpWidth):(drawX=coordsFromBottomLeft.x,drawY=coordsFromBottomLeft.y),noXYRotate=!(90===pageRotation||270===pageRotation),!el.mark.draw){_context4.next=21;break}return newX=drawX*pageWidth*DOWNLOAD_SCALE,newY=(1-drawY)*pageHeight*DOWNLOAD_SCALE,bCtx.translate(0,0),bCtx.save(),bCtx.translate(newX,newY),bCtx.rotate(-pageRotation*Math.PI/180),el.mark.draw(bCtx,0,0,width*pageWidth*DOWNLOAD_SCALE,height*pageHeight*DOWNLOAD_SCALE,1,!0),bCtx.restore(),_context4.abrupt("return");case 21:el.comment&&drawText&&currentPage.drawText(el.comment,{x:(drawX+(noXYRotate?0:width))*pageWidth+(noXYRotate?2:-fontSize),y:(drawY+(noXYRotate?-height:0))*pageHeight+(noXYRotate?-fontSize:-2),size:fontSize,rotate:Object(es.degrees)(pageRotation)}),drawBox&&currentPage.drawRectangle({x:drawX*pageWidth,y:drawY*pageHeight,width:width*pageWidth,height:-height*pageHeight,borderWidth:el.mark.strokeWidth||2,borderColor:Object(es.rgb)(color[0]/255,color[1]/255,color[2]/255)});case 23:case"end":return _context4.stop()}}),_callee4)})));return function(_x3){return _ref5.apply(this,arguments)}}()));case 28:if(!drawCustom){_context5.next=36;break}return _context5.next=31,new Promise((function(resolve){bCanvas.toBlob((function(blb){null==blb||blb.arrayBuffer().then(resolve)}))}));case 31:return bData=_context5.sent,_context5.next=34,pdfDoc.embedPng(bData);case 34:bImage=_context5.sent,currentPage.drawImage(bImage,{x:0,y:0,width:pageWidth,height:pageHeight});case 36:if(!immediateDownload){_context5.next=50;break}return _context5.next=39,pdfDoc.save();case 39:pdfBytes=_context5.sent,blob=new Blob([pdfBytes],{type:"application/pdf"}),url=window.URL.createObjectURL(blob),(a=document.createElement("a")).href=url,a.download=fileName,document.body.appendChild(a),a.style.display="none",a.click(),a.remove(),setTimeout((function(){return window.URL.revokeObjectURL(url)}),1e3);case 50:return _context5.abrupt("return",pdfDoc);case 51:case"end":return _context5.stop()}}),_callee5)})));return function(_x2){return _ref4.apply(this,arguments)}}(),_this.extractFromCanvas=function(x,y,width,height){if(_this.currentImageElement){var resultSize=_this.calculateShapePositionNoOffset({x:x,y:y,width:width,height:height}),bCanvas=document.createElement("canvas");return bCanvas.height=resultSize.height,bCanvas.width=resultSize.width,bCanvas.getContext("2d").drawImage(_this.currentImageElement,resultSize.x,resultSize.y,resultSize.width,resultSize.height,0,0,resultSize.width,resultSize.height),bCanvas.toDataURL("image/png")}return""},_this.syncAnnotationData=function(){var annotationData=_this.props.annotationData;if(annotationData){var refreshShapesWithAnnotationData=function refreshShapesWithAnnotationData(){var nextShapes=annotationData.map((function(eachAnnotationData){return new Shape.a(eachAnnotationData,_this.onShapeChange,_this.getOriginalImageSize)}));_this.shapes=nextShapes,nextShapes.find((function(el){return el.getAnnotationData().id===_this.selectedId}))||(_this.selectedId=null),_this.onShapeChange()};if(annotationData.length!==_this.shapes.length)refreshShapesWithAnnotationData();else{var _step2,_loop=function _loop(annotationDataItem){var targetShape=_this.shapes.find((function(item){return item.getAnnotationData().id===annotationDataItem.id}));return targetShape&&targetShape.equal(annotationDataItem)&&JSON.stringify(targetShape.getAnnotationData().mark)===JSON.stringify(annotationDataItem.mark)?"continue":(refreshShapesWithAnnotationData(),"break")},_iterator2=ReactPictureAnnotation_createForOfIteratorHelper(annotationData);try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _ret=_loop(_step2.value);if("continue"!==_ret&&"break"===_ret)break}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}},_this.syncSelectedId=function(){var selectedId=_this.props.selectedId;selectedId&&selectedId!==_this.selectedId&&(_this.selectedId=selectedId,_this.onShapeChange())},_this.setCanvasDPI=function(){var currentCanvas=_this.canvasRef.current,currentImageCanvas=_this.imageCanvasRef.current;if(currentCanvas&&currentImageCanvas){var currentCanvas2D=currentCanvas.getContext("2d"),currentImageCanvas2D=currentImageCanvas.getContext("2d");currentCanvas2D&&currentImageCanvas2D&&(currentCanvas2D.resetTransform(),currentImageCanvas2D.resetTransform(),currentCanvas2D.scale(2,2),currentImageCanvas2D.scale(2,2))}},_this.onInputCommentChange=function(comment){if(_this.props.editable){var selectedShapeIndex=_this.shapes.findIndex((function(item){return item.getAnnotationData().id===_this.selectedId}));_this.shapes[selectedShapeIndex].getAnnotationData().comment=comment,_this.selectedId=null,_this.onShapeChange()}},_this.cleanImage=function(){_this.imageCanvas2D&&_this.imageCanvasRef.current&&_this.imageCanvas2D.clearRect(0,0,_this.imageCanvasRef.current.width,_this.imageCanvasRef.current.height)},_this.onImageChange=_asyncToGenerator(regeneratorRuntime.mark((function _callee6(){var _this$scaleState3,originX,originY,scale;return regeneratorRuntime.wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:_this.cleanImage(),_this.imageCanvas2D&&_this.imageCanvasRef.current&&(_this$scaleState3=_this.scaleState,originX=_this$scaleState3.originX,originY=_this$scaleState3.originY,scale=_this$scaleState3.scale,_this.currentImageElement?_this.imageCanvas2D.drawImage(_this.currentImageElement,originX,originY,_this.currentImageElement.width*scale,_this.currentImageElement.height*scale):_this.reset());case 2:case"end":return _context6.stop()}}),_callee6)}))),_this.createContext=function(page){var viewport=page.getViewport({scale:Math.min(Math.max(_this.props.width/(page.view[2]/4),_this.props.height/(page.view[3]/4),1),8)}),canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");return canvas.height=viewport.height,canvas.width=viewport.width,{canvas:canvas,ctx:ctx,viewport:viewport}},_this.loadPDFPage=_asyncToGenerator(regeneratorRuntime.mark((function _callee7(){var pageNum,page,_this$createContext,canvas,ctx,viewport,data,_args7=arguments;return regeneratorRuntime.wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(pageNum=_args7.length>0&&void 0!==_args7[0]?_args7[0]:_this.props.page||1,!_this._PDF_DOC){_context7.next=10;break}return _context7.next=4,_this._PDF_DOC.getPage(pageNum);case 4:return page=_context7.sent,_this$createContext=_this.createContext(page),canvas=_this$createContext.canvas,ctx=_this$createContext.ctx,viewport=_this$createContext.viewport,_context7.next=8,page.render({canvasContext:ctx,viewport:viewport}).promise;case 8:return data=canvas.toDataURL("image/png",1),_context7.abrupt("return",data);case 10:return _context7.abrupt("return","");case 11:case"end":return _context7.stop()}}),_callee7)}))),_this.onMouseDown=function(event){var _this$props5=_this.props,editable=_this$props5.editable,creatable=_this$props5.creatable,_event$nativeEvent=event.nativeEvent,offsetX=_event$nativeEvent.offsetX,offsetY=_event$nativeEvent.offsetY,_this$calculateMouseP=_this.calculateMousePosition(offsetX,offsetY),positionX=_this$calculateMouseP.positionX,positionY=_this$calculateMouseP.positionY;if(_this.currentAnnotationState.onMouseDown(positionX,positionY),!creatable&&!editable||event.shiftKey){var _this$scaleState4=_this.scaleState,originX=_this$scaleState4.originX,originY=_this$scaleState4.originY;_this.startDrag={x:offsetX,y:offsetY,originX:originX,originY:originY}}},_this.onMouseMove=function(event){var _event$nativeEvent2=event.nativeEvent,offsetX=_event$nativeEvent2.offsetX,offsetY=_event$nativeEvent2.offsetY,_this$calculateMouseP2=_this.calculateMousePosition(offsetX,offsetY),positionX=_this$calculateMouseP2.positionX,positionY=_this$calculateMouseP2.positionY;_this.currentAnnotationState.onMouseMove(positionX,positionY),_this.startDrag&&(_this.scaleState.originX=_this.startDrag.originX+(offsetX-_this.startDrag.x),_this.scaleState.originY=_this.startDrag.originY+(offsetY-_this.startDrag.y),_this.setState({imageScale:_this.scaleState}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange()})))},_this.onMouseUp=function(){_this.currentAnnotationState.onMouseUp(),_this.startDrag=void 0},_this.onTouchStart=function(event){var editable=_this.props.editable,_event$touches$=event.touches[0],clientX=_event$touches$.clientX,clientY=_event$touches$.clientY,_this$calculateMouseP3=_this.calculateMousePosition(clientX,clientY),positionX=_this$calculateMouseP3.positionX,positionY=_this$calculateMouseP3.positionY;if(_this.currentAnnotationState.onMouseDown(positionX,positionY),!editable){var touches=event.touches;if(2===touches.length)_this.lastPinchLength=getPinchLength(touches);else if(1===touches.length){_this.lastPinchLength=void 0;var _this$scaleState5=_this.scaleState,originX=_this$scaleState5.originX,originY=_this$scaleState5.originY;_this.startDrag={x:clientX,y:clientY,originX:originX,originY:originY}}}tryCancelEvent(event)},_this.onTouchMove=function(event){var editable=_this.props.editable,_event$touches$2=event.touches[0],clientX=_event$touches$2.clientX,clientY=_event$touches$2.clientY,_this$calculateMouseP4=_this.calculateMousePosition(clientX,clientY),positionX=_this$calculateMouseP4.positionX,positionY=_this$calculateMouseP4.positionY;if(editable)_this.currentAnnotationState.onMouseMove(positionX,positionY);else{var touches=event.touches;2===touches.length?_this.handlePinchChange(touches):1===touches.length&&_this.startDrag&&(_this.scaleState.originX=_this.startDrag.originX+(clientX-_this.startDrag.x),_this.scaleState.originY=_this.startDrag.originY+(clientY-_this.startDrag.y),_this.setState({imageScale:_this.scaleState}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange()})))}tryCancelEvent(event)},_this.onTouchEnd=function(){_this.currentAnnotationState.onMouseUp(),_this.startDrag=void 0},_this.handlePinchChange=function(touches){var length=getPinchLength(touches),midpoint=getPinchMidpoint(touches),scale=_this.lastPinchLength?_this.scaleState.scale*length/_this.lastPinchLength:_this.scaleState.scale;scale>10&&(scale=10),scale<.1&&(scale=.1);var _this$scaleState6=_this.scaleState,originX=_this$scaleState6.originX,originY=_this$scaleState6.originY;_this.scaleState.originX=midpoint.x-(midpoint.x-originX)/_this.scaleState.scale*scale,_this.scaleState.originY=midpoint.y-(midpoint.y-originY)/_this.scaleState.scale*scale,_this.scaleState.scale=scale,_this.setState({imageScale:_this.scaleState}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange()}))},_this.onMouseLeave=function(){_this.currentAnnotationState.onMouseLeave()},_this.onWheel=function(event){event.preventDefault(),event.stopPropagation();var preScale=_this.scaleState.scale,offsetX=event.offsetX,offsetY=event.offsetY,ctrlKey=event.ctrlKey,deltaY=event.deltaY,deltaX=event.deltaX;if(ctrlKey){_this.scaleState.scale>10?_this.scaleState.scale=10:_this.scaleState.scale<.1?_this.scaleState.scale=.1:(_this.scaleState.scale-=.01*deltaY,_this.scaleState.scale=Math.max(Math.min(_this.scaleState.scale,10),.1));var _this$scaleState7=_this.scaleState,originX=_this$scaleState7.originX,originY=_this$scaleState7.originY,scale=_this$scaleState7.scale;_this.scaleState.originX=offsetX-(offsetX-originX)/preScale*scale,_this.scaleState.originY=offsetY-(offsetY-originY)/preScale*scale}else _this.scaleState.originX-=2*deltaX,_this.scaleState.originY-=2*deltaY;_this.setState({imageScale:_this.scaleState}),requestAnimationFrame((function(){_this.onShapeChange(),_this.onImageChange()}))},_this.getPageRotation=function(page){var rotation=0;return!!page.getRotation()&&(rotation=page.getRotation().angle),void 0===rotation&&(rotation=0),rotation},_this}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(ReactPictureAnnotation,[{key:"render",value:function render(){var _this2=this,_this$props6=this.props,width=_this$props6.width,height=_this$props6.height,renderItemPreview=_this$props6.renderItemPreview,editable=_this$props6.editable,_this$state=this.state,showInput=_this$state.showInput,inputPosition=_this$state.inputPosition;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"rp-stage"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("canvas",{style:{width:width,height:height},className:"rp-image",ref:this.imageCanvasRef,width:2*width,height:2*height}),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("canvas",{className:"rp-shapes",style:{width:width,height:height},ref:this.canvasRef,width:2*width,height:2*height,onMouseDown:this.onMouseDown,onMouseMove:this.onMouseMove,onMouseUp:this.onMouseUp,onMouseLeave:this.onMouseLeave,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd,onTouchMove:this.onTouchMove}),showInput&&this.selectedItem&&delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"rp-selected-input",style:inputPosition,onMouseEnter:function onMouseEnter(){_this2.selectedId=_this2.selectedItem.id,_this2.props.hoverable||_this2.currentAnnotationState.onMouseUp()}},renderItemPreview(editable,this.selectedItem,this.onInputCommentChange,this.onDelete,inputPosition.maxHeight)))}},{key:"selectedId",set:function set(value){var onSelect=this.props.onSelect;this.selectedIdTrueValue!==value&&onSelect(value),this.selectedIdTrueValue=value},get:function get(){return this.selectedIdTrueValue}},{key:"selectedItem",get:function get(){var _this3=this;if(this.props.annotationData)return this.props.annotationData.find((function(el){return el.id===_this3.selectedIdTrueValue}))}}]),ReactPictureAnnotation}(delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.Component);ReactPictureAnnotation_ReactPictureAnnotation.defaultProps={renderItemPreview:function renderItemPreview(editable,annotation,onChange,onDelete){return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(DefaultInputSection.a,{editable:editable,annotation:annotation,onChange:onChange,onDelete:onDelete})},editable:!1,creatable:!1,drawLabel:!0,usePercentage:!0,onLoading:function onLoading(){return!0}};var getPinchMidpoint=function getPinchMidpoint(touches){var touch1=touches[0],touch2=touches[1];return{x:(touch1.clientX+touch2.clientX)/2,y:(touch1.clientY+touch2.clientY)/2}},getPinchLength=function getPinchLength(touches){var touch1=touches[0],touch2=touches[1];return Math.sqrt(Math.pow(touch1.clientY-touch2.clientY,2)+Math.pow(touch1.clientX-touch2.clientX,2))},tryCancelEvent=function tryCancelEvent(event){return!1!==event.cancelable&&(event.preventDefault(),!0)}},,,function(module,__webpack_exports__,__webpack_require__){"use strict";var delegated_reactfrom_dll_reference_storybook_docs_dll=__webpack_require__(2),delegated_reactfrom_dll_reference_storybook_docs_dll_default=__webpack_require__.n(delegated_reactfrom_dll_reference_storybook_docs_dll),DeleteButton=function(){return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("svg",{className:"rp-delete",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("g",{"data-name":"Layer 2"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("g",{"data-name":"trash-2"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("rect",{width:"24",height:"24",opacity:"0"}),delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("path",{d:"M21 6h-5V4.33A2.42 2.42 0 0 0 13.5 2h-3A2.42 2.42 0 0 0 8 4.33V6H3a1 1 0 0 0 0 2h1v11a3 3 0 0 0 3 3h10a3 3 0 0 0 3-3V8h1a1 1 0 0 0 0-2zM10 16a1 1 0 0 1-2 0v-4a1 1 0 0 1 2 0zm0-11.67c0-.16.21-.33.5-.33h3c.29 0 .5.17.5.33V6h-4zM16 16a1 1 0 0 1-2 0v-4a1 1 0 0 1 2 0z"}))))};__webpack_exports__.a=function(_ref){var editable=_ref.editable,annotation=_ref.annotation,_onChange=_ref.onChange,onDelete=_ref.onDelete;return delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("div",{className:"rp-default-input-section"},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("input",{className:"rp-default-input-section_input",placeholder:"INPUT TAG HERE",value:annotation.comment,disabled:!editable,onChange:function onChange(e){return _onChange(e.target.value)}}),editable&&delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement("a",{className:"rp-default-input-section_delete",onClick:function onClick(){return onDelete()}},delegated_reactfrom_dll_reference_storybook_docs_dll_default.a.createElement(DeleteButton,null)))}},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("DY47")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("kvVz")},,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("LqLs")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("3voH")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("6U7i")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("sVFb")},,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("Ee2X")},,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("F63i")},,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("oXkQ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("+kY7")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("5878")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("Kkar")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("m9LP")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("7nmT")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("l1C2")},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("iKE+")},,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("CUMQ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("mlET")},,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("f9bD")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("b2e3")},,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("N4z3")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("GFpt")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("1Mu/")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("vfdX")},,,,,,,function(module,exports){},,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("AbK1")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("T4+q")},function(module,exports,__webpack_require__){__webpack_require__(232),__webpack_require__(257),__webpack_require__(258),__webpack_require__(303),__webpack_require__(426),__webpack_require__(460),__webpack_require__(465),__webpack_require__(477),__webpack_require__(479),__webpack_require__(481),module.exports=__webpack_require__(488)},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("ARua")},,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("gqY9")},,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("9JhN")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("PjZX")},,,,,,,function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);__webpack_require__(107)},,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("/Qos")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("JY+C")},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("ZUdG")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("tQbP")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("//nZ")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("wFLD")},,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("dSaG")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("hQin")},,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("LJ7e")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("I2fK")},,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("3kp9")},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("/bc2")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("/JuR")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("+Bxv")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("muFx")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("Wci6")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("WoRU")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("o3fS")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("JmTi")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("xaiR")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("SlD/")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("Monn")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("fmNP")},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("uFXj")},,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("V0IW")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("OCSl")},,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("jLkM")},,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("kA4r")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("Blm6")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("ssvU")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("lZm3")},,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("5BYb")},,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("maj8")},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("aWzz")},,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("2q8g")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("nDih")},,,,,,,,,,,,,,,,,,,,,,,,,,function(module,exports,__webpack_require__){"use strict";__webpack_require__(6),__webpack_require__(37),__webpack_require__(34),__webpack_require__(32),__webpack_require__(31),__webpack_require__(482),__webpack_require__(484),__webpack_require__(11),__webpack_require__(35);var _clientApi=__webpack_require__(43),_clientLogger=__webpack_require__(30),_configFilename=__webpack_require__(487);function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}(_configFilename.args||_configFilename.argTypes)&&_clientLogger.logger.warn("Invalid args/argTypes in config, ignoring.",JSON.stringify({args:_configFilename.args,argTypes:_configFilename.argTypes})),_configFilename.decorators&&_configFilename.decorators.forEach((function(decorator){return(0,_clientApi.addDecorator)(decorator,!1)})),(_configFilename.parameters||_configFilename.globals||_configFilename.globalTypes)&&(0,_clientApi.addParameters)(_objectSpread(_objectSpread({},_configFilename.parameters),{},{globals:_configFilename.globals,globalTypes:_configFilename.globalTypes}),!1),_configFilename.argTypesEnhancers&&_configFilename.argTypesEnhancers.forEach((function(enhancer){return(0,_clientApi.addArgTypesEnhancer)(enhancer)}))},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("ct80")},,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("oD4t")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("2sZ7")},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,"parameters",(function(){return parameters}));var parameters={actions:{argTypesRegex:"^on[A-Z].*"}}},function(module,exports,__webpack_require__){"use strict";(function(module){(0,__webpack_require__(107).configure)([__webpack_require__(489)],module,!1)}).call(this,__webpack_require__(86)(module))},function(module,exports,__webpack_require__){var map={"./index.stories.tsx":490};function webpackContext(req){var id=webpackContextResolve(req);return __webpack_require__(id)}function webpackContextResolve(req){if(!__webpack_require__.o(map,req)){var e=new Error("Cannot find module '"+req+"'");throw e.code="MODULE_NOT_FOUND",e}return map[req]}webpackContext.keys=function webpackContextKeys(){return Object.keys(map)},webpackContext.resolve=webpackContextResolve,module.exports=webpackContext,webpackContext.id=489},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__),function(module){__webpack_require__(6),__webpack_require__(13),__webpack_require__(21),__webpack_require__(25),__webpack_require__(492),__webpack_require__(26),__webpack_require__(16),__webpack_require__(19),__webpack_require__(24),__webpack_require__(15),__webpack_require__(23),__webpack_require__(8),__webpack_require__(7),__webpack_require__(32),__webpack_require__(33),__webpack_require__(14),__webpack_require__(18),__webpack_require__(17),__webpack_require__(20);var _storybook_react__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(107),react__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(2),react__WEBPACK_IMPORTED_MODULE_20___default=__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_20__),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(39),styled_components__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(227),_src__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(42);function _templateObject(){var data=function _taggedTemplateLiteral(strings,raw){raw||(raw=strings.slice(0));return Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}(["\n  height: 800px;\n  width: 100%;\n  position: relative;\n  display: block;\n  overflow: hidden;\n"]);return _templateObject=function _templateObject(){return data},data}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(arr)))return;var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var defaultAnnotations=[{id:"a",comment:"Hello World",mark:{type:"RECT",width:161,height:165,x:.1,y:.1}},{id:"b",comment:"Hello World",mark:{type:"RECT",width:161,height:165,x:0,y:0}},{id:"test",comment:"percentages",mark:{type:"RECT",width:.2,height:.2,x:.5,y:.5}},{id:"test2",comment:"percentages 2 ",mark:{type:"RECT",width:.5,height:.1,x:.9,y:.9}},{id:"test2--a",comment:"percentages 2 ",mark:{type:"RECT",width:.5,height:.1,x:.25,y:.75}},{id:"test2--b",comment:"percentages 2 ",mark:{type:"RECT",width:.5,height:.1,x:.75,y:.25}}];Object(_storybook_react__WEBPACK_IMPORTED_MODULE_19__.storiesOf)("Annotator",module).addParameters({storySource:{source:'import { storiesOf } from "@storybook/react";\nimport React, { useEffect, useState } from "react";\nimport { action } from "@storybook/addon-actions";\nimport styled from "styled-components";\nimport { ReactPictureAnnotation } from "../src";\nimport { IAnnotation } from "../src/Annotation";\nimport { IShapeData } from "../src/Shape";\n\nconst defaultAnnotations = [\n  {\n    id: "a",\n    comment: "Hello World",\n    mark: {\n      type: "RECT",\n      width: 161,\n      height: 165,\n      x: 0.1,\n      y: 0.1,\n    },\n  },\n  {\n    id: "b",\n    comment: "Hello World",\n    mark: {\n      type: "RECT",\n      width: 161,\n      height: 165,\n      x: 0,\n      y: 0,\n    },\n  },\n  {\n    id: "test",\n    comment: "percentages",\n    mark: {\n      type: "RECT",\n      width: 0.2,\n      height: 0.2,\n      x: 0.5,\n      y: 0.5,\n    },\n  },\n  {\n    id: "test2",\n    comment: "percentages 2 ",\n    mark: {\n      type: "RECT",\n      width: 0.5,\n      height: 0.1,\n      x: 0.9,\n      y: 0.9,\n    },\n  },\n\n  {\n    id: "test2--a",\n    comment: "percentages 2 ",\n    mark: {\n      type: "RECT",\n      width: 0.5,\n      height: 0.1,\n      x: 0.25,\n      y: 0.75,\n    },\n  },\n  {\n    id: "test2--b",\n    comment: "percentages 2 ",\n    mark: {\n      type: "RECT",\n      width: 0.5,\n      height: 0.1,\n      x: 0.75,\n      y: 0.25,\n    },\n  },\n];\n\nstoriesOf("Annotator", module)\n  .add("No Edit", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(defaultAnnotations);\n\n    const [selectedId, setSelectedId] = useState<string | null>("a");\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedId={selectedId}\n          onSelect={(e) => {\n            setSelectedId(e);\n            action("onSelect")(e);\n          }}\n          image="https://unsplash.it/1200/600"\n        />\n      </Wrapper>\n    );\n  })\n  .add("PDF", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(defaultAnnotations);\n\n    const [selectedId, setSelectedId] = useState<string | null>("a");\n    const [page, setPage] = useState<number>(1);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n    const [total, setTotal] = useState<number>(1);\n    const annotationRef = React.createRef<ReactPictureAnnotation>();\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          ref={annotationRef}\n          hoverable={true}\n          page={page}\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedId={selectedId}\n          onSelect={(e) => {\n            setSelectedId(e);\n            action("onSelect")(e);\n          }}\n          onPDFLoaded={({ pages }) => {\n            setTotal(pages);\n          }}\n          pdf="https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf"\n        />\n        <div\n          style={{\n            position: "absolute",\n            bottom: 12,\n            left: "50%",\n            right: "50%",\n          }}\n        >\n          <button onClick={() => setPage(page - 1)} disabled={page === 1}>\n            Prev\n          </button>\n          <button onClick={() => setPage(page + 1)} disabled={page === total}>\n            Next\n          </button>\n        </div>\n      </Wrapper>\n    );\n  })\n  .add("Hoverable", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >([\n      {\n        id: "a",\n        comment: "Hello World",\n        mark: {\n          type: "RECT",\n          width: 161,\n          height: 165,\n          x: 229,\n          y: 92,\n        },\n      },\n    ]);\n\n    const [selectedId, setSelectedId] = useState<string | null>("a");\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n    return (\n      <ReactPictureAnnotation\n        width={size.width}\n        height={size.height}\n        annotationData={annotationData}\n        onChange={(data) => setAnnotationData(data)}\n        selectedId={selectedId}\n        onSelect={(e) => {\n          setSelectedId(e);\n          action("onSelect")(e);\n        }}\n        hoverable={true}\n        image="https://unsplash.it/1200/600"\n      />\n    );\n  })\n  .add("Refresh", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [image, setImage] = useState("https://picsum.photos/id/1/200/300");\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >([\n      {\n        id: "a",\n        comment: "Hello World",\n        mark: {\n          type: "RECT",\n          width: 161,\n          height: 165,\n          x: 229,\n          y: 92,\n        },\n      },\n    ]);\n\n    const [selectedId, setSelectedId] = useState<string | null>("a");\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n    return (\n      <Wrapper>\n        <button\n          onClick={() =>\n            setImage(\n              `https://picsum.photos/id/${Math.round(\n                Math.random() * 1000\n              )}/200/300`\n            )\n          }\n        >\n          Change Image\n        </button>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedId={selectedId}\n          onSelect={(e) => {\n            setSelectedId(e);\n            action("onSelect")(e);\n          }}\n          hoverable={true}\n          image={image}\n        />\n      </Wrapper>\n    );\n  })\n  .add("Editable", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(defaultAnnotations);\n\n    const [selectedId, setSelectedId] = useState<string | null>("a");\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    return (\n      <ReactPictureAnnotation\n        width={size.width}\n        height={size.height}\n        annotationData={annotationData}\n        onChange={(data) => setAnnotationData(data)}\n        selectedId={selectedId}\n        onSelect={(e) => {\n          setSelectedId(e);\n          action("onSelect")(e);\n        }}\n        editable={true}\n        image="https://unsplash.it/1200/600"\n      />\n    );\n  })\n  .add("Creatable", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(defaultAnnotations);\n\n    const [selectedId, setSelectedId] = useState<string | null>("a");\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    return (\n      <ReactPictureAnnotation\n        width={size.width}\n        height={size.height}\n        annotationData={annotationData}\n        onChange={(data) => setAnnotationData(data)}\n        selectedId={selectedId}\n        onSelect={(e) => {\n          setSelectedId(e);\n          action("onSelect")(e);\n        }}\n        creatable={true}\n        editable={false}\n        image="https://unsplash.it/1200/600"\n      />\n    );\n  })\n  .add("Custom Render", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(\n      defaultAnnotations.map((el) => ({\n        ...el,\n        mark: {\n          ...el.mark,\n          draw: (canvas, x, y, width, height) => {\n            canvas.beginPath();\n            canvas.fillStyle = "green";\n            canvas.arc(\n              x + width / 2,\n              y + height / 2,\n              Math.min(height, width) / 2,\n              0,\n              2 * Math.PI\n            );\n            canvas.stroke();\n            canvas.fill();\n          },\n        },\n      }))\n    );\n\n    const [selectedId, setSelectedId] = useState<string | null>("a");\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    return (\n      <ReactPictureAnnotation\n        width={size.width}\n        height={size.height}\n        annotationData={annotationData}\n        onChange={(data) => setAnnotationData(data)}\n        selectedId={selectedId}\n        onSelect={(e) => {\n          setSelectedId(e);\n          action("onSelect")(e);\n        }}\n        image="https://unsplash.it/1200/600"\n      />\n    );\n  })\n  .add("No Labels", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >([\n      {\n        id: "a",\n        comment: "HA HA HA",\n        mark: {\n          type: "RECT",\n          width: 161,\n          height: 165,\n          x: 229,\n          y: 92,\n        },\n      },\n    ]);\n\n    const [selectedId, setSelectedId] = useState<string | null>("a");\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedId={selectedId}\n          onSelect={(e) => {\n            setSelectedId(e);\n            action("onSelect")(e);\n          }}\n          drawLabel={false}\n          image="https://unsplash.it/1200/600"\n        />\n      </Wrapper>\n    );\n  })\n  .add("Colors", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n    const annotations = [\n      {\n        id: "a",\n        comment: "HA HA HA",\n        mark: {\n          type: "RECT",\n          width: 161,\n          height: 165,\n          x: 229,\n          y: 92,\n          strokeColor: "red",\n          backgroundColor: "rgba(255,0,0,0.2)",\n        },\n      },\n      {\n        id: "b",\n        comment: "HA HA HA 2",\n        mark: {\n          type: "RECT",\n          width: 116,\n          height: 116,\n          x: 429,\n          y: 192,\n          strokeColor: "green",\n          backgroundColor: "rgba(0,255,0,0.2)",\n        },\n      },\n    ];\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(annotations);\n\n    const [selectedId, setSelectedId] = useState<string | null>("a");\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    const changeColor = () => {\n      annotations[0].mark.strokeColor = "blue";\n      setAnnotationData(annotations);\n    };\n\n    return (\n      <Wrapper>\n        <button onClick={changeColor}>Change Color</button>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedId={selectedId}\n          onSelect={(e) => {\n            setSelectedId(e);\n            action("onSelect")(e);\n          }}\n          image="https://unsplash.it/1200/600"\n        />\n      </Wrapper>\n    );\n  })\n  .add("Custom Render using scale", () => {\n    const AnnotationComponent = () => {\n      const [size, setSize] = useState({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n\n      const [annotationData, setAnnotationData] = useState<\n        IAnnotation<IShapeData>[]\n      >(\n        defaultAnnotations.map((el) => ({\n          ...el,\n          mark: {\n            ...el.mark,\n            draw: (canvas, x, y, _, _2, scale) => {\n              const fontSize = 16 * (scale || 0);\n              canvas.font = `${fontSize}px verdana`;\n\n              canvas.fillStyle = "black";\n              canvas.fillText("Scaled text", x, y);\n            },\n          },\n        }))\n      );\n\n      const [selectedId, setSelectedId] = useState<string | null>("a");\n\n      const onResize = () => {\n        setSize({\n          width: window.innerWidth - 16,\n          height: window.innerHeight - 16,\n        });\n      };\n\n      useEffect(() => {\n        window.addEventListener("resize", onResize);\n        return () => {\n          window.removeEventListener("resize", onResize);\n        };\n      }, []);\n\n      return (\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedId={selectedId}\n          onSelect={(e) => setSelectedId(e)}\n          image="https://unsplash.it/1200/600"\n        />\n      );\n    };\n\n    return <AnnotationComponent />;\n  })\n  .add("Buttons", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >([\n      {\n        id: "a",\n        comment: "HA HA HA",\n        mark: {\n          type: "RECT",\n          width: 161,\n          height: 165,\n          x: 229,\n          y: 92,\n        },\n      },\n      {\n        id: "b",\n        comment: "HA HA HA 2",\n        mark: {\n          type: "RECT",\n          width: 116,\n          height: 116,\n          x: 429,\n          y: 192,\n        },\n      },\n    ]);\n\n    const [selectedId, setSelectedId] = useState<string | null>("a");\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    const annotationRef = React.createRef<ReactPictureAnnotation>();\n\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedId={selectedId}\n          onSelect={(e) => {\n            setSelectedId(e);\n            action("onSelect")(e);\n          }}\n          image="https://unsplash.it/1200/600"\n          ref={annotationRef}\n        />\n        <div style={{ position: "absolute", zIndex: 1000 }}>\n          <button\n            onClick={() => {\n              if (annotationRef.current) {\n                annotationRef.current.zoomIn();\n              }\n            }}\n          >\n            Zoom In\n          </button>\n          <button\n            onClick={() => {\n              if (annotationRef.current) {\n                annotationRef.current.zoomOut();\n              }\n            }}\n          >\n            Zoom Out\n          </button>\n          <button\n            onClick={() => {\n              if (annotationRef.current) {\n                annotationRef.current.reset();\n              }\n            }}\n          >\n            Reset\n          </button>\n        </div>\n      </Wrapper>\n    );\n  })\n  .add("Extract From Canvas", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >([defaultAnnotations[0]]);\n\n    const [src, setSrc] = useState<string | undefined>(undefined);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    const annotationRef = React.createRef<ReactPictureAnnotation>();\n\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          creatable={true}\n          onSelect={(e) => {\n            action("onSelect")(e);\n          }}\n          image="https://unsplash.it/1200/600"\n          ref={annotationRef}\n        />\n        <div style={{ position: "absolute", zIndex: 1000 }}>\n          <button\n            onClick={() => {\n              if (annotationRef.current) {\n                const { x, y, width, height } = annotationData[\n                  annotationData.length - 1\n                ].mark;\n                setSrc(\n                  annotationRef.current.extractFromCanvas(x, y, width, height)\n                );\n              }\n            }}\n          >\n            Get Image\n          </button>\n          <img src={src} style={{ width: 100, height: "auto" }} />\n        </div>\n      </Wrapper>\n    );\n  })\n  .add("Download", () => {\n    const [size, setSize] = useState({\n      width: window.innerWidth - 16,\n      height: window.innerHeight - 16,\n    });\n\n    const [annotationData, setAnnotationData] = useState<\n      IAnnotation<IShapeData>[]\n    >(\n      defaultAnnotations\n        .map(\n          (el, i) =>\n            ({\n              ...el,\n              mark: {\n                ...el.mark,\n                draw: (ctx, x, y, _, _2, scale) => {\n                  const fontsize = scale * 28;\n                  const fontface = "verdana";\n                  const text = `Hello! - ${i}`;\n\n                  ctx.font = fontsize + "px " + fontface;\n                  const textWidth = ctx.measureText(text).width + 8;\n\n                  ctx.textAlign = "left";\n                  ctx.textBaseline = "top";\n                  ctx.fillStyle = "red";\n                  ctx.fillRect(x, y, textWidth, fontsize + 4);\n                  ctx.fillStyle = "white";\n                  ctx.fillText(text, x + 4, y + 2);\n                },\n              },\n            } as IAnnotation<IShapeData>)\n        )\n        .concat([\n          {\n            id: "additional",\n            comment: "Hello World2",\n            mark: {\n              type: "RECT",\n              width: 0.2,\n              height: 0.3,\n              x: 0.1,\n              y: 0.25,\n            },\n          } as IAnnotation<IShapeData>,\n        ])\n    );\n\n    const [selectedId, setSelectedId] = useState<string | null>(null);\n\n    const onResize = () => {\n      setSize({\n        width: window.innerWidth - 16,\n        height: window.innerHeight - 16,\n      });\n    };\n\n    useEffect(() => {\n      window.addEventListener("resize", onResize);\n      return () => {\n        window.removeEventListener("resize", onResize);\n      };\n    }, []);\n\n    const annotationRef = React.createRef<ReactPictureAnnotation>();\n\n    return (\n      <Wrapper>\n        <ReactPictureAnnotation\n          width={size.width}\n          height={size.height}\n          annotationData={annotationData}\n          onChange={(data) => setAnnotationData(data)}\n          selectedId={selectedId}\n          onSelect={(e) => {\n            setSelectedId(e);\n            action("onSelect")(e);\n          }}\n          pdf="https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf"\n          ref={annotationRef}\n        />\n        <div style={{ position: "absolute", zIndex: 1000 }}>\n          <button\n            onClick={() => {\n              if (annotationRef.current) {\n                annotationRef.current.downloadFile("sample.pdf");\n              }\n            }}\n          >\n            Download\n          </button>\n        </div>\n      </Wrapper>\n    );\n  });\n\nconst Wrapper = styled.div`\n  height: 800px;\n  width: 100%;\n  position: relative;\n  display: block;\n  overflow: hidden;\n`;\n',locationsMap:{download:{startLoc:{col:7,line:804},endLoc:{col:3,line:899},startBody:{col:19,line:804},endBody:{col:3,line:899}},"extract-from-canvas":{startLoc:{col:7,line:742},endLoc:{col:3,line:803},startBody:{col:30,line:742},endBody:{col:3,line:803}},buttons:{startLoc:{col:7,line:644},endLoc:{col:3,line:741},startBody:{col:18,line:644},endBody:{col:3,line:741}},"custom-render-using-scale":{startLoc:{col:7,line:588},endLoc:{col:3,line:643},startBody:{col:36,line:588},endBody:{col:3,line:643}},colors:{startLoc:{col:7,line:511},endLoc:{col:3,line:587},startBody:{col:17,line:511},endBody:{col:3,line:587}},"no-labels":{startLoc:{col:7,line:455},endLoc:{col:3,line:510},startBody:{col:20,line:455},endBody:{col:3,line:510}},"custom-render":{startLoc:{col:7,line:394},endLoc:{col:3,line:454},startBody:{col:24,line:394},endBody:{col:3,line:454}},creatable:{startLoc:{col:7,line:351},endLoc:{col:3,line:393},startBody:{col:20,line:351},endBody:{col:3,line:393}},editable:{startLoc:{col:7,line:309},endLoc:{col:3,line:350},startBody:{col:19,line:309},endBody:{col:3,line:350}},refresh:{startLoc:{col:7,line:241},endLoc:{col:3,line:308},startBody:{col:18,line:241},endBody:{col:3,line:308}},hoverable:{startLoc:{col:7,line:188},endLoc:{col:3,line:240},startBody:{col:20,line:188},endBody:{col:3,line:240}},pdf:{startLoc:{col:7,line:122},endLoc:{col:3,line:187},startBody:{col:14,line:122},endBody:{col:3,line:187}},"no-edit":{startLoc:{col:7,line:80},endLoc:{col:3,line:121},startBody:{col:18,line:80},endBody:{col:3,line:121}}}}}).add("No Edit",(function(){var _useState2=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState2[0],setSize=_useState2[1],_useState4=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(defaultAnnotations),2),annotationData=_useState4[0],setAnnotationData=_useState4[1],_useState6=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("a"),2),selectedId=_useState6[0],setSelectedId=_useState6[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){setSelectedId(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600"}))})).add("PDF",(function(){var _useState8=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState8[0],setSize=_useState8[1],_useState10=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(defaultAnnotations),2),annotationData=_useState10[0],setAnnotationData=_useState10[1],_useState12=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("a"),2),selectedId=_useState12[0],setSelectedId=_useState12[1],_useState14=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(1),2),page=_useState14[0],setPage=_useState14[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]);var _useState16=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(1),2),total=_useState16[0],setTotal=_useState16[1],annotationRef=react__WEBPACK_IMPORTED_MODULE_20___default.a.createRef();return react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{ref:annotationRef,hoverable:!0,page:page,width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){setSelectedId(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},onPDFLoaded:function onPDFLoaded(_ref){var pages=_ref.pages;setTotal(pages)},pdf:"https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf"}),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("div",{style:{position:"absolute",bottom:12,left:"50%",right:"50%"}},react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("button",{onClick:function onClick(){return setPage(page-1)},disabled:1===page},"Prev"),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("button",{onClick:function onClick(){return setPage(page+1)},disabled:page===total},"Next")))})).add("Hoverable",(function(){var _useState18=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState18[0],setSize=_useState18[1],_useState20=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)([{id:"a",comment:"Hello World",mark:{type:"RECT",width:161,height:165,x:229,y:92}}]),2),annotationData=_useState20[0],setAnnotationData=_useState20[1],_useState22=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("a"),2),selectedId=_useState22[0],setSelectedId=_useState22[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){setSelectedId(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},hoverable:!0,image:"https://unsplash.it/1200/600"})})).add("Refresh",(function(){var _useState24=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState24[0],setSize=_useState24[1],_useState26=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("https://picsum.photos/id/1/200/300"),2),image=_useState26[0],setImage=_useState26[1],_useState28=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)([{id:"a",comment:"Hello World",mark:{type:"RECT",width:161,height:165,x:229,y:92}}]),2),annotationData=_useState28[0],setAnnotationData=_useState28[1],_useState30=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("a"),2),selectedId=_useState30[0],setSelectedId=_useState30[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("button",{onClick:function onClick(){return setImage("https://picsum.photos/id/".concat(Math.round(1e3*Math.random()),"/200/300"))}},"Change Image"),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){setSelectedId(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},hoverable:!0,image:image}))})).add("Editable",(function(){var _useState32=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState32[0],setSize=_useState32[1],_useState34=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(defaultAnnotations),2),annotationData=_useState34[0],setAnnotationData=_useState34[1],_useState36=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("a"),2),selectedId=_useState36[0],setSelectedId=_useState36[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){setSelectedId(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},editable:!0,image:"https://unsplash.it/1200/600"})})).add("Creatable",(function(){var _useState38=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState38[0],setSize=_useState38[1],_useState40=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(defaultAnnotations),2),annotationData=_useState40[0],setAnnotationData=_useState40[1],_useState42=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("a"),2),selectedId=_useState42[0],setSelectedId=_useState42[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){setSelectedId(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},creatable:!0,editable:!1,image:"https://unsplash.it/1200/600"})})).add("Custom Render",(function(){var _useState44=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState44[0],setSize=_useState44[1],_useState46=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(defaultAnnotations.map((function(el){return Object.assign({},el,{mark:Object.assign({},el.mark,{draw:function draw(canvas,x,y,width,height){canvas.beginPath(),canvas.fillStyle="green",canvas.arc(x+width/2,y+height/2,Math.min(height,width)/2,0,2*Math.PI),canvas.stroke(),canvas.fill()}})})}))),2),annotationData=_useState46[0],setAnnotationData=_useState46[1],_useState48=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("a"),2),selectedId=_useState48[0],setSelectedId=_useState48[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){setSelectedId(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600"})})).add("No Labels",(function(){var _useState50=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState50[0],setSize=_useState50[1],_useState52=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)([{id:"a",comment:"HA HA HA",mark:{type:"RECT",width:161,height:165,x:229,y:92}}]),2),annotationData=_useState52[0],setAnnotationData=_useState52[1],_useState54=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("a"),2),selectedId=_useState54[0],setSelectedId=_useState54[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){setSelectedId(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},drawLabel:!1,image:"https://unsplash.it/1200/600"}))})).add("Colors",(function(){var _useState56=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState56[0],setSize=_useState56[1],annotations=[{id:"a",comment:"HA HA HA",mark:{type:"RECT",width:161,height:165,x:229,y:92,strokeColor:"red",backgroundColor:"rgba(255,0,0,0.2)"}},{id:"b",comment:"HA HA HA 2",mark:{type:"RECT",width:116,height:116,x:429,y:192,strokeColor:"green",backgroundColor:"rgba(0,255,0,0.2)"}}],_useState58=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(annotations),2),annotationData=_useState58[0],setAnnotationData=_useState58[1],_useState60=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("a"),2),selectedId=_useState60[0],setSelectedId=_useState60[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]);return react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("button",{onClick:function changeColor(){annotations[0].mark.strokeColor="blue",setAnnotationData(annotations)}},"Change Color"),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){setSelectedId(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600"}))})).add("Custom Render using scale",(function(){var AnnotationComponent=function AnnotationComponent(){var _useState62=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState62[0],setSize=_useState62[1],_useState64=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(defaultAnnotations.map((function(el){return Object.assign({},el,{mark:Object.assign({},el.mark,{draw:function draw(canvas,x,y,_,_2,scale){var fontSize=16*(scale||0);canvas.font="".concat(fontSize,"px verdana"),canvas.fillStyle="black",canvas.fillText("Scaled text",x,y)}})})}))),2),annotationData=_useState64[0],setAnnotationData=_useState64[1],_useState66=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("a"),2),selectedId=_useState66[0],setSelectedId=_useState66[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};return Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){return setSelectedId(e)},image:"https://unsplash.it/1200/600"})};return react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(AnnotationComponent,null)})).add("Buttons",(function(){var _useState68=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState68[0],setSize=_useState68[1],_useState70=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)([{id:"a",comment:"HA HA HA",mark:{type:"RECT",width:161,height:165,x:229,y:92}},{id:"b",comment:"HA HA HA 2",mark:{type:"RECT",width:116,height:116,x:429,y:192}}]),2),annotationData=_useState70[0],setAnnotationData=_useState70[1],_useState72=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)("a"),2),selectedId=_useState72[0],setSelectedId=_useState72[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]);var annotationRef=react__WEBPACK_IMPORTED_MODULE_20___default.a.createRef();return react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){setSelectedId(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600",ref:annotationRef}),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("div",{style:{position:"absolute",zIndex:1e3}},react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("button",{onClick:function onClick(){annotationRef.current&&annotationRef.current.zoomIn()}},"Zoom In"),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("button",{onClick:function onClick(){annotationRef.current&&annotationRef.current.zoomOut()}},"Zoom Out"),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("button",{onClick:function onClick(){annotationRef.current&&annotationRef.current.reset()}},"Reset")))})).add("Extract From Canvas",(function(){var _useState74=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState74[0],setSize=_useState74[1],_useState76=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)([defaultAnnotations[0]]),2),annotationData=_useState76[0],setAnnotationData=_useState76[1],_useState78=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(void 0),2),src=_useState78[0],setSrc=_useState78[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]);var annotationRef=react__WEBPACK_IMPORTED_MODULE_20___default.a.createRef();return react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},creatable:!0,onSelect:function onSelect(e){Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},image:"https://unsplash.it/1200/600",ref:annotationRef}),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("div",{style:{position:"absolute",zIndex:1e3}},react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("button",{onClick:function onClick(){if(annotationRef.current){var _annotationData$mark=annotationData[annotationData.length-1].mark,x=_annotationData$mark.x,y=_annotationData$mark.y,width=_annotationData$mark.width,height=_annotationData$mark.height;setSrc(annotationRef.current.extractFromCanvas(x,y,width,height))}}},"Get Image"),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("img",{src:src,style:{width:100,height:"auto"}})))})).add("Download",(function(){var _useState80=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)({width:window.innerWidth-16,height:window.innerHeight-16}),2),size=_useState80[0],setSize=_useState80[1],_useState82=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(defaultAnnotations.map((function(el,i){return Object.assign({},el,{mark:Object.assign({},el.mark,{draw:function draw(ctx,x,y,_,_2,scale){var fontsize=28*scale,text="Hello! - ".concat(i);ctx.font=fontsize+"px verdana";var textWidth=ctx.measureText(text).width+8;ctx.textAlign="left",ctx.textBaseline="top",ctx.fillStyle="red",ctx.fillRect(x,y,textWidth,fontsize+4),ctx.fillStyle="white",ctx.fillText(text,x+4,y+2)}})})})).concat([{id:"additional",comment:"Hello World2",mark:{type:"RECT",width:.2,height:.3,x:.1,y:.25}}])),2),annotationData=_useState82[0],setAnnotationData=_useState82[1],_useState84=_slicedToArray(Object(react__WEBPACK_IMPORTED_MODULE_20__.useState)(null),2),selectedId=_useState84[0],setSelectedId=_useState84[1],onResize=function onResize(){setSize({width:window.innerWidth-16,height:window.innerHeight-16})};Object(react__WEBPACK_IMPORTED_MODULE_20__.useEffect)((function(){return window.addEventListener("resize",onResize),function(){window.removeEventListener("resize",onResize)}}),[]);var annotationRef=react__WEBPACK_IMPORTED_MODULE_20___default.a.createRef();return react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(Wrapper,null,react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement(_src__WEBPACK_IMPORTED_MODULE_23__.ReactPictureAnnotation,{width:size.width,height:size.height,annotationData:annotationData,onChange:function onChange(data){return setAnnotationData(data)},selectedId:selectedId,onSelect:function onSelect(e){setSelectedId(e),Object(_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_21__.action)("onSelect")(e)},pdf:"https://mozilla.github.io/pdf.js/web/compressed.tracemonkey-pldi-09.pdf",ref:annotationRef}),react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("div",{style:{position:"absolute",zIndex:1e3}},react__WEBPACK_IMPORTED_MODULE_20___default.a.createElement("button",{onClick:function onClick(){annotationRef.current&&annotationRef.current.downloadFile("sample.pdf")}},"Download")))}));var Wrapper=styled_components__WEBPACK_IMPORTED_MODULE_22__.a.div(_templateObject())}.call(this,__webpack_require__(491)(module))},,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("N9G2")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("mg+6")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("tJVe")},function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("7St7")},function(module,exports,__webpack_require__){var api=__webpack_require__(499),content=__webpack_require__(500);"string"==typeof(content=content.__esModule?content.default:content)&&(content=[[module.i,content,""]]);var options={insert:"head",singleton:!1};api(content,options);module.exports=content.locals||{}},,function(module,exports,__webpack_require__){(exports=__webpack_require__(501)(!1)).push([module.i,".rp-stage {\n  position: relative;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto,\n    Oxygen-Sans, Ubuntu, Cantarell, 'Helvetica Neue', Helvetica, Arial,\n    sans-serif;\n}\n\n.rp-image {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  overflow: hidden;\n}\n\n.rp-shapes {\n  position: absolute;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n}\n\n.rp-selected-input {\n  position: absolute;\n}\n\n.rp-delete {\n  width: 20px;\n  height: 20px;\n  fill: white;\n}\n\n.rp-delete-section {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.rp-default-input-section {\n  display: flex;\n  align-items: stretch;\n  background-color: #3384ff;\n  border: none;\n  border-radius: 5px;\n}\n\n.rp-default-input-section input {\n  padding: 10px;\n  color: white;\n  background: transparent;\n  border: 0;\n  outline: none;\n}\n\n.rp-default-input-section input::-moz-placeholder {\n  color: #94bfff;\n}\n\n.rp-default-input-section input:-ms-input-placeholder {\n  color: #94bfff;\n}\n\n.rp-default-input-section input::-ms-input-placeholder {\n  color: #94bfff;\n}\n\n.rp-default-input-section input::placeholder {\n  color: #94bfff;\n}\n\n.rp-default-input-section a {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  width: 35px;\n  color: white;\n  font-size: 12px;\n  background-color: #3b5bdb;\n  border-radius: 0 5px 5px 0;\n  cursor: pointer;\n  transition: background-color 0.5s, color 0.5s;\n}\n\n.rp-default-input-section a:hover,\n.rp-default-input-section a:active {\n  color: #3384ff;\n  background-color: #5c7cfa;\n}\n",""]),module.exports=exports},,,,,function(module,exports,__webpack_require__){module.exports=__webpack_require__(5)("Rl48")},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){},function(module,exports){}],[[231,1,2]]]);
//# sourceMappingURL=main.e078cab0412ad3c2104d.bundle.js.map